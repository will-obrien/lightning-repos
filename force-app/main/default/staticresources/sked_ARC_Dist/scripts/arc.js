!function(a){a.module("skedApp.core",[])}(angular),function(a){a.module("skedApp.shared",["angular-click-outside"])}(angular),function(a){a.module("skedApp.core").provider("api",function(){var b=!1,c={},d={};this.setController=function(a){c=a},this.setRemotingConfiguration=function(b){a.isObject(b)&&a.extend(d,b)},this.enableDebug=function(){b=!0},this.$get=["$q",function(e){var f={};return a.forEach(c,function(g,h){a.isFunction(g)?f[h]=function(){var f=e.defer(),i=[],j=[];return a.forEach(arguments,function(a){i.push(a),j.push(a)}),i.push(function(a,b){b.status?f.resolve(a):f.reject(b)}),i.push(d),g.apply(c,i),b&&console&&console.debug(h,j,new Date),f.promise}:f[h]=g}),f}]})}(angular),function(a){a.module("skedApp.shared").provider("ggLocationApi",function(){var b={apiKey:"AIzaSyA83ZOeD6Gw3eRxuSlxOE-dPA3l_iLRVkY",endpointUrl:"https://maps.googleapis.com/maps/api/geocode",sensor:!0,outputFormat:"json"};this.config=function(c){a.isObject(c)&&a.extend(b,c)},this.$get=["$http","$q",function(c,d){var e=[b.endpointUrl,b.outputFormat].join("/"),f=function(f){return f=a.extend({},{key:b.apiKey,sensor:b.sensor},f),c({url:e,params:f,method:"GET"}).then(function(a){return a.data&&"OK"===a.data.status?a.data:(console.error(a.data),d.reject(a.data))})};return{lookup:f}}]})}(angular),function(a){a.module("skedApp.core").provider("env",function(){var b={};this.setVariables=function(c){a.extend(b,c)},this.$get=[function(){return b}]})}(angular),function(a,b){a.module("skedApp.shared").factory("util",["$q","$rootScope","$document","$templateRequest","$compile","$timeout",function(b,c,d,e,f,g){var h={DEFAULT:0,SUCCESS:1,WARNING:2,ERROR:3},i=function(){c.loading=!0},j=function(){c.loading=!1},k=function(b){var d,h,i=b.constroller||{},j=function(c){var e=a.element('<div class="sked-modal-container"></div>'),j=a.element("body"),k=a.element("<div ></div>"),l=a.element('<div class="slds-backdrop"></div>'),m=9010+(a.element(".sked-modal-container").length||0)+1;e.css("z-index",m),k.attr({role:"dialog",tabindex:-1,"class":"slds-modal slds-fade-in-open slds-hide slds-modal--"+b.size}),k.append(c),k.appendTo(e),l.appendTo(e),f(k)(h),d.append(e),k.addClass("slds-show").removeClass("slds-hide").attr("aria-hidden","false").attr("tabindex",-1),b.noBackdrop!==!0&&g(function(){l.addClass("slds-backdrop--open"),k.addClass("slds-fade-in-open")},25),j.css({overflow:"hidden"}),i.closeModal=function(c,d){var f=function(){e.remove(),a.isFunction(d)&&d(),h&&a.isFunction(h.$destroy)&&h.$destroy()};b.noBackdrop!==!0?l.one("transitionend",f).removeClass("slds-backdrop--open"):f(),k.removeClass("slds-fade-in-open").attr("aria-hidden","true").attr("tabindex",-1),j.css({overflow:""}),a.isFunction(c)&&c()}};return b&&(b.templateUrl||b.template)&&(d=b.appendTo||a.element("[ng-app]"),h=b.scope||c.$new(),b.templateUrl?e(b.templateUrl).then(j):b.template&&j(b.template)),i},l=function(b,d){var i=["otification","success","warning","error"],j=["","slds-theme--success","slds-theme--warning","slds-theme--error"],k=a.extend({templateUrl:"src/shared/toast-template.html",type:h.DEFAULT,icon:i[b.type||0],timeout:6e3},b),l=k.appendTo||a.element("[ng-app]"),m=d||c.$new();a.extend(m,k),e(k.templateUrl).then(function(b){var c=a.element(".slds-notify_container"),d=a.element('<div role="alert" class="slds-notify slds-notify--toast pc-toast-message slds-theme--alert-texture '+j[k.type]+'"></div>');0===c.length&&(c=a.element('<div class="slds-notify_container"></div>'),l.append(c)),d.append(b),d.prependTo(c),f(d)(m),g(function(){d.addClass("pc-toast-message-shown")},0),g(function(){d.one("transitionend",function(){d.remove()}).removeClass("pc-toast-message-shown")},k.timeout)})},m=function(a){return l({type:h.DEFAULT,message:a})},n=function(a){return l({type:h.SUCCESS,message:a})},o=function(a){return l({type:h.WARNING,message:a})},p=function(a){return l({type:h.ERROR,message:a})},q=function(d){var e=b.defer(),f=c.$new(),g=a.extend({templateUrl:"src/shared/confirm-modal-template.html",scope:f},d),h=k(g);return f.title=d.title||"Confirmation",f.message=d.message||"Are you sure?",f.confirm=function(){h.closeModal(),e.resolve("confirmed")},f.dismiss=function(){h.closeModal(),e.reject("cancelled")},e.promise},r=function(d,e){var f,g=b.defer(),h=d.scope||c.$new(),i=a.extend({scope:h},d);return e&&a.extend(h,e),f=k(i),h.closeModal=function(a){f.closeModal(null,function(){g.resolve(a)})},g.promise},s=function(b,c){var d=function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!s(a[c],b[c]))return!1;return!0},e=function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&(!b.hasOwnProperty(c)||!s(a[c],b[c])))return!1;return!0};return b===c||a.isObject(b)&&a.isObject(c)&&!a.isArray(b)&&!a.isArray(c)&&e(b,c)||a.isArray(b)&&a.isArray(c)&&d(b,c)};return{showLoading:i,hideLoading:j,showModal:r,confirm:q,toastBasic:m,toastSuccess:n,toastWarning:o,toastError:p,compareValues:s}}])}(angular,jQuery),function(a,b,c){a.module("skedApp.shared").factory("dateUtil",["$filter",function(b){var d=864e5,e=b("date"),f=function(a){var b=/^\d{4}\-(0[1-9]|1[0-2])\-(0[1-9]|[1-2][0-9]|3[0-1])$/;return a&&b.test(a)},g=function(b){var c=/^([0-1][0-9]|2[0-4])([0-5][0-9])$/;return a.isNumber(b)&&b>=0&&c.test(("0000"+b).substr(-4))},h=function(b){var c;return a.isDate(b)?b:a.isNumber(b)?new Date(b):a.isString(b)&&f(b)?(c=b.split("-"),new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))):null},i=function(a,b){return b=b||"yyyy-MM-dd",e(a,b)},j=function(b,c){return a.isDate(b)&&a.isNumber(c)?new Date(b.getTime()+c*d):null},k=function(a,b){var c,d,e,f=null,h=/^([0-1][0-9]|2[0-4])([0-5][0-9])$/;return g(a)&&(f=b||new Date,c=h.exec(("0000"+a).substr(-4)),d=c[1],e=c[2],f.setHours(d,e,0,0)),f},l=function(a,b){return k(b,h(a))},m=function(a){var b;return c&&c.tz&&a?(b=c(),b.tz(a),new Date(b.year(),b.month(),b.date(),b.hour(),b.minute(),b.second(),0)):new Date},n=function(a){return!a||0>a?0:60*Math.floor(a/100)+Math.round(a%100)},o=function(a){return!a||0>a?0:100*Math.floor(a/60)+Math.round(a%60)};return{isDateStringValid:f,parseDateString:h,addDay:j,dateToString:i,parseDateTime:l,getCurrentDateTimeByTimezone:m,getMinuteValue:n,parseTimeFromMinute:o}}])}(angular,jQuery,window.moment||null),function(a){a.module("skedApp.shared").filter("skedSfUrl",["env",function(b){var c=a.copy(b.RESOURCE_PATH)||"/";return"/"!==c.charAt(c.length-1)&&(c+="/"),function(b){return a.isString(b)?("/"===b.charAt(0)&&(b=b.substring(1)),c+b):void 0}}])}(angular),function(a){a.module("skedApp.shared").filter("skedTimeName",[function(){return function(b){var c,d,e,f;return a.isNumber(b)?(c=Math.floor(b/100),tsM=Math.round(b%100),c%=24,c>12?(d=""+(c-12),f=24===c?"AM":"PM"):(d=""+c,f=12===c?"PM":"AM"),e="00"+tsM,e=e.substr(e.length-2),d+":"+e+" "+f):""}}])}(angular),function(a){a.module("skedApp.shared").directive("skedDraggableScrolling",["$window","$timeout",function(b,c){return function(c,d,e){var f,g,h=e.skedDraggableScrolling?a.element(e.skedDraggableScrolling):null,i=a.element(b),j=function(){h&&h.length>0&&h.scrollLeft(this.scrollLeft)},k=function(a,b,c){var d=a.type;switch(d){case"mousedown":1===a.which&&(g=!0,f=a.pageX,b.addClass("mouse-down"));break;case"mousemove":g===!0&&(this.scrollLeft+=f-a.pageX,f=a.pageX,c&&c.length>0&&c.scrollLeft(this.scrollLeft));break;case"mouseup":b.removeClass("mouse-down"),g=!1}};d.on("scroll",j),h&&h.length>0&&h.on("mousedown mousemove mouseup",function(a){k.call(this,a,h,d)}),i.on("mouseup",function(){d.removeClass("mouse-down"),g=!1})}}])}(angular),function(a){a.module("skedApp.shared").directive("skedInput",[function(){var b={DATE_PICKER:"date-picker",MONTH_PICKER:"month-picker",TIME_PICKER:"time-picker",TEXT:"text",LOOKUP:"lookup",SELECT:"select"},c=function(a){var b="";return a.pattern&&(b='ng-pattern="'+a.pattern+'"'),['<div class="slds-form-element__control">','<input type="'+a.type+(a.id?'" id="'+a.id:"")+'" name="'+a.name+'" class="slds-input" '+(a.onChange?' ng-change="'+a.onChange+'" ':" ")+(a.onBlur?' ng-blur="'+a.onBlur+'" ':" ")+' ng-model="'+a.model+'" '+(a.modelOptions?' ng-model-options="'+a.modelOptions+'" ':"")+' ng-readonly="'+a.readonly+'" ng-required="'+a.required+'" '+b+" "+(a.minValue?'ng-min="'+a.minValue+'"':"")+" "+(a.maxValue?'ng-max="'+a.maxValue+'"':"")+" />","</div>"].join("")},d=function(a){return['<div class="slds-form-element__control">','<div class="slds-select_container">',"<select "+(a.onChange?' ng-change="'+a.onChange+'" ':"")+(a.id?' id="'+a.id+'" ':"")+' name="'+a.name+'" class="slds-select" ng-model="'+a.model+'" ng-required="'+a.required+'" ng-disabled="'+a.disabled+'" ng-options="'+a.selectOptions+'">',a.selectNullOption?'<option value="">'+a.selectNullOption+"</option>":"","</select>","</div>","</div>"].join("")},e=function(a){return a.dateOptions||(a.dateOptions=""),['<div class="slds-form-element__control">','<div class="slds-input-has-icon slds-input-has-icon--left" style="position: relative;z-index: 9020">','<svg aria-hidden="true" class="slds-input__icon input-text-default">','<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use>',"</svg>",'<input name="'+a.name+'" class="slds-input" type="text" ui-date="'+a.dateOptions+'" ng-model="'+a.model+'" ng-readonly="'+a.readonly+'" ng-required="'+a.required+'" />',"</div>","</div>"].join("")},f=function(a){return a.monthOptions||(a.monthOptions="{}"),['<div class="slds-form-element__control">','<div class="slds-input-has-icon slds-input-has-icon--left" style="position: relative;z-index: 9020">','<svg aria-hidden="true" class="slds-input__icon input-text-default">','<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#monthlyview\' | skedSfUrl}}"></use>',"</svg>",'<input name="'+a.name+'" class="slds-input" type="text" sked-month-picker="'+a.monthOptions+'" ng-model="'+a.model+'" ng-readonly="'+a.readonly+'" ng-required="'+a.required+'" />',"</div>","</div>"].join("")},g=function(a){return a.timeOptions||(a.timeOptions=""),['<div class="slds-form-element__control">','<div class="slds-input-has-icon slds-input-has-icon--left">','<svg aria-hidden="true" class="slds-input__icon input-text-default">','<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#clock\' | skedSfUrl}}"></use>',"</svg>",'<input name="'+a.name+'" class="slds-input" type="text" sked-time-picker="'+a.timeOptions+'" ng-model="'+a.model+'" ng-readonly="'+a.readonly+'" '+(a.required?'required="required"':"")+" />","</div>","</div>"].join("")};return{restrict:"E",replace:!0,template:function(h,i){var j,k,l=[],m=i.type||"text",n=i.label,o=i.model,p=i.modelOptions,q=i.id,r=i.name,s="",t=i.isRequired,u=i.isReadonly||!1,v=i.isDisabled||!1,w=i.dateOptions,x=i.monthOptions,y=i.timeOptions,z=i.selectOptions,A=i.selectNullOption,B=i.pattern,C=i.onChange,D=i.onBlur,E=i.minValue,F=i.maxValue,G=h.parents("ng-form, [ng-form]"),H="",I="",J={};switch(G&&G.length>0&&(j=a.element(G.get(0)),k=j.attr(j.is("[ng-form]")?"ng-form":"name")),k&&r&&(H="ng-class=\"{'slds-has-error': "+k+".$submitted && "+k+"."+r+'.$invalid}"'),n&&t&&(I='<abbr class="slds-required" title="required">*</abbr> '),l.push('<div class="slds-form-element '+s+'" '+H+">"),n&&l.push('<label class="slds-form-element__label" for="'+q+'">'+I+n+"</label>"),J={name:r,model:o,modelOptions:p,required:t,readonly:u,disabled:v,pattern:B,onChange:C,onBlur:D,minValue:E,maxValue:F},m){case b.DATE_PICKER:a.merge(J,{dateOptions:w}),l.push(e(J));break;case b.MONTH_PICKER:a.merge(J,{monthOptions:x}),l.push(f(J));break;case b.TIME_PICKER:a.merge(J,{timeOptions:y}),l.push(g(J));break;case b.SELECT:a.merge(J,{id:q,selectOptions:z,selectNullOption:A}),l.push(d(J));break;default:a.merge(J,{id:q,type:m}),l.push(c(J))}return l.push("</div>"),l.join("")}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedInputLookup",["$timeout","$q","$templateRequest","$compile","$document","$window",function(b,c,d,e,f,g){return{restrict:"E",replace:!0,templateUrl:"src/shared/input-lookup-template.html",scope:{label:"@?",iconUrl:"@?",iconClass:"@?",labelField:"@",metaField:"@",required:"@?isRequired",searchFn:"&search",model:"=",isInvalid:"=",isReadonly:"="},link:function(h,i,j){var k,l=i.find("input[type=text]"),m="src/shared/input-lookup-menu-template.html",n=a.element("[ng-app]"),o=a.element(g),p=function(a){for(var b=a.target;b;b=b.parentNode)if(b===k[0]||b===l[0])return;h.hideLookupMenu()};h.selectLookupItem=function(a){h.model=a,h.searchString=""},h.focusLookupInput=function(){l&&l.length>0&&b(function(){l.focus()},10)},h.search=function(){h.isReadonly||c.when(h.searchFn({searchString:h.searchString})).then(function(a){h.searchResults=a||[],h.searchResults.length>0?h.showLookupMenu():h.hideLookupMenu()})["catch"](function(){h.searchResults=null})},h.showLookupMenu=function(){var c=i.outerWidth();!k&&a.isArray(h.searchResults)&&h.searchResults.length>0&&d(m).then(function(d){k=a.element('<div class="slds-lookup__menu"></div>'),k.append(d),k.css({"max-width":c+"px"}),k.appendTo(n),e(k)(h),f.on("click",p),b(function(){h.setLookupMenuPosition(),k.css({visibility:"visible",opacity:1})})}),b(function(){h.setLookupMenuPosition()})},h.hideLookupMenu=function(){k&&(k.css({visibility:"hidden",opacity:0}),b(function(){k.remove(),k=null,f.off("click",p)},150))},h.setLookupMenuPosition=function(){var a,b,c,d,e,f,g,h;k&&(a=l.offset(),b=l.outerHeight(),c=l.outerWidth(),d=k.outerHeight(),windowHeight=o.outerHeight(),e=n.offset(),f=n.position(),g=a.top+b-e.top+f.top,h=a.left-e.left+f.left,d+g>windowHeight&&(g-=d+b+1),k.css({top:g,left:h}))},h.required=!!h.required}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedMultiPicklist",["$timeout","$window","$templateRequest","$compile","$document",function(b,c,d,e,f){return{restrict:"E",replace:!0,templateUrl:"src/shared/multi-picklist-template.html",scope:{listPosition:"@?",label:"@?",selectOptions:"@",selectAllOption:"@?",labelForMultiSelection:"@?",model:"="},link:function(g,h,i){var j,k=/^(.*)\s+as\s+(.*)\s+for\s+(.*)\s+in\s+(.*)$/i,l=k.exec(g.selectOptions),m=l[1],n=l[2],o=(l[3],l[4]),p="src/shared/multi-picklist-menu-template.html",q=a.element("[ng-app]"),r=a.element(c),s=h.find("input"),t=function(a){for(var b=a.target;b;b=b.parentNode)if(b===j[0]||b===s[0])return;g.hidePicklist()},u=function(){var b="";return a.isArray(g.selectedOptions)&&g.selectedOptions.length>0&&(g.selectedOptions.length===g.optionList.length&&g.selectAllOption?b=g.selectAllOption:1===g.selectedOptions.length?b=g.$parent.$eval(n,{item:g.selectedOptions[0]}):g.selectedOptions.length>1&&(b=g.labelForMultiSelection?g.labelForMultiSelection:g.selectedOptions.length+" Selected")),b},v=function(b){var c;g.optionList=b,g.selectedOptions=[],a.isArray(g.optionList)&&g.optionList.length>0&&(c=g.optionList.map(function(a){return JSON.stringify(a)}),a.isArray(g.model)&&g.model.length>0&&a.forEach(g.model,function(a){var b=JSON.stringify(a),d=c.indexOf(b);d>-1&&g.selectedOptions.push(g.optionList[d])})),g.selectionLabel=u()};g.selectionLabel="",g.selectedOptions=[],g.toggleOptionSelection=function(b){var c,d,e=g.selectedOptions.indexOf(b),f=g.$parent.$eval(m,{item:b}),h=JSON.stringify(f);-1===e?g.selectedOptions.push(b):g.selectedOptions.splice(e,1),a.isArray(g.model)||(g.model=[]),d=g.model.map(function(a){return JSON.stringify(a)}),c=d.indexOf(h),-1===c?g.model.push(f):g.model.splice(c,1),g.selectionLabel=u()},g.getOptionLabel=function(a){return g.$parent.$eval(n,{item:a})},g.showPicklist=function(){var c=h.outerWidth();j||d(p).then(function(d){j=a.element('<div class="slds-lookup__menu slds-dropdown slds-dropdown_'+(g.listPosition||"left")+'"></div>'),j.append(d),j.css({"min-width":c+"px","max-width":"max-content"}),j.appendTo(q),e(j)(g),f.on("click",t),b(function(){g.setPicklistPosition(),j.css({visibility:"visible",opacity:1})})}),b(function(){g.setPicklistPosition()})},g.hidePicklist=function(){j&&(j.css({visibility:"hidden",opacity:0}),b(function(){j.remove(),j=null,f.off("click",t)},150))},g.setPicklistPosition=function(){var a,b,c,d,e,f,g,h;j&&(a=s.offset(),b=s.outerHeight(),c=s.outerWidth(),d=j.outerHeight(),windowHeight=r.outerHeight(),e=q.offset(),f=q.position(),g=a.top+b-e.top+f.top-2,h=a.left-e.left+f.left,d+g>windowHeight&&(g-=d+b+1),j.css({top:g,left:h}))},g.toggleSelectAll=function(){g.optionList.length===g.selectedOptions.length?(g.selectedOptions=[],g.model=[]):a.forEach(g.optionList,function(a){optionIndex=g.selectedOptions.indexOf(a),-1===optionIndex&&g.toggleOptionSelection(a)})},g.$watchCollection(function(){return g.$parent.$eval(o)},v,!0),g.$watch("model",function(){v(g.optionList)})}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedInputTags",["$timeout","$q","$filter","$templateRequest","$compile","$document","$window",function(b,c,d,e,f,g,h){return{restrict:"E",replace:!0,templateUrl:"src/shared/input-tags-template.html",scope:{label:"@?",iconUrl:"@?",iconClass:"@?",labelField:"@?",metaField:"@?",searchFn:"&search",isReadonly:"=",model:"=",placeholder:"@?"},link:function(i,j,k){var l,m=j.find("input[type=text]"),n=j.find(".slds-pill_container"),o="src/shared/input-tags-lookup-menu-template.html",p=a.element("[ng-app]"),q=a.element(h),r=function(a){for(var b=a.target;b;b=b.parentNode)if(b===l[0]||b===n[0])return;i.hideLookupMenu()};i.isFocusing=!1,i.addTag=function(a){-1===i.model.indexOf(a)&&(i.model.push(a),i.updateLookupMenuVisibility())},i.removeTagAt=function(a){a<i.model.length&&i.model.splice(a,1)},i.focusLookupInput=function(){m&&m.length>0&&b(function(){m.focus()},10)},i.filterAlreadySelectedTags=function(b,c,d){for(var e=i.model,f=0;f<e.length;f++)if(e[f]===b||a.isObject(e[f])&&e[f].id===b.id)return!1;return!0},i.search=function(){c.when(i.searchFn({searchString:i.searchString})).then(function(a){i.searchResults=a,i.updateLookupMenuVisibility()})["catch"](function(){i.searchResults=null})},i.showLookupMenu=function(){var c=j.outerWidth();l||e(o).then(function(d){l=a.element('<div class="slds-lookup__menu"></div>'),l.append(d),l.css({"max-width":c+"px"}),l.appendTo(p),f(l)(i),g.on("click",r),b(function(){i.setLookupMenuPosition(),l.css({visibility:"visible",opacity:1})})}),b(function(){i.setLookupMenuPosition()})},i.hideLookupMenu=function(){l&&(l.css({visibility:"hidden",opacity:0}),b(function(){l.remove(),l=null,g.off("click",r)},150))},i.setLookupMenuPosition=function(){var a,b,c,d,e,f,g,h;l&&(a=n.offset(),b=n.outerHeight(),c=n.outerWidth(),d=l.outerHeight(),windowHeight=q.outerHeight(),e=p.offset(),f=p.position(),g=a.top+b-e.top+f.top,h=a.left-e.left+f.left,d+g>windowHeight&&(g-=d+b+1),l.css({top:g,left:h}))},i.updateLookupMenuVisibility=function(){var a=d("filter")(i.searchResults,i.filterAlreadySelectedTags);a.length>0?i.showLookupMenu():i.hideLookupMenu()},a.isArray(i.model)||(i.model=[])}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedTimePicker",["dateUtil","$timeout",function(b,c){var d="h:i A",e=function(a,b){var c,e,f="(0?[0-9]|1[0-2])",g="([0-5][0-9])",h="(am|AM|pm|PM)";return b||(b=d),c=b,c=c.replace(/h/g,f),c=c.replace(/i/g,g),c=c.replace(/[aA]/g,h),e=new RegExp("^"+c+"$"),e.test(a)},f=function(a,b){var c,f,g,h,i,j,k,l,m,n,o="(0?[0-9]|1[0-2])",p="([0-5][0-9])",q="(am|AM|pm|PM)";return b||(b=d),b=b.toLowerCase(),a=a?a.trim():"",e(a,b)?(h=b.indexOf("h"),i=b.indexOf("i"),j=b.indexOf("a"),c=b.replace(/([^hia])/g,"($1)"),c=c.replace(/h/g,o),c=c.replace(/i/g,p),c=c.replace(/a/g,q),f=new RegExp(c),g=f.exec(a),l=parseInt(g[h+1],10),m=parseInt(g[i+1],10),n=g[j+1],12===l&&(l=0),k=100*(l+("pm"===n.toLowerCase()?12:0))+m):null};return{restrict:"A",require:"?ngModel",link:function(b,c,g,h){var i=function(){var c={timeFormat:d,appendTo:"[ng-app]",forceRoundTime:!0,selectOnBlur:!0,step:15};return a.extend({},c,b.$eval(g.skedTimePicker))},j=function(){var b=i();h&&(h.$validators.skedTimeValidator=function(a,b){return e(b)},h.$parsers.push(function(a){return f(a)}),h.$formatters.push(function(a){var b="000"+a;return c.timepicker("setTime",b.substr(-4)),c.val()}),h.$render=function(){var a="000"+h.$modelValue;c.timepicker("setTime",a.substr(-4))}),c.data("timepicker")?c.timepicker("option",b):(c.timepicker(b),c.on("$destroy",function(){c.timepicker("hide"),c.timepicker("remove")}),a.isObject(b.events)&&a.forEach(b.events,function(a,b){c.on(b,a)})),h&&h.$render()};b.$watch(i,j,!0)}}}])}(angular),function(a,b){a.module("skedApp.shared").directive("skedDropdownMenu",["$templateRequest","$compile","$window","$document",function(b,c,d,e){return{restrict:"A",link:function(f,g,h){var i,j=h.skedDropdownMenu,k=g.parents("[ng-app]"),l=a.element(d),m=g.parents(h.skedDropdownMenuContainer),n=f.$eval(h.skedDropdownMenuIgnored),o=function(a){for(var b=a.target;b;b=b.parentNode)if(b===i[0]||b===g[0])return;q()},p=function(){var d=g.offset(),h=g.outerHeight(),l=g.outerWidth(),m=k.offset(),n=k.position();i||b(j).then(function(b){i=a.element("<div></div>"),i.append(b),i.css({position:"absolute","z-index":90002,top:d.top+h-m.top+n.top,left:d.left+l-m.left+n.left}),i.appendTo(k),c(i)(f),e.on("click",o)})},q=function(){i&&(i.remove(),i=null,e.off("click",o))};n!==!0&&j&&(g.click(p),l.scroll(q),m&&m.scroll(q),f.$dropdownMenu={hideDropdownMenu:q})}}}])}(angular,jQuery),function(a,b){a.module("skedApp.shared").directive("skedContextMenu",["$templateRequest","$compile","$window","$document",function(b,c,d,e){return{restrict:"A",link:function(f,g,h){var i,j=f.$eval(h.skedContextMenu),k=h.skedContextMenuTemplate,l=g.parents("[ng-app]"),m=a.element(d),n=g.parents(h.skedContextMenuContainer),o=function(a){for(var b=a.target;b;b=b.parentNode)if(b===i[0])return;q()},p=function(d){var g=l.offset(),h=l.position();d.preventDefault(),i||b(k).then(function(b){i=a.element("<div></div>"),i.append(b),i.css({position:"absolute","z-index":90001,top:d.pageY-g.top+h.top,left:d.pageX-g.left+h.left}),i.appendTo(l),c(i)(f),e.on("click contextmenu",o)})},q=function(){i&&(i.remove(),i=null,e.off("click contextmenu",o))};j&&(k&&(g.contextmenu(p),m.scroll(q),n&&n.scroll(q)),f.$contextMenu={hideContextMenu:q})}}}])}(angular,jQuery),function(a,b){a.module("skedApp.shared").directive("skedPopover",["$templateRequest","$compile","$window","$document","$timeout",function(b,c,d,e,f){var g=5,h={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},i=function(a,b){return a.top>=g&&a.left>=g&&a.left+b.eW<=b.cW-g&&a.top+b.eH<=b.cH-g},j=function(a,b,c){var d={top:b.tT+b.tH,left:b.tL-b.eW/2+b.tW/2,"margin-top":"1.25rem"};return c||i(d,b)?(a.css(d),a.addClass("slds-nubbin_top"),!0):!1},k=function(a,b,c){var d={top:b.tT-b.eH,left:b.tL-b.eW/2+b.tW/2,"margin-top":"-1.25rem"};return c||i(d,b)?(a.css(d),a.addClass("slds-nubbin_bottom"),!0):!1},l=function(a,b,c){var d={top:b.tT-b.eH/2+b.tH/2,left:b.tL-b.eW,"margin-left":"-1.25rem"};return c||i(d,b)?(a.css(d),a.addClass("slds-nubbin_right"),!0):!1},m=function(a,b,c){var d={top:b.tT-b.eH/2+b.tH/2,left:b.tL+b.tW,"margin-left":"1.25rem"};return c||i(d,b)?(a.css(d),a.addClass("slds-nubbin_left"),!0):!1},n=function(a,b){var c={},d=[];return b.tL+b.tW>b.cW-g?(c.left=b.tL-b.eW+b.tW/2,c["margin-left"]="-1.25rem",d.push("right")):b.tL<g?(c.left=b.tL+b.tW/2,c["margin-left"]="1.25rem",d.push("left")):c.left=b.tL,b.tT+b.eH>b.cH-g?(c.top=b.tT-b.eH+b.tH/2,c["margin-top"]="1.25rem",d.push("bottom")):b.tT-b.eH<g?(c.top=b.tT+b.tH/2,c["margin-top"]="-2.5rem",d.push("top")):c.top=b.tT,a.css(c),d.length>0&&a.addClass("slds-nubbin_"+d.join("-")),!0},o=function(a,b,c,d){var e,f={},g=b.offset(),i=b.position(),o=[];if(a){switch(e=a.offset(),f.tL=e.left-g.left+i.left,f.tT=e.top-g.top+i.top,f.tH=a.height(),f.tW=a.width(),f.eH=c.outerHeight(),f.eW=c.outerWidth(),f.cH=b.height(),f.cW=b.width(),d){case h.RIGHT:o=[m,j,l,k];break;case h.BOTTOM:o=[j,l,k,m];break;case h.LEFT:o=[l,k,m,j];break;case h.TOP:default:o=[k,m,j,l]}o.push(n);for(var p=0;p<o.length&&!o[p](c,f);p++);}};return{restrict:"A",link:function(e,g,h){var i,j=e.$eval(h.skedPopover),k=h.skedPopoverTemplate,l=h.skedPopoverContent,m=h.skedPopoverPosition,n=h.skedPopoverTheme,p=g.parents(h.skedPopoverContainer||"[ng-app]"),q=(a.element(d),!1),r=function(d){var h,j=function(){h&&(i=a.element('<div class="slds-popover"></div>'),i.append(h),i.css({position:"absolute",width:"auto","z-index":90003,top:0,left:0,visibility:"hidden"}),n&&i.addClass("slds-popover_"+n),i.appendTo(p),i.hover(s),f(function(){q?(o(g,p,i,m),i.css("visibility","")):s()}))};q=!0,i||(k?b(k).then(function(a){h=c(a)(e),j()}):l&&(h=c(['<div class="slds-popover__body slds-p-around_small slds-text-body_small">{{',l,"}}</div>"].join(""))(e),e.$apply(function(){j()})))},s=function(){q=!1,i&&(i.remove(),i=null)};j&&(g.hover(r,s),g.on("$destroy",s))}}}])}(angular,jQuery),function(a){a.module("arcApp",["ngSanitize","skedApp.core","skedApp.shared","arcApp.model","ui.date","uiGmapgoogle-maps"]).constant("JOB_TYPE",{FULL_SERVICE:"Full Service",CEP:"Nurse Assistant Testing",NAT:"Nurse Assistant Training",FULL_SERVICE_CEP:"Nurse Assistant Testing - Full Service",FULL_SERVICE_NAT:"Nurse Assistant Training - Full Service",COMMUNITY:"Community"}).constant("JOB_STATUS",{QUEUED:"Queued",PENDING_ALLOCATION:"Pending Allocation",PENDING_DISPATCH:"Pending Dispatch",DISPATCHED:"Dispatched",READY:"Ready",EN_ROUTE:"En Route",ON_SITE:"On Site",IN_PROGRESS:"In Progress",COMPLETE:"Complete",CANCELLED:"Cancelled"}).config(["$locationProvider","uiGmapGoogleMapApiProvider",function(a,b){a.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1}),b.configure({key:"AIzaSyDU3eov_1jKLgx3qBOGm1GxrYGSrHuvVvo",v:"3.29",libraries:"geometry,places"})}])}(angular),function(a,b){a.module("arcApp.model",["skedApp.shared"]).factory("model",["dateUtil",function(b){function c(a,b){this.id=a||null,this.label=b||"",this.name=b||"",this.selected=!1}function d(a){this.jobStatus=a,this.backgroundColor=null,this.textColor=null}function e(a){this.classType=a,this.backgroundColor=null,this.textColor=null}function f(a,b){this.id=a||null,this.name=b||""}function g(a){this.id=a||null,this.firstName="",this.lastName="",this.email="",this.phone=""}function h(a,b){this.id=a||null,this.name=b||""}function i(a,b){this.id=a||null,this.name=b||"",this.breakDuration=0,this.classDuration=0,this.neededSkills=[],this.numberOfBreaks=0,this.numberOfClasses=0,this.numberOfInstructors=0,this.numberOfStudents=0,this.ratioToInstructor="",this.masterClassName="",this.subclassesSettings=[]}function j(a){this.id=a||null,this.name="",this.account=null,this.contact=null,this.region=null,this.specialInstructions="",this.address=null,this.equipments=[]}function k(){this.gridStartTime=0,this.gridEndTime=0,this.timezone=""}function l(){this.courseCode="",this.displayOrder=0,this.duration=0}function m(){this.gridSettings=null,this.avEquipments=[],this.courseCatalogs=[],this.rootRecord=null,this.tags=[],this.noOfSubcontractors=0,this.regions=[],this.jobStatusSettings=[],this.facilities=[],this.courseTemplates=null,this.mapHolidays=null,this.userPermission=null,this.classTypes=[],this.employmentTypes=[],this.communityClassSubTypes=[],this.natClassSetting=null,this.natClassTypeSettings=[],this.jobTypes=[]}function n(){this.canCancel=!1,this.canClone=!1,this.canCreate=!1,this.canDelete=!1,this.canEdit=!1}function o(){this.breakTime=0,this.durationToHave2ndClass=0,this.durationToHaveBreak=0}function p(){this.noOfSubcontractors=0,this.timezone=null,this.mapSlots=[]}function q(){this.radius=0,this.interval=0,this.subcontractor=!1,this.show24Hours=!1,this.scheduledHours=[],this.employmentTypes=[]}function r(a,b){this.slotDate=a||"",this.slotTime=b||0,this.interval=0,this.noOfQualifiedResources=0,this.noOfAvailableResources=0,this.isDisabled=!1,this.availableResourceIds=[],this.unavailableResourceIds=[],this.isResourcesConflict=!1}function s(a){this.fullAddress=a,this.placeId=null,this.longitude=null,this.latitude=null,this.address1=null,this.address2=null,this.city=null,this.state=null,this.zip=null,this.territory=null}function t(a){this.id=a||null,this.name=null,this.phone=null,this.email=null}function u(a){this.id=a||null,this.name=null,this.attendees=[],this.isChanged=!1,this.isDeleted=!1}function v(a){this.success=a||!1,this.message=null}function w(a){this.id=a||null,this.name=null,this.course=null,this.account=null,this.contact=null,this.neededSkills=[],this.address=null,this.timeSlots=[],this.numberOfBreaks=0,this.numberOfClasses=0,this.numberOfInstructors=0,this.numberOfStudents=0,this.breakDuration=0,this.classDuration=0,this.isTest=!1,this.avEquipments=[],this.specialInstructions="",this.isRecurring=!1,this.every=0,this.weekdays=[],this.skipWeekends=!1,this.skipHolidays=!1,this.offerings=[],this.jobStatus=null,this.jobType=null,this.jobDate=null,this.startTime=null,this.finishTime=null,this.copyResult=null,this.scheduleId=null,this.region=null,this.facility=null,this.isQueued=!1,this.className=null,this.classType=null,this.locationConfirmed=!1,this.readyToPublish=!1,this.noOfEvaluators=0,this.hasAllocation=!1,this.natCourse=null,this.classSetupTime=0,this.classPackdownTime=0,this.allocations=[],this.gridSettings=null,this.teamLeadResourceId=null,this.communityClassSubType=null,this.scheduledJobs=[],this.isPreviouslyCancelled=!1,this.numberOfRemainingResources=0,this.isStackedClass=!1,this.parentId=null,this.subclasses=[],this.courseCode=null,this.displayOrder=0}function x(a){this.id=a||null,this.facilityId=null,this.name=null,this.startTime=null,this.finishTime=null,this.duration=0,this.availableResourceIds=[],this.assignResourceIds=[],this.jobDate=null,this.numberOfInstructors=0,this.teamLeadResourceId=null,this.jobStatus=null,this.noOfEvaluators=0,this.locationConfirmed=!1,this.readyToPublish=!1,this.facilityName="",this.classType=null,this.classTypeName=null,this.possibleAllocations=[],this.allocations=[],this.address=null,this.jobType=null}function y(a){this.id=a||null,this.name="",this.category="",this.photoUrl="",this.tags=[],this.employmentType="",this.rating=0,this.currentLocation=null,this.firstJobAllocation=null,this.noOfAvailableClasses=0,this.region=null,this.weeklyHours=0,this.assignedHours=0,this.weeklyMinutes=0,this.assignedMinutes=0,this.scheduledHoursData=[],this.isSubcontractor=!1,this.inactiveFrom=null}function z(a){this.id=a||null,this.startFromLocation=null,this.distance=0,this.travelTimeFrom=0,this.isAvailable=!1,this.isQualified=!1,this.noOfAvailableClasses=0,this.status=null,this.resource=null}function A(){this.weekdays=[],this.resources=[],this.jobs=[],this.numberOfInstructors=0,this.numberOfStudents=0,this.numberOfClasses=0,this.address=null,this.courseCatalogName=null,this.classStartTime=null,this.classStartDateIso=null,this.classDuration=0,this.jobType=null,this.className=null,this.noOfEvaluators=0,this.startMonth=null,this.courseClassDays=null}function B(a){this.assignedMinutes=0,this.startDate=null,this.endDate=null}function C(a){this.id=a||null,this.name="",this.facilityId="",this.address=null,this.notes="",this.jobs=[],this.regionId=null}function D(a){this.id=a||null,this.courseName=null,this.course=null,this.neededSkills=[],this.startMonth=null,this.specialInstructions="",this.region=null,this.numberOfStudents=0,this.maximumHoursPerDay=0,this.selectedDates=[],this.courseTemplate,this.classSetupTime=0,this.classPackdownTime=0,this.jobs=[],this.status=null,this.scheduleId=null,this.classPattern=null,this.skipHolidays=!1,this.jobType=null}function E(a){this.id=a||null,this.name="",this.jobs=[],this.course=null,this.status=null,this.firstJob=null,this.lastJob=null}function F(a){this.id=a||null,this.course=null,this.name="",this.courseClassDays="",this.courseClassTypes=[],this.maxHoursPerDay=0,this.isDefaultTemplate=!1}function G(a,b){this.id=a||null,this.name=b||"",this.jobStatus="",this.jobDate=null,this.startTime=0,this.finishTime=0,this.allocations=[],this.assignedResources=[]}function H(a){this.id=a||null,this.name="",this.displayOrder=0,this.facility=null,this.numberOfInstructors=0,this.startTime=0,this.endTime=0,this.totalHours=0,this.ratioToInstructor=0;
}var I=function(b,c,d){var e=[];return a.isArray(b)&&b.length>0&&(e=b.map(function(e){return a.isString(c)&&a.isObject(e)||a.isNumber(c)&&a.isArray(e)?a.isFunction(e[c])?e[c].apply(e,d):e[c]||null:a.isFunction(c)?c(e,b)||null:e})),e};return c.fromServer=function(a){var b=null;return a&&(b=new c(a.id),b.label=a.label||a.name,b.name=a.name||a.label,b.selected=a.selected||!1),b},c.fromServerList=function(a){return I(a,c.fromServer)},d.fromServer=function(a){var b=null;return a&&a.jobStatus&&(b=new d(a.jobStatus),b.backgroundColor=a.backgroundColor,b.textColor=a.textColor),b},d.fromServerList=function(a){return I(a,d.fromServer)},e.fromServer=function(a){var b=null;return a&&a.classType&&(b=new e(a.classType),b.backgroundColor=a.backgroundColor,b.textColor=a.textColor),b},e.fromServerList=function(a){return I(a,e.fromServer)},f.fromServer=function(a){var b=null;return a&&(b=new f(a.id,a.name)),b},g.fromServer=function(a){var b=null;return a&&(b=new g(a.id),b.firstName=a.firstName,b.lastName=a.lastName,b.email=a.email,b.phone=a.phone),b},g.fromServerList=function(a){return I(a,g.fromServer)},g.prototype.toServer=function(){var a={firstName:this.firstName,lastName:this.lastName,email:this.email,phone:this.phone};return a},h.fromServer=function(a){var b=null;return a&&(b=new h(a.id,a.name)),b},h.fromServerList=function(a){return I(a,h.fromServer)},i.fromServer=function(a){var b=null;return a&&(b=new i(a.id),b.name=a.name||"",b.breakDuration=a.breakDuration||0,b.classDuration=a.classDuration||0,b.neededSkills=c.fromServerList(a.neededSkills),b.numberOfBreaks=a.numberOfBreaks||0,b.numberOfClasses=a.numberOfClasses||0,b.numberOfInstructors=a.numberOfInstructors||0,b.numberOfStudents=a.numberOfStudents||0,b.ratioToInstructor=a.ratioToInstructor||"",b.masterClassName=a.masterClassName,b.subclassesSettings=l.fromServerList(a.subclassSettings)),b},i.fromServerList=function(a){return I(a,i.fromServer)},j.fromServer=function(a){var b=null;return a&&(b=new j(a.id),b.name=a.name||"",b.account=a.accountId?new f(a.accountId,a.accountName):null,b.contact=g.fromServer(a.contact),b.region=a.regionId?new h(a.regionId,a.regionName):null,b.specialInstructions=a.specialInstructions,b.equipments=c.fromServerList(a.equipments),b.address=a.address?new s(a.address):null),b},k.fromServer=function(a){var b=null;return a&&(b=new k,b.gridStartTime=a.gridStartTime,b.gridEndTime=a.gridEndTime,b.timezone=a.timezone),b},l.fromServer=function(a){var b=null;return a&&(b=new l,b.courseCode=a.courseCode,b.displayOrder=a.displayOrder||0,b.duration=a.duration||0),b},l.fromServerList=function(a){return I(a,l.fromServer)},m.fromServer=function(b){var f=null;return b&&(f=new m,f.gridSettings=k.fromServer(b.gridSettings),f.avEquipments=c.fromServerList(b.avEquipments),f.courseCatalogs=i.fromServerList(b.courseCatalogs),f.rootRecord=j.fromServer(b.rootRecord),f.tags=c.fromServerList(b.tags),f.noOfSubcontractors=b.noOfSubcontractors||0,f.regions=c.fromServerList(b.regions),f.jobStatusSettings=d.fromServerList(b.jobStatusSettings),f.facilities=C.fromServerList(b.locations),f.classTypes=c.fromServerList(b.classTypes),f.employmentTypes=c.fromServerList(b.employmentTypes),f.courseTemplates=F.fromServerList(b.courseTemplates),b.natClassSetting&&b.natClassSetting.classTypeSettings&&(f.natClassTypeSettings=e.fromServerList(b.natClassSetting.classTypeSettings)),b.mapHolidays&&(f.mapHolidays={},a.forEach(b.mapHolidays,function(a,b){f.mapHolidays[b]=c.fromServerList(a)})),f.userPermission=n.fromServer(b.userPermission),f.communityClassSubTypes=c.fromServerList(b.communityClassSubTypes),f.natClassSetting=o.fromServer(b.natClassSetting),f.jobTypes=c.fromServerList(b.jobTypes)),f},n.fromServer=function(a){var b=new n;return a&&(b.canCancel=a.canCancel||!1,b.canClone=a.canClone||!1,b.canCreate=a.canCreate||!1,b.canDelete=a.canDelete||!1,b.canEdit=a.canEdit||!1),b},o.fromServer=function(a){var b=new o;return a&&(b.breakTime=a.breakTime||0,b.durationToHave2ndClass=a.durationToHave2ndClass||0,b.durationToHaveBreak=a.durationToHaveBreak||0),b},p.fromServer=function(a){var b=null;return a&&(b=new p,b.noOfSubcontractors=a.noOfSubcontractors||0,b.timezone=a.timezone,b.timeslots=r.fromServerList(a.slots)),b},q.fromServer=function(a){var b=null;return a&&(b=new q,b.radius=a.radius||0,b.interval=a.interval||0,b.subcontractor=a.subcontractor||!1,b.show24Hours=a.show24Hours||!1,b.scheduledHours=a.scheduledHours||[],b.employmentTypes=a.employmentTypes||[]),b},q.prototype.toServer=function(){var a={radius:this.radius,interval:this.interval,subcontractor:this.subcontractor||!1,show24Hours:this.show24Hours||!1,scheduledHours:this.scheduledHours,employmentTypes:this.employmentTypes};return a},r.fromServer=function(a){var b=null;return a&&(b=new r(a.slotDate,a.slotTime),b.noOfQualifiedResources=a.noOfQualifiedResources||0,b.noOfAvailableResources=a.noOfAvailableResources||0,b.isDisabled=a.isDisabled||!1,b.availableResourceIds=a.availableResourceIds||[],b.unavailableResourceIds=a.unavailableResourceIds||[]),b},r.fromServerList=function(a){return I(a,r.fromServer)},s.fromServer=function(a){var b=null;return a&&(b=new s(a.fullAddress||a.address),b.placeId=null,b.latitude=a.lat,b.longitude=a.lng,b.address1=a.address1,b.address2=a.address2,b.city=a.city,b.state=a.state,b.zip=a.zip,b.territory=a.territory),b},s.fromGGServer=function(b){var c,d,e=null;return b&&(e=new s(b.formatted_address),e.placeId=b.place_id,e.latitude=b.geometry.location.lat,e.longitude=b.geometry.location.lng,a.isArray(b.address_components)&&a.forEach(b.address_components,function(a){a.types.indexOf("locality")>-1?e.city=a.long_name:a.types.indexOf("postal_code")>-1?e.zip=a.long_name:a.types.indexOf("administrative_area_level_1")>-1?e.state=a.long_name:a.types.indexOf("street_address")>-1?e.address1=a.long_name:a.types.indexOf("street_number")>-1?c=a.long_name:a.types.indexOf("route")>-1&&(d=a.long_name)}),!e.address1&&c&&(e.address1=(c||"")+" "+(d||""))),e},s.fromServerList=function(a){return I(a,s.fromServer)},s.fromGGServerList=function(a){return I(a,s.fromGGServer)},s.prototype.toServer=function(){var a={fullAddress:this.fullAddress,lat:this.latitude,lng:this.longitude,address1:this.address1,address2:this.address2,city:this.city,state:this.state,zip:this.zip,territory:this.territory};return a},t.fromServer=function(a){var b;return a&&(b=new t(a.id),b.name=a.name,b.phone=a.phone,b.email=a.email),b},t.fromServerList=function(a){return I(a,t.fromServer)},u.fromServer=function(a){var b;return a&&(b=new u(a.id),b.name=a.name,b.attendees=t.fromServerList(a.attendees)),b},u.fromServerList=function(a){return I(a,u.fromServer)},u.prototype.toServer=function(){var a={id:this.id,name:this.name,isChanged:this.isChanged||!1,isDeleted:this.isDeleted||!1};return a},v.fromServer=function(a){var b=new v(!1);return a&&(b.success=a.success||!1,b.message=a.message),b},w.fromServer=function(a){var d=null;return a&&(d=new w(a.id),d.name=a.name,a.courseCatalog?d.course=i.fromServer(a.courseCatalog):a.courseCatalogId&&(d.course=new i(a.courseCatalogId,a.courseCatalogName)),d.account=f.fromServer(a.account),d.contact=g.fromServer(a.contact),d.neededSkills=c.fromServerList(a.tags),d.address=s.fromServer(a),d.numberOfBreaks=a.numberOfBreaks||0,d.numberOfClasses=a.numberOfClasses||0,d.numberOfInstructors=a.numberOfInstructors||0,d.numberOfStudents=a.numberOfStudents||0,d.breakDuration=a.breakDuration||0,d.classDuration=a.classDuration||a.duration||0,d.isTest=a.isTest||!1,d.avEquipments=c.fromServerList(a.avEquipments),d.specialInstructions=a.specialInstructions,d.isRecurring=a.isRecurring||!1,d.every=a.every||0,d.weekdays=a.weekdays||[],d.skipWeekends=a.skipWeekends||!1,d.skipHolidays=a.skipHolidays||!1,d.offerings=u.fromServerList(a.offerings),d.jobStatus=a.jobStatus,d.jobType=a.jobType,d.jobDate=a.jobDate?b.parseDateString(a.jobDate):null,d.startTime=a.startTime,d.finishTime=a.finishTime,d.copyResult=v.fromServer(a.copyResult),d.scheduleId=a.scheduleId,d.region=h.fromServer(a.region),d.facility=a.facilityId?new C(a.facilityId):null,d.isQueued=a.isQueued||!1,d.className=a.className,d.classType=a.classType,d.locationConfirmed=a.locationConfirmed||!1,d.readyToPublish=a.readyToPublish||!1,d.noOfEvaluators=a.numberOfEvaluators||0,d.hasAllocation=a.hasAllocation||!1,d.classSetupTime=a.beforeClassDuration||0,d.classPackdownTime=a.afterClassDuration||0,d.allocations=z.fromServerList(a.allocations),d.teamLeadResourceId=a.teamLeadResourceId,d.communityClassSubType=a.communityClassSubType&&a.communityClassSubType.length>0?c.fromServer({id:a.communityClassSubType}):null,d.isPreviouslyCancelled=!!a.isPreviouslyCancelled,d.numberOfRemainingResources=a.numberOfRemainingResources||0,d.isStackedClass=!!a.isStackedClass,d.parentId=a.parentId,d.subclasses=w.fromServerList(a.subclasses),d.courseCode=a.courseCode,d.displayOrder=a.displayOrder),d},w.fromServerFullServiceJob=function(b){var d=null;return b&&(d=new w(b.id),d.region=b.regionId?new h(b.regionId):null,d.course=b.courseCatalogId?new i(b.courseCatalogId,b.courseCatalogName):null,d.name=b.name,d.address=s.fromServer(b.address),d.breakDuration=b.breakDuration||0,d.classDuration=b.classDuration||0,d.contact=b.contactId?new g(b.contactId):null,d.every=b.every||0,d.isRecurring=b.isRecurring||!1,d.numberOfBreaks=b.numberOfBreaks||0,d.numberOfClasses=b.numberOfClasses||0,d.numberOfInstructors=b.numberOfInstructors||0,d.numberOfStudents=b.numberOfStudents||0,d.avEquipments=a.isArray(b.selectedAvEquipments)?b.selectedAvEquipments.map(function(a){return new c(a)}):[],d.selectedDate=b.selectedDate,d.selectedTime=b.selectedTime,d.skipHolidays=b.skipHolidays||!1,d.specialInstructions=b.specialInstructions,d.neededSkills=a.isArray(b.tagIds)?b.tagIds.map(function(a){return new c(a)}):[],d.isTest=b.test||!1,d.weekdays=b.weekdays||[],d.classSetupTime=b.beforeClassDuration||0,d.classPackdownTime=b.afterClassDuration||0,d.gridSettings=q.fromServer(b.gridSettings),d.scheduledJobs=x.fromServerList(b.scheduledJobs)),d},w.fromServerList=function(a){return I(a,w.fromServer)},w.prototype.toFullServiceJob=function(){var b={contactId:this.contact?this.contact.id:null,courseCatalogId:this.course?this.course.id:null,selectedAvEquipments:a.isArray(this.avEquipments)?this.avEquipments.map(function(a){return a.id}):[],numberOfStudents:this.numberOfStudents||0,numberOfClasses:this.numberOfClasses||0,classDuration:this.classDuration||0,tagIds:a.isArray(this.neededSkills)?this.neededSkills.map(function(a){return a.id}):[],numberOfInstructors:this.numberOfInstructors||0,breakDuration:this.breakDuration||0,numberOfBreaks:this.numberOfBreaks||0,test:this.isTest||!1,specialInstructions:this.specialInstructions||"",regionId:this.region?this.region.id:null,address:this.address?this.address.toServer():null,beforeClassDuration:this.classSetupTime||0,afterClassDuration:this.classPackdownTime||0,gridSettings:this.gridSettings?this.gridSettings.toServer():null};return b},w.prototype.toCommunityJob=function(){var c={id:this.id,courseCatalogId:this.course?this.course.id:null,regionId:this.region?this.region.id:null,facilityId:this.facility?this.facility.id:null,selectedDate:b.dateToString(this.jobDate),startTime:this.startTime,finishTime:this.finishTime,numberOfClasses:this.numberOfClasses||0,classDuration:this.classDuration||0,tagIds:a.isArray(this.neededSkills)?this.neededSkills.map(function(a){return a.id}):[],numberOfInstructors:this.numberOfInstructors||0,numberOfStudents:this.numberOfStudents||0,breakDuration:this.breakDuration||0,numberOfBreaks:this.numberOfBreaks||0,specialInstructions:this.specialInstructions||"",isRecurring:!!this.isRecurring,every:this.every||0,weekdays:a.isArray(this.weekdays)?this.weekdays.map(function(a){return a.value}):[],skipHolidays:!!this.skipHolidays,offerings:a.isArray(this.offerings)?this.offerings.map(function(a){return a.toServer()}):[],locationConfirmed:!!this.locationConfirmed,beforeClassDuration:this.classSetupTime||0,afterClassDuration:this.classPackdownTime||0,communityClassSubType:this.communityClassSubType?this.communityClassSubType.id:null,isStackedClass:this.isStackedClass,courseCode:this.isStackedClass&&this.course&&this.course.masterClassName?this.course.masterClassName:null,subclasses:a.isArray(this.subclasses)?this.subclasses.map(function(a){return a.toCommunitySubclass()}):[]};return c},w.prototype.toCommunitySubclass=function(){var a={id:this.id,displayOrder:this.displayOrder,parentId:this.parentId,courseCode:this.courseCode,startTime:this.startTime,duration:this.classDuration};return a},w.prototype.toCepJob=function(){var c={id:this.id,regionId:this.region?this.region.id:null,facilityId:this.facility?this.facility.id:null,selectedDate:b.dateToString(this.jobDate),startTime:this.startTime,finishTime:this.finishTime,tagIds:a.isArray(this.neededSkills)?this.neededSkills.map(function(a){return a.id}):[],specialInstructions:this.specialInstructions||"",className:this.className||"",numberOfEvaluators:this.noOfEvaluators||0,beforeClassDuration:this.classSetupTime||0,afterClassDuration:this.classPackdownTime||0,readyToPublish:!!this.readyToPublish,isRecurring:!!this.isRecurring,every:this.every||0,weekdays:a.isArray(this.weekdays)?this.weekdays.map(function(a){return a.value}):[],skipHolidays:!!this.skipHolidays,numberOfClasses:this.numberOfClasses||0,jobType:this.jobType,isStackedClass:this.isStackedClass,courseCode:this.isStackedClass&&this.course&&this.course.masterClassName?this.course.masterClassName:null,subclasses:a.isArray(this.subclasses)?this.subclasses.map(function(a){return a.toCepSubclass()}):[],courseCatalogId:this.course?this.course.id:null};return c},w.prototype.toCepSubclass=function(){var a={id:this.id,displayOrder:this.displayOrder,parentId:this.parentId,courseCode:this.courseCode,startTime:this.startTime,finishTime:this.finishTime};return a},w.prototype.toNatJob=function(){var c={id:this.id,courseId:this.natCourse?this.natCourse.id:null,courseCatalogId:this.course?this.course.id:null,regionId:this.region?this.region.id:null,facilityId:this.facility?this.facility.id:null,selectedDate:b.dateToString(this.jobDate),startTime:this.startTime,finishTime:this.finishTime,tagIds:a.isArray(this.neededSkills)?this.neededSkills.map(function(a){return a.id}):[],specialInstructions:this.specialInstructions||"",numberOfInstructors:this.numberOfInstructors||0,beforeClassDuration:this.classSetupTime||0,afterClassDuration:this.classPackdownTime||0,classType:a.isString(this.classType)?this.classType:a.isObject(this.classType)?this.classType.id:null,numberOfStudents:this.numberOfStudents||0,jobType:this.jobType};return c},w.prototype.toBriefNatJob=function(){var c={id:this.id,courseCatalogId:this.course?this.course.id:null,facilityId:this.facility?this.facility.id:null,jobDate:b.dateToString(this.jobDate),startTime:this.startTime,finishTime:this.finishTime,numberOfInstructors:this.numberOfInstructors||0,classType:a.isString(this.classType)?this.classType:a.isObject(this.classType)?this.classType.id:null,numberOfStudents:this.numberOfStudents||0,jobStatus:this.jobStatus,jobType:this.jobType};return c},x.fromServer=function(c){var d,e=null;return c&&(e=new x(c.id),e.facilityId=c.facilityId,e.name=c.name,e.jobDate=b.parseDateString(c.jobDate),e.startTime=c.startTime||0,e.finishTime=c.finishTime||0,e.duration=c.duration||0,e.numberOfInstructors=c.numberOfInstructors||0,e.teamLeadResourceId=c.teamLeadResourceId,e.jobStatus=c.jobStatus,e.noOfEvaluators=c.numberOfEvaluators||0,e.locationConfirmed=c.locationConfirmed||!1,e.readyToPublish=c.readyToPublish||!1,e.classType=c.classType,e.classTypeName=c.classTypeName,e.facilityName=c.facilityName,e.address=s.fromServer(c),a.isArray(c.allocations)?(e.assignResourceIds=[],a.forEach(c.allocations,function(a){for(var b=a.numberOfResources||1,c=0;b>c;c++)e.assignResourceIds.push(a.resourceId)})):e.assignResourceIds=c.assignResourceIds||[],a.isArray(c.possibleAllocations)?e.availableResourceIds=c.possibleAllocations.map(function(a){return a.resourceId}):e.availableResourceIds=c.availableResourceIds||[],e.allocations=c.allocations||[],e.possibleAllocations=c.possibleAllocations||[],e.originalAllocationMap={},d=a.copy(e.allocations),a.forEach(d,function(a){e.originalAllocationMap[a.resourceId]=a}),e.possibleAllocationMap={},a.forEach(e.possibleAllocations,function(a){e.possibleAllocationMap[a.resourceId]=a}),e.jobType=c.jobType),e},x.fromServerList=function(a){return I(a,x.fromServer)},y.fromServer=function(a){var d=null;return a&&(d=new y(a.id),d.name=a.name,d.category=a.category,d.photoUrl=a.photoUrl,d.tags=c.fromServerList(a.tags),d.employmentType=a.employmentType||"",d.rating=a.rating,d.currentLocation=s.fromServer(a.currentLocation),d.noOfAvailableClasses=a.noOfAvailableClasses,d.firstJobAllocation=z.fromServer(a.firstJobAllocation),d.region=a.regionId?new h(a.regionId,a.regionName):null,d.weeklyHours=a.weeklyHours||0,d.assignedHours=a.assignedHours||0,d.weeklyMinutes=a.weeklyMinutes||0,d.assignedMinutes=a.assignedMinutes||0,d.scheduledHoursData=B.fromServerList(a.scheduledHoursData),d.isSubcontractor="subcontractor"===d.employmentType.toLowerCase(),d.inactiveFrom=b.parseDateString(a.inactiveFrom)),d},y.fromServerList=function(a){return I(a,y.fromServer)},z.fromServer=function(a){var b=null;return a&&(b=new z(a.id),b.startFromLocation=s.fromServer(a.startFromLocation),b.distance=a.distance,b.travelTimeFrom=a.travelTimeFrom,b.isAvailable=a.isAvailable||!1,b.isQualified=a.isQualified||!1,b.noOfAvailableClasses=a.noOfAvailableClasses||0,b.status=a.status,b.resource=y.fromServer(a.resource)),b},z.fromServerList=function(a){return I(a,z.fromServer)},A.fromServer=function(a){var b=null;return a&&(b=new A,b.weekdays=a.weekdays||[],b.resources=y.fromServerList(a.resources),b.jobs=x.fromServerList(a.jobs),b.numberOfInstructors=a.numberOfInstructors||0,b.numberOfStudents=a.numberOfStudents||0,b.numberOfClasses=a.numberOfClasses||0,b.address=s.fromServer(a),b.courseCatalogName=a.courseCatalogName,b.classStartTime=a.classStartTime,b.classStartDateIso=a.classStartDateIso,b.classDuration=a.classDuration||0,b.jobType=a.jobType,b.className=a.className,b.noOfEvaluators=a.numberOfEvaluators||0,b.startMonth=a.startMonth,b.courseClassDays=a.courseClassDays),b},B.fromServer=function(a){var c=null;return a&&(c=new B,c.assignedMinutes=a.assignedMinutes||0,c.startDate=b.parseDateString(a.startDate),c.endDate=b.parseDateString(a.endDate)),c},B.fromServerList=function(a){return I(a,B.fromServer)},C.fromServer=function(a){var b=null;return a&&(b=new C(a.id),b.name=a.name,b.facilityId=a.facilityID,b.address=s.fromServer(a),b.notes=a.notes,b.jobs=w.fromServerList(a.jobs),b.regionId=a.regionId),b},C.fromServerList=function(a){return I(a,C.fromServer)},D.fromServer=function(a){var c=null;return a&&(c=new D(a.id),c.name=a.name,c.jobs=w.fromServerList(a.jobs),c.maximumHoursPerDay=a.maxHoursPerDay||0,c.startMonth=b.parseDateString(a.startMonth),c.status=a.status||null,c.region=a.regionId?new h(a.regionId):null,c.scheduleId=a.scheduleId,c.classPattern=a.classPattern,c.skipHolidays=a.skipHolidays||!1,a.courseCatalog?c.course=i.fromServer(a.courseCatalog):a.courseCatalogId&&(c.course=new i(a.courseCatalogId,a.courseCatalogName))),c},D.prototype.toServer=function(){var c={name:this.courseName,courseCatalogId:this.course?this.course.id:null,regionId:this.region?this.region.id:null,selectedDates:a.isArray(this.selectedDates)?this.selectedDates.map(function(a){return b.dateToString(a)}):[],tagIds:a.isArray(this.neededSkills)?this.neededSkills.map(function(a){return a.id}):[],specialInstructions:this.specialInstructions||"",numberOfStudents:this.numberOfStudents||0,startMonth:b.dateToString(this.startMonth),maxHoursPerDay:this.maximumHoursPerDay||0,courseTemplate:this.courseTemplate?this.courseTemplate.toServer():null,beforeClassDuration:this.classSetupTime||0,afterClassDuration:this.classPackdownTime||0,classPattern:this.classPattern||null,skipHolidays:this.skipHolidays||!1,jobType:this.jobType};return c},D.prototype.toServerWithJobs=function(){var c={id:this.id||null,regionId:this.region?this.region.id:null,name:this.name,courseCatalogId:this.course?this.course.id:null,startMonth:b.dateToString(this.startMonth),maxHoursPerDay:this.maximumHoursPerDay||0,scheduleId:this.scheduleId,jobs:a.isArray(this.jobs)?this.jobs.map(function(a){return a.toBriefNatJob()}):[]};return c},E.fromServer=function(a){var b=null;return a&&(b=new E(a.id),b.name=a.name,b.jobs=w.fromServerList(a.jobs),b.status=a.status||null,b.firstJob=w.fromServer(a.firstJob),b.lastJob=w.fromServer(a.lastJob),a.courseCatalog?b.course=i.fromServer(a.courseCatalog):a.courseCatalogId&&(b.course=new i(a.courseCatalogId,a.courseCatalogName))),b},E.fromServerList=function(a){return I(a,E.fromServer)},F.fromServer=function(a){var b=null;return a&&(b=new F(a.id),b.name=a.name,b.courseClassTypes=H.fromServerList(a.courseClassTypes),b.courseClassDays=a.courseClassDays,b.maxHoursPerDay=a.maxHoursPerDay||0,b.isDefaultTemplate=a.isDefaultTemplate||!1,a.courseCatalog?b.course=i.fromServer(a.courseCatalog):a.courseCatalogId&&(b.course=new i(a.courseCatalogId,a.courseCatalogName))),b},F.fromServerList=function(a){return I(a,F.fromServer)},F.prototype.toServer=function(){var b={id:this.id,name:this.name,courseCatalogId:this.course?this.course.id:null,courseClassTypes:[]};return a.isArray(this.courseClassTypes)&&a.forEach(this.courseClassTypes,function(a){a.isDefault||b.courseClassTypes.push(a.toServer())}),b},G.fromServer=function(a){var c=null;return a&&(c=new G(a.id,a.name),c.jobStatus=a.jobStatus,c.jobDate=b.parseDateString(a.startDate),c.startTime=a.startTime||0,c.finishTime=a.finishTime||0,c.allocations=z.fromServerList(a.allocations)),c},G.fromServerList=function(a){return I(a,G.fromServer)},H.fromServer=function(a){var b=null;return a&&(b=new H(a.id),b.name=a.name,b.displayOrder=a.displayOrder,b.numberOfInstructors=a.numberOfInstructors,b.startTime=a.startTime,b.endTime=a.endTime,b.totalHours=a.totalHours,b.ratioToInstructor=a.ratioToInstructor,a.facility?b.facility=C.fromServer(a.facility):a.facilityId&&(b.facility=new C(a.facilityId))),b},H.fromServerList=function(a){return I(a,H.fromServer)},H.prototype.toServer=function(){var a={id:this.id,name:this.name,displayOrder:this.displayOrder||0,facilityId:this.facility?this.facility.id:null,numberOfInstructors:this.numberOfInstructors||0,startTime:this.startTime||0,endTime:this.endTime||0,totalHours:this.totalHours||0,canBeSameDay:this.canBeSameDay||!1};return a},{ConfigDataModel:m,JobModel:w,ContactModel:g,TimeSlotModel:r,AddressModel:s,JobAllocationModel:z,ScheduleAllocationModel:A,ResourceModel:y,ChildJobModel:x,FullServiceScheduledJobModel:G,FacilityModel:C,OfferingModel:u,PicklistItemModel:c,NATGroupModel:E,NATCourseModel:D,BookingGridDataModel:p,BookingGridSettingsModel:q}}])}(angular,jQuery),function(a,b,c){a.module("arcApp").component("fullServiceBookingGrid",{templateUrl:"src/app/full-service-booking-grid.tpl.html",bindings:{allowPostingMessage:"<"},controller:["JOB_STATUS","$scope","$timeout","$window","$location","$q","$filter","api","util","ggLocationApi","dateUtil","model","uiGmapGoogleMapApi",function(c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this,q=null,r=!1,s=1,t=i("skedSfUrl")("slds/images/avatar1.jpg"),u=i("skedSfUrl")("slds/images/avatar1.jpg"),v=30,w=50,x=30,y=30,z=1,A={CLOSE_MODAL:1,ALLOCATE_RESOURCE:2},B={timeslotWidth:4,timeslotHeight:2,slotSize:{w:7,h:2},intervals:[{value:15,label:"15 Minutes"},{value:30,label:"30 Minutes"},{value:60,label:"1 Hour"}],radiuses:[{value:50,label:"50 Miles"},{value:100,label:"100 Miles"},{value:200,label:"200 Miles"},{value:-1,label:"Anywhere"}],scheduledHours:[{minValue:80,maxValue:-1,label:"Red - 80%+"},{minValue:70,maxValue:79,label:"Yellow - 70%-79%"},{minValue:0,maxValue:69,label:"Green - 69% and Under",defaultSelected:!0}]},C=["FT","PT"],D={NON_WORKING:"non-working"},E=/^([0-9]*)$/,F=5e4,G=621371e-9,H={EVENT_DETAILS:{getLabel:function(){return"Event Details"},icon:"event",isInvalid:!1},SELECTED_SLOTS:{getLabel:function(){var a=this,b="";return a.isDisabled()||(b="("+(p.job.timeSlots.length||0)+"/"+(p.isMultiDays?p.job.numberOfClasses||0:s)+")"),"Selected Slots "+b},icon:"undeprecate",isHidden:function(){return!p.isNew},isDisabled:function(){return!p.calendar||!a.isArray(p.calendar.data)||0===p.calendar.data.length},isInvalid:!1},JOBS:{getLabel:function(){var a=this,b="";return a.isDisabled()||(b="("+(p.scheduledJobs.length||0)+")"),"Scheduled Jobs "+b},icon:"task",isHidden:function(){return p.isNew},isDisabled:function(){return!p.calendar||!a.isArray(p.calendar.data)||0===p.calendar.data.length},isInvalid:!1}},I=null,J=null,K=null,L={},M=g.search(),N={firstDay:0,showOtherMonths:!0,beforeShow:function(a,b){b.dpDiv.addClass("week-picker"),e(function(){b.dpDiv.find("tr:has(td.ui-datepicker-current-day) .ui-state-default").addClass("ui-state-co-active")},0)},onChangeMonthYear:function(a,b,c){e(function(){c.dpDiv.find("tr:has(td.ui-datepicker-current-day) .ui-state-default").addClass("ui-state-co-active")},0)},onClose:function(a,b){}},O={SUN:{label:"Sun",value:"sun"},MON:{label:"Mon",value:"mon"},TUE:{label:"Tue",value:"tue"},WED:{label:"Wed",value:"wed"},THU:{label:"Thu",value:"thu"},FRI:{label:"Fri",value:"fri"},SAT:{label:"Sat",value:"sat"}},P=i("filter"),Q=function(a){return 60*Math.floor(a/100)+Math.round(a%100)},R=function(a){return tsH=Math.floor(a/60),tsM=Math.round(a%60),100*tsH+tsM},S=function(a){return!k.compareValues(a,L)},T=function(){L={},p.calendar&&(p.calendar.data=[],p.job&&(p.job.timeSlots=[])),p.resourcesData=null},U=function(){p.calendar.date=m.addDay(p.calendar.date,-(7*z))},V=function(){p.calendar.date=m.addDay(p.calendar.date,7*z)},W=function(b){var c=a.element(b);c&&c.length>0&&e(function(){c[0].focus()},10)},X=function(a){return console.error(a),k.toastError("Can not perform action due to server error."),h.reject()},Y=function(){p.contentLoading=!0},Z=function(){p.contentLoading=!1},$=function(c,d){b&&b.postMessage&&b.postMessage(a.extend({message:c},d),p.searchParams.parentDomain)},_=function(a){p.isModalOpen=!1,$(a)},aa=function(a,b){k.showModal({templateUrl:"src/app/error-prompt-template.html",noBackdrop:!!b},{message:a,closePrompt:function(a){a.closeModal(),_("cancel")}})},ba=function(b){var c,d,e,f,g,h,i,j,k,l,m=[],n=-1,o=-1,q=p.configData?p.configData.gridSettings:null;if(p.show24Hours?(n=0,o=2400):q&&(n=q.gridStartTime,o=q.gridEndTime),a.isNumber(b)&&n>=0&&o>=0&&o>n)for(c=n;o>=c;c+=Math.round(100*b/60))e=Math.floor(c/100),f=Math.round(c%100*.6),d=c+Math.round(100*b/60),g=Math.floor(d/100),h=Math.round(d%100*.6),e>12?(i=""+(e-12),k=24===e?"AM":"PM"):(i=""+e,k=12===e?"PM":"AM"),j="00"+f,j=j.substr(j.length-2),l=0!==f,m.push({start:100*e+f,end:100*g+h,key:100*e+f+"",name:i+":"+j+" "+k,timePart:l});return m},ca=function(a){return a/6e4},da=function(a,b){var c,d,e,f=0;return a&&a.lat&&a.lng&&(d=new q.LatLng(a.lat,a.lng)),b&&b.lat&&b.lng&&(e=new q.LatLng(b.lat,b.lng)),d&&e&&(c=q.geometry.spherical.computeDistanceBetween(d,e),f=c/F*60),f},ea=function(a,b){var c,d,e=0;return a&&a.lat&&a.lng&&(c=new q.LatLng(a.lat,a.lng)),b&&b.lat&&b.lng&&(d=new q.LatLng(b.lat,b.lng)),c&&d&&(e=q.geometry.spherical.computeDistanceBetween(c,d),e*=G),e},fa=function(b,c,d){var e,f={isAvailable:!0,previousEvent:null,nextEvent:null,requiredTravelTimeTo:-1,requiredTravelTimeFrom:-1},g=m.dateToString(b),h=m.dateToString(c);if(a.isArray(d.allEvents)&&d.allEvents.length>0)for(var i=0;i<d.allEvents.length;i++){if(e=d.allEvents[i],b<e.endDateTime&&c>e.startDateTime){f.isAvailable=!1;break}e.endDate===g&&e.endDateTime<=b&&(!f.previousEvent||f.previousEvent.endDateTime<e.endDateTime)&&(f.previousEvent=e,f.requiredTravelTimeTo=ca(b-e.endDateTime)),e.startDate===h&&e.startDateTime>=c&&(!f.nextEvent||f.nextEvent.startDateTime>e.startDateTime)&&(f.nextEvent=e,f.requiredTravelTimeFrom=ca(e.startDateTime-c))}return f},ga=function(b,c){var d,e=!0;if(a.isArray(c)&&c.length>0)if(a.isArray(b.tags)&&0!==b.tags.length){d=b.tags.map(function(a){return a.id});for(var f=0;f<c.length;f++)if(-1===d.indexOf(c[f].id)){e=!1;break}}else e=!1;return e},ha=function(b,c,d){var e,f=!1;if(a.isArray(d.noneWorkingEvents)&&d.noneWorkingEvents.length>0)for(var g=0;g<d.noneWorkingEvents.length;g++)if(e=d.noneWorkingEvents[g],b<e.endDateTime&&c>e.startDateTime){f=!0;break}return f},ia=function(a,b,c){return a<c.endDateTime&&b>c.startDateTime},ja=function(b,c){var d,e,f=b.scheduledHoursMap;if(f.matchAny&&a.isArray(f.weeks)&&f.weeks.length>0){for(var g=0;g<f.weeks.length;g++)if(d=f.weeks[g],d.startDate<=c.date&&d.endDate>=c.date){e=d;break}if(e)return e.matched||!1}return!1},ka=function(b,c){var d=!1;return b&&(b.inactiveFrom=m.parseDateString(b.inactiveFrom),c=m.parseDateString(c),d=a.isDate(c)&&a.isDate(b.inactiveFrom)?b.inactiveFrom.getTime()>c.getTime():!0),d},la=function(b){var c=b.weeklyMinutes||0,d={matchAny:!1,weeks:[]};return c>0&&a.isArray(b.scheduledHoursData)&&b.scheduledHoursData.length>0&&a.isArray(p.calendar.scheduledHours)&&p.calendar.scheduledHours.length>0&&a.forEach(b.scheduledHoursData,function(a){for(var b,e={startDate:m.parseDateString(a.startDate),endDate:m.parseDateString(a.endDate),matched:!1},f=a.assignedMinutes,g=f/c*100,h=0;h<p.calendar.scheduledHours.length;h++)if(b=p.calendar.scheduledHours[h],g>=b.minValue&&(g<=b.maxValue||-1===b.maxValue)){e.matched=!0,d.matchAny=!0;break}d.weeks.push(e)}),d},ma=function(b,c,d){var e=[],f=m.getCurrentDateTimeByTimezone(d).getTime(),g=null,h=[],i=p.calendar.employmentTypes.map(function(a){return a.id});return p.calendar&&a.isArray(p.calendar.days)&&a.isArray(p.calendar.timeslots)&&(p.job&&p.job.address&&(g={lat:p.job.address.latitude,lng:p.job.address.longitude}),a.forEach(b,function(b){b&&-1!==i.indexOf(b.employmentType)&&(b.isQualified=ga(b,p.job.neededSkills),b.noneWorkingEvents=[],b.scheduledHoursMap=la(b),b.scheduledHoursMap.matchAny&&(a.isArray(b.allEvents)&&a.forEach(b.allEvents,function(a){a.startDateTime=m.parseDateTime(a.startDate,a.startTime).getTime(),a.endDateTime=m.parseDateTime(a.endDate,a.finishTime).getTime(),a.eventType===D.NON_WORKING&&b.noneWorkingEvents.push(a)}),h.push(b)))}),a.isArray(c)&&c.length>0&&a.forEach(c,function(b){var c=null;b.startDateTime=m.parseDateTime(b.startDate,b.startTime).getTime(),b.endDateTime=m.parseDateTime(b.endDate,b.finishTime).getTime(),b.lat&&b.lng&&(c={lat:b.lat,lng:b.lng}),b.availableResourceIds=[],a.isArray(b.tagIds)?b.tags=b.tagIds.map(function(a){return{id:a}}):b.tags=[],(c||-1===p.calendar.radius)&&a.forEach(h,function(a){var d,e=null;a&&ka(a,b.endDateTime)&&a.isQualified&&ga(a,b.tags)&&!ha(b.startDateTime,b.endDateTime,a)&&(d=fa(b.startDateTime,b.endDateTime,a),d.isAvailable&&(-1===p.calendar.radius?b.availableResourceIds.push(a.id):c&&(d.previousEvent&&d.previousEvent.geometry&&d.previousEvent.geometry.lat&&d.previousEvent.geometry.lng?e={lat:d.previousEvent.geometry.lat,lng:d.previousEvent.geometry.lng}:a.lat&&a.lng&&(e={lat:a.lat,lng:a.lng}),e&&ea(e,c)<=p.calendar.radius&&b.availableResourceIds.push(a.id))))})}),a.forEach(p.calendar.days,function(b){a.forEach(p.calendar.timeslots,function(d){var i,j,k,l,n,o={availableResourceIds:[],unavailableResourceIds:[],noOfAvailableResources:0,noOfQualifiedResources:0,slotDate:b.dateIso,slotTime:d.start,disabled:!1},q=m.parseDateTime(b.dateIso,d.start),r=a.copy(q);if(r.setMinutes(r.getMinutes()+(p.job.classDuration||0)),p.job.classSetupTime>0&&q.setMinutes(q.getMinutes()-p.job.classSetupTime),p.job.classPackdownTime>0&&r.setMinutes(r.getMinutes()+p.job.classPackdownTime),l=q.getTime(),n=r.getTime(),l>f){if(a.forEach(h,function(a){var c,d,e=0,f=0;a&&ja(a,b)&&(d=ka(a,b.date),a.isQualified&&(d?(c=fa(l,n,a),c.isAvailable?(c.previousEvent&&c.previousEvent.geometry&&c.previousEvent.geometry.lat&&c.previousEvent.geometry.lng?(e=da({lat:c.previousEvent.geometry.lat,lng:c.previousEvent.geometry.lng},g),e>=20&&(e+=30)):a.lat&&a.lng&&(e=da({lat:a.lat,lng:a.lng},g)),c.nextEvent&&c.nextEvent.geometry&&c.nextEvent.geometry.lat&&c.nextEvent.geometry.lng&&(f=da(g,{
lat:c.nextEvent.geometry.lat,lng:c.nextEvent.geometry.lng})),(0===e||-1===c.requiredTravelTimeTo||e<=c.requiredTravelTimeTo)&&(0===f||-1===c.requiredTravelTimeFrom||f<=c.requiredTravelTimeFrom)?(o.noOfAvailableResources++,o.availableResourceIds.push(a.id)):o.unavailableResourceIds.push(a.id)):o.unavailableResourceIds.push(a.id),ha(l,n,a)||o.noOfQualifiedResources++):o.unavailableResourceIds.push(a.id)))}),o.noOfAvailableResources>0&&a.isArray(c)&&c.length>0)for(var s=0;s<c.length;s++)if(j=0,i=c[s],ia(l,n,i)&&i.numberOfInstructors&&i.numberOfInstructors>0&&i.availableResourceIds.length>0){if(-1===p.calendar.radius)j=i.availableResourceIds.length,j>=i.numberOfInstructors&&(j=i.numberOfInstructors);else for(var t=0;t<i.availableResourceIds.length;t++)if(k=o.availableResourceIds.indexOf(i.availableResourceIds[t]),k>-1&&(j++,o.availableResourceIds.splice(k,1)),j>=i.numberOfInstructors){j=i.numberOfInstructors;break}if(o.noOfAvailableResources-=j,o.noOfAvailableResources<=0){o.noOfAvailableResources=0;break}}}else o.isDisabled=!0;e.push(o)})})),e},na=function(b){var c,d,e,f,g=[];if(a.isDate(b))for(d=new Date(b.getFullYear(),b.getMonth(),b.getDate()),e=a.copy(d),e.setDate(e.getDate()+7*z),c=a.copy(d);e>c;c.setDate(c.getDate()+1))f=[c.getMonth()+1,c.getDate()],g.push({dateIso:m.dateToString(c),date:a.copy(c)});return g},oa=function(b){var c=a.copy(p.calendar.days),b=n.BookingGridDataModel.fromServer(b),d=b.timeslots,e=[];return d.length>0&&(a.isArray(p.scheduledJobs)&&(e=p.scheduledJobs.map(function(a){return m.dateToString(a.jobDate)})),a.forEach(c,function(b){for(var c,f=0;f<d.length;f++)if(c=null,b.dateIso===d[f].slotDate){if(a.isObject(b.timeslots)||(b.timeslots={}),d[f].noOfAvailableResourcesOverFifty=d[f].noOfAvailableResources>50,d[f].noOfQualifiedResourcesOverFifty=d[f].noOfQualifiedResources>50,b.timeslots[d[f].slotTime]=d[f],d[f].interval=p.calendar.interval,p.scheduledJobsMap&&p.scheduledJobsMap[b.dateIso+d[f].slotTime]){c=p.scheduledJobsMap[b.dateIso+d[f].slotTime],c.availableResourceIds=d[f].availableResourceIds,c.unavailableResourceIds=d[f].unavailableResourceIds,c.isConflict=!1;for(var g=0;g<c.allocations.length;g++)if(-1===c.availableResourceIds.indexOf(c.allocations[g].resource.id)){d[f].isResourcesConflict=!0,c.isConflict=!0;break}}if(p.editingJob&&a.isArray(p.editingJob.allocations)&&p.editingJob.allocations.length)for(var h=0;h<p.editingJob.allocations.length;h++)if(-1===d[f].availableResourceIds.indexOf(p.editingJob.allocations[h].resource.id)){d[f].isResourcesConflict=!0;break}d[f].isReadOnly=!p.isNew&&(!p.editingJob||p.editingJob&&b.dateIso!==m.dateToString(p.editingJob.jobDate)&&e.indexOf(b.dateIso)>-1),d.splice(f,1),f--}})),p.bookingGridData=b,c},pa=function(a,b,c){return c>a.length-1?b:Ca(a[c]).then(function(d){return d.success?(b.push(d.data),pa(a,b,c+1)):h.reject(d)})},qa=function(b){var c,d=[];p.job&&p.calendar&&p.job.course&&p.job.region&&p.job.address&&a.isArray(p.calendar.timeslots)&&p.calendar.timeslots.length>0&&a.isArray(p.calendar.days)&&p.calendar.days.length>0?(c={trainingEventId:p.configData.rootRecord.id,regionId:p.job.region.id,startDateIso:p.calendar.days[0].dateIso,endDateIso:p.calendar.days[p.calendar.days.length-1].dateIso,startTimeInt:p.calendar.timeslots[0].start,endTimeInt:p.calendar.timeslots[p.calendar.timeslots.length-1].start,tagIds:[],jobDuration:p.job.classDuration||0,beforeClassDuration:p.job.classSetupTime||0,afterClassDuration:p.job.classPackdownTime||0,timeslotStep:p.calendar.interval,radius:p.calendar.radius,lat:p.job.address.latitude,lng:p.job.address.longitude},(b||S(c))&&(L=c,Y(),d.push(c),p.resourcesData=null,pa(d,[],0).then(function(b){a.isArray(b)&&b.length>0&&(p.resourcesData={timezone:b[0].timezone,timezoneSidId:b[0].timezoneSidId,noOfSubcontractors:b[0].noOfSubcontractors||0,pendingJobs:[],resources:[]},a.forEach(b,function(b){a.isArray(b.resources)&&(p.resourcesData.resources=p.resourcesData.resources.concat(b.resources),p.resourcesData.pendingJobs=p.resourcesData.pendingJobs.concat(b.pendingJobs))}),ra())})["catch"](function(a){console.error(a),a&&a.errorMessage&&k.toastError(a.errorMessage)})["finally"](function(){Z()}))):T()},ra=function(){var a;p.resourcesData?(a={timezone:p.resourcesData.timezone,noOfSubcontractors:p.resourcesData.noOfSubcontractors||0},a.slots=ma(p.resourcesData.resources,p.resourcesData.pendingJobs,p.resourcesData.timezoneSidId),p.rawData=a,p.calendar.data=oa(a),sa()):T()},sa=function(){var b,c;a.isArray(p.job.timeSlots)&&a.forEach(p.job.timeSlots,function(a,d){if(p.calendar&&p.calendar.data&&a){for(var e=0;e<p.calendar.data.length;e++)if(b=p.calendar.data[e],b.dateIso===a.slotDate&&b.timeslots&&b.timeslots[a.slotTime]){c=b.timeslots[a.slotTime];break}c&&(p.job.timeSlots[d]=c,c=null)}})},ta=function(b){p.job&&(p.job.classSetupTime=x,p.job.classPackdownTime=y,p.job.numberOfBreaks=b.numberOfBreaks,p.job.breakDuration=b.breakDuration,p.job.numberOfClasses=b.numberOfClasses||s,p.job.classDuration=b.classDuration,p.job.numberOfInstructors=b.numberOfInstructors,p.job.numberOfStudents=b.numberOfStudents,p.job.neededSkills=a.copy(b.neededSkills),p.isMultiDays=a.isNumber(b.numberOfClasses)&&b.numberOfClasses>1)},ua=function(a){var b=[];return p.configData&&p.configData.tags&&(b=p.configData.tags,a&&(b=P(b,{label:a}))),b},va=function(a){return p.job&&p.job.account?(a=a||"",Aa(p.job.account.id,a).then(function(a){return a.success?void(p.lookupState.contact.searchResults=n.ContactModel.fromServerList(a.data)):h.reject(a)})["catch"](function(a){console.error(a),a&&a.errorMessage&&k.toastError(a.errorMessage)})):[]},wa=function(a){var b=[];return p.configData&&p.configData.courseCatalogs&&(b=p.configData.courseCatalogs,a&&(b=P(b,{name:a}))),b},xa=function(a){return a=a||"",a.length>=1?Ba(a).then(function(a){return"OK"===a.status?n.AddressModel.fromGGServerList(a.results):void 0}):void 0},ya=function(a){var b,c=!1;if(p.isNew)if(b=p.job.timeSlots.indexOf(a),b>-1)p.job.timeSlots.splice(b,1);else if(p.isMultiDays){for(var d=0;d<p.job.timeSlots.length;d++)if(p.job.timeSlots[d].slotDate===a.slotDate)return void(p.job.timeSlots[d]=a);p.job.timeSlots.length<(p.isMultiDays?p.job.numberOfClasses:s)?p.job.timeSlots.push(a):k.toastWarning("Number of selected time slot is greater or equal defined number of classes.")}else p.job.timeSlots=[a];else if(p.editingJob){for(var e=0;e<p.scheduledJobs.length;e++)if(p.scheduledJobs[e]!==p.editingJob&&m.dateToString(p.scheduledJobs[e].jobDate)===a.slotDate){c=!0;break}c||(delete p.scheduledJobsMap[Wa(p.editingJob)],p.editingJob.jobDate=m.parseDateString(a.slotDate),p.editingJob.startTime=a.slotTime,p.editingJob.finishTime=La(a.slotTime),p.editingJob.availableResourceIds=a.availableResourceIds||[],p.editingJob.unavailableResourceIds=a.unavailableResourceIds||[],p.editingJob.isConflict=a.isResourcesConflict,p.scheduledJobsMap[Wa(p.editingJob)]=p.editingJob)}},za=function(a){return j.getConfigData(a)["catch"](X)},Aa=function(a,b){return j.searchContacts(a,b)["catch"](X)},Ba=function(a){return l.lookup({address:a})},Ca=function(a){return j.getResourceData(a)["catch"](X)},Da=function(a){return j.createContact(a)["catch"](X)},Ea=function(a,b,c){return j.saveJob(a,b,c)["catch"](X)},Fa=function(){k.showModal({templateUrl:"src/app/full-service-create-contact.tpl.html"},{loading:!1,contact:new n.ContactModel,account:p.job.account,createContact:Ia})},Ga=function(a){return a.$setSubmitted(!0),a.$valid?!0:(a.$error.required?k.toastError("Please check all required fields."):a.$error.pattern&&k.toastError("Invalid data format, please check email address or phone number."),!1)},Ha=function(){var b=p.jobForm,c=[],d=!1;return b.$setSubmitted(!0),H.EVENT_DETAILS.isInvalid=!1,H.SELECTED_SLOTS.isInvalid=!1,H.JOBS.isInvalid=!1,a.isArray(p.job.timeSlots)&&p.job.timeSlots.length>0&&a.forEach(p.job.timeSlots,function(a){a&&!a.isDisabled&&(p.bookSubcontractedResource||a.noOfAvailableResources>0)&&c.push(a)}),H.EVENT_DETAILS.isInvalid=!b.$valid||!p.job.contact||!p.job.address,H.SELECTED_SLOTS.isInvalid=p.isNew&&(0===c.length||c.length!==(p.isMultiDays?p.job.numberOfClasses:s)),d=H.EVENT_DETAILS.isInvalid||H.SELECTED_SLOTS.isInvalid||H.JOBS.isInvalid,d&&k.toastError("Invalid input data, please check required field, data format or selected time slots."),!d},Ia=function(a,b){var c;Ga(b.contactDetailsForm)&&(c=a.toServer(),c.accountId=b.account.id,b.loading=!0,Da(c).then(function(a){return a.success?(p.job.contact=n.ContactModel.fromServer(a.data),k.toastSuccess("New contact has been created successfully."),b.closeModal(),void 0):h.reject(a)})["catch"](function(a){console.error(a),a&&a.errorMessage&&k.toastError(a.errorMessage)})["finally"](function(){b.loading=!1}))},Ja=function(a){var b=p.job.weekdays.indexOf(a);b>-1?p.job.weekdays.splice(b,1):p.job.weekdays.push(a)},Ka=function(){p.calendar.employmentTypes=[],p.calendar.scheduledHours=[],a.isArray(p.configData.employmentTypes)&&a.forEach(p.configData.employmentTypes,function(a){-1!==C.indexOf(a.id)&&p.calendar.employmentTypes.push(a)}),a.forEach(B.scheduledHours,function(a){a.defaultSelected&&p.calendar.scheduledHours.push(a)})},La=function(b){var c=null;return a.isNumber(b)&&(c=R(Q(b)+(p.job.classDuration||0))),c},Ma=function(b){a.isArray(p.job.timeSlots)&&p.job.timeSlots.length>b&&p.job.timeSlots.splice(b,1)},Na=function(a){Xa(a)&&(K={jobDate:a.jobDate,startTime:a.startTime,finishTime:a.finishTime,availableResourceIds:a.availableResourceIds,unavailableResourceIds:a.unavailableResourceIds,isConflict:a.isConflict},p.editingJob=a,p.rawData&&(p.calendar.data=oa(p.rawData),sa(),Za(a)))},Oa=function(b){var d;b&&b.id&&k.confirm({title:"Confirmation",message:"Are you sure you would like to cancel this job?"}).then(function(){b.jobStatus=c.CANCELLED,d=p.scheduledJobs.indexOf(b),d>-1&&p.scheduledJobs.splice(d,1),delete p.scheduledJobsMap[Wa(b)]},a.noop)},Pa=function(b){var c;b&&!b.id&&k.confirm({title:"Confirmation",message:"Are you sure you would like to delete this job?"}).then(function(){delete p.scheduledJobsMap[Wa(b)],c=p.scheduledJobs.indexOf(b),c>-1&&p.scheduledJobs.splice(c,1)},a.noop)},Qa=function(){p.editingJob=new n.FullServiceScheduledJobModel},Ra=function(){p.editingJob.jobDate&&p.editingJob.startTime?(p.editingJob.id||(p.scheduledJobs.push(p.editingJob),p.scheduledJobsMap[Wa(p.editingJob)]=p.editingJob),K=null,p.editingJob=null,p.rawData&&(p.calendar.data=oa(p.rawData),sa())):k.toastError("Please select timeslot from the booking grid.")},Sa=function(b){k.confirm({title:"Confirmation",message:"Are you sure you would like to cancel job scheduling?"}).then(function(){delete p.scheduledJobsMap[Wa(p.editingJob)],K&&(p.editingJob.jobDate=K.jobDate,p.editingJob.startTime=K.startTime,p.editingJob.finishTime=K.finishTime,p.editingJob.availableResourceIds=K.availableResourceIds,p.editingJob.unavailableResourceIds=K.unavailableResourceIds,p.editingJob.isConflict=K.isConflict,p.scheduledJobsMap[Wa(p.editingJob)]=p.editingJob),p.editingJob=null,p.rawData&&(p.calendar.data=oa(p.rawData),sa())},a.noop)},Ta=function(){var a,b;return p.job&&(a=p.job.toFullServiceJob(),a.trainingEventId=p.configData.rootRecord.id,a.timezoneSidId=p.configData.gridSettings.timezone,b=new n.BookingGridSettingsModel,b.radius=p.calendar.radius,b.interval=p.calendar.interval,b.subcontractor=p.bookSubcontractedResource||!1,b.show24Hours=p.show24Hours||!1,b.employmentTypes=p.calendar.employmentTypes.map(function(a){return a.id}),b.scheduledHours=p.calendar.scheduledHours.map(function(a){return a.minValue}),a.gridSettings=b.toServer()),a},Ua=function(){var b=[];return a.isArray(p.scheduledJobs)&&a.forEach(p.scheduledJobs,function(a){b.push({id:a.id,name:a.name,startDate:m.dateToString(a.jobDate),startTime:a.startTime})}),b},Va=function(b){var c,d,e,f=function(c){return c.success?a.isArray(c.data)&&c.data.length>0?k.showModal({templateUrl:"src/app/full-service-allocation-conflict-modal.tpl.html"},{conflictData:c.data,saveAndAllocate:b===A.ALLOCATE_RESOURCE}).then(function(a){if("SAVE_AND_CLOSE"===a)b=A.CLOSE_MODAL;else{if("SAVE_AND_ALLOCATE"!==a)return"cancel";b=A.ALLOCATE_RESOURCE}return g(!0)}):(k.toastSuccess("Training event has been scheduled successfully."),p.job.id=c.data,b===A.ALLOCATE_RESOURCE?k.showModal({template:'<job-allocation class="sked-modal-container" training-event-id="trainingEventId" allow-posting-message="false" allow-going-back="true" on-close="onClose(message, this)" ></job-allocation>'},{trainingEventId:p.configData.rootRecord.id,onClose:function(a,b){b.closeModal(a)}}):!0):h.reject(c)},g=function(a){return Ea(c,d,a).then(f)};Ha()&&(c=Ta(),p.isNew?(d=[],a.forEach(p.job.timeSlots,function(a){d.push({startDate:a.slotDate,startTime:a.slotTime})})):(d=Ua(),e=!k.compareValues(c,I),a.forEach(d,function(a){a.isChanged=e||!k.compareValues(a,J[a.id])})),Y(),g(p.isNew).then(function(a){return"back"===a?$a():void("cancel"!==a&&_("done"))})["catch"](function(a){console.error(a),a&&a.errorMessage&&k.toastError(a.errorMessage)})["finally"](function(){Z()}))},Wa=function(a){return m.dateToString(a.jobDate)+a.startTime},Xa=function(a){var b=[c.QUEUED,c.PENDING_ALLOCATION,c.PENDING_DISPATCH,c.DISPATCHED,c.READY,c.EN_ROUTE,c.ON_SITE,c.IN_PROGRESS];return!!p.configData.userPermission.canEdit&&b.indexOf(a.jobStatus)>-1},Ya=function(b){!b||p.currentTab===b||a.isFunction(b.isHidden)&&b.isHidden()||a.isFunction(b.isDisabled)&&b.isDisabled()||(p.currentTab=b)},Za=function(b){var c=m.dateToString(b.jobDate),d=p.calendar.days.map(function(a){return a.dateIso});-1===d.indexOf(c)&&(p.calendar.date=a.copy(b.jobDate))},$a=function(){return Y(),o.then(function(b){q=b,za(p.searchParams.rootRecordId).then(function(b){var c,d,e,f={},g=[],i=[];if(!b.success)return h.reject(b);if(p.configData=n.ConfigDataModel.fromServer(b.data),!p.configData||!p.configData.userPermission||!p.configData.userPermission.canCreate)return h.reject({errorMessage:"You do not have permission to perform this action"});if(a.isArray(p.configData.jobStatusSettings)&&a.forEach(p.configData.jobStatusSettings,function(a){f[a.jobStatus]=a}),p.configData.jobStatusSettings=f,p.configData&&a.isArray(p.configData.courseCatalogs)&&p.configData.courseCatalogs.sort(function(a,b){var c=a.name?a.name.toLowerCase():"",d=b.name?b.name.toLowerCase():"";return d>c?-1:c>d?1:0}),b.data.scheduledJobInfo){if(r=!0,p.isNew=!1,p.job=n.JobModel.fromServerFullServiceJob(b.data.scheduledJobInfo),p.configData.rootRecord&&(p.job.account=a.copy(p.configData.rootRecord.account)),p.calendar.date=m.parseDateString(p.job.selectedDate)||new Date,p.job.gridSettings?(p.calendar.interval=p.job.gridSettings.interval||v,p.calendar.radius=p.job.gridSettings.radius||w,p.bookSubcontractedResource=p.job.gridSettings.subcontractor||!1,p.show24Hours=p.job.gridSettings.show24Hours||!1,p.calendar.employmentTypes=[],p.calendar.scheduledHours=[],a.isArray(p.configData.employmentTypes)&&a.isArray(p.job.gridSettings.employmentTypes)&&a.forEach(p.configData.employmentTypes,function(a){-1!==p.job.gridSettings.employmentTypes.indexOf(a.id)&&p.calendar.employmentTypes.push(a)}),a.isArray(p.calendar.scheduledHours)&&a.forEach(B.scheduledHours,function(a){-1!==p.job.gridSettings.scheduledHours.indexOf(a.minValue)&&p.calendar.scheduledHours.push(a)})):(p.calendar.interval=v,p.calendar.radius=w,Ka()),p.job.region&&a.isArray(p.configData.regions)&&p.configData.regions.length>0)for(var j=0;j<p.configData.regions.length;j++)if(p.job.region.id===p.configData.regions[j].id){p.job.region=p.configData.regions[j];break}if(p.job.course&&a.isArray(p.configData.courseCatalogs)&&p.configData.courseCatalogs.length>0)for(var j=0;j<p.configData.courseCatalogs.length;j++)if(p.job.course.id===p.configData.courseCatalogs[j].id){p.job.course=p.configData.courseCatalogs[j];break}a.isArray(p.job.avEquipments)&&p.job.avEquipments.length>0&&(d=p.job.avEquipments.map(function(a){return a.id}),a.forEach(p.configData.avEquipments,function(a){d.indexOf(a.id)>-1&&g.push(a)})),p.job.avEquipments=g,a.isArray(p.job.neededSkills)&&p.job.neededSkills.length>0&&(e=p.job.neededSkills.map(function(a){return a.id}),a.forEach(p.configData.tags,function(a){e.indexOf(a.id)>-1&&i.push(a)})),p.job.neededSkills=i,p.job.contact&&h.when(va("")).then(function(){var b=!1,c=p.lookupState.contact.searchResults;if(a.isArray(c)&&c.length>0){for(var d=0;d<c.length;d++)if(p.job.contact.id===c[d].id){p.job.contact=c[d],b=!0;break}b||(p.job.contact=null)}}),a.isArray(b.data.scheduledJobs)&&(p.scheduledJobs=n.FullServiceScheduledJobModel.fromServerList(b.data.scheduledJobs),p.scheduledJobsMap={},a.forEach(p.scheduledJobs,function(a){p.scheduledJobsMap[Wa(a)]=a})),I=Ta(),J={},c=Ua(),a.forEach(c,function(a){J[a.id]=a})}else{if(p.job=new n.JobModel,p.isNew=!0,p.configData.rootRecord){if(p.job.specialInstructions=p.configData.rootRecord.specialInstructions||"",p.configData.rootRecord.address&&p.configData.rootRecord.address.fullAddress&&p.configData.rootRecord.address.fullAddress.length>0&&Ba(p.configData.rootRecord.address.fullAddress).then(function(a){return"OK"===a.status&&a.results.length>0?void(p.job.address=n.AddressModel.fromGGServer(a.results[0])):h.reject()})["catch"](function(){k.toastWarning("Invalid training event address.")}),p.configData.rootRecord.region)for(var j=0;j<p.configData.regions.length;j++)if(p.configData.rootRecord.region.id===p.configData.regions[j].id){p.job.region=p.configData.regions[j];break}a.isArray(p.configData.rootRecord.equipments)&&p.configData.rootRecord.equipments.length>0&&(d=p.configData.rootRecord.equipments.map(function(a){return a.id}),a.forEach(p.configData.avEquipments,function(a){d.indexOf(a.id)>-1&&p.job.avEquipments.push(a)})),p.configData.rootRecord.account&&(p.job.account=a.copy(p.configData.rootRecord.account)),p.configData.rootRecord.contact&&(p.job.contact=a.copy(p.configData.rootRecord.contact))}p.configData.gridSettings&&(p.calendar.interval=v,p.calendar.radius=w,Ka())}})["catch"](function(a){console.error(a),a&&a.errorMessage&&aa(a.errorMessage)})["finally"](function(){Z()})})};p.$onInit=function(){$a(),$("loaded"),e(function(){p.isModalOpen=!0},0)},function(){d.DEFAULT_SUBC_PHOTO_URL=u,d.DEFAULT_PHOTO_URL=t,d.ACTION_AFTER_SAVING=A,d.CAL_SETTINGS=B,d.INTEGER_PATTERN=E,d.WEEK_DAYS=O,d.TABS=H,d.JOB_STATUS=c,d.DEFAULT_NUMBER_OF_CLASSES=s,p.calendar={date:new Date,timeslots:[],days:[],employmentTypes:[],scheduledHours:[]},p.resourcesData=null,p.weekPickerOptions=N,p.showWarning=!1,p.isModalOpen=!1,p.contentLoading=!1,p.show24Hours=!1,p.configData=null,p.searchParams={parentDomain:M.parent_domain||"*",rootRecordId:M.rootRecordId},p.lookupState={contact:{isOpen:!1,isInvalid:!1,searchString:"",searchResults:[]}},p.bookSubcontractedResource=!1,p.isNew=!1,p.bookingGridData=null,p.closeModal=_,p.selectTimeSlot=ya,p.searchNeededSkills=ua,p.searchContacts=va,p.searchCourseCatalogs=wa,p.searchAddresses=xa,p.moveCalendarBack=U,p.moveCalendarNext=V,p.focusInput=W,p.openAddingContactModal=Fa,p.selectWeekDay=Ja,p.saveJob=Va,p.rebuildBookingGridByResourceData=qa,p.resetBookingGridFilters=Ka,p.currentTab=H.EVENT_DETAILS,p.calculateSlotEndTime=La,p.removeSelectedSlot=Ma,p.rescheduleJob=Na,p.acceptReschedulingJob=Ra,p.cancelReschedulingJob=Sa,p.cancelJob=Oa,p.deleteJob=Pa,p.addNewJob=Qa,p.jobCanBeRescheduled=Xa,p.selectTab=Ya,p.isMultiDays=!1,p.scheduledJobs=[],p.scheduledJobsMap={},d.$watch("$ctrl.calendar.date",function(b,c){b&&a.isDate(b)?p.calendar.days=na(b):p.calendar.days=[]},!0),d.$watchGroup(["$ctrl.calendar.interval","$ctrl.show24Hours"],function(b,c){a.isNumber(b[0])?p.calendar.timeslots=ba(b[0]):p.calendar.timeslots=[]}),d.$watch("$ctrl.job.course",function(a){r||(a?ta(a):T()),r=!1}),d.$watchGroup(["$ctrl.calendar.days","$ctrl.calendar.radius","$ctrl.job.region","$ctrl.job.address","$ctrl.job.course"],function(a,b){qa()}),d.$watchGroup(["$ctrl.calendar.timeslots","$ctrl.job.classDuration","$ctrl.job.classSetupTime","$ctrl.job.classPackdownTime"],function(a,b){ra()}),d.$watchCollection("$ctrl.job.neededSkills",function(a){ra()},!0),d.$watchCollection("$ctrl.calendar.employmentTypes",function(a){ra()},!0),d.$watchCollection("$ctrl.calendar.scheduledHours",function(a){ra()},!0)}()}]})}(angular,top,window.moment||null),function(a,b){a.module("arcApp").component("jobAllocation",{templateUrl:"src/app/job-allocation.tpl.html",bindings:{allowPostingMessage:"<?",allowGoingBack:"<?",rootRecordId:"<?",onClose:"&?"},controller:["JOB_TYPE","JOB_STATUS","$scope","$timeout","$window","$location","$q","$filter","api","util","dateUtil","model","uiGmapIsReady",function(c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this,q=new Date,r=j("skedSfUrl")("slds/images/avatar1.jpg"),s=j("skedSfUrl")("slds/images/avatar1.jpg"),t={JOBS:"JOBS",MAP:"MAP"},u=[{label:"Distance",field:"firstJobAllocation.distance"},{label:"Name",field:"name"},{label:"Resource Type",field:"employmentType"},{label:"Rating",field:"-rating"},{label:"Attributes",field:"-tags.length"}],v="#000000",w="all",x=h.search(),y={FULL_SERVICE:{JOB_TYPES:[c.FULL_SERVICE].map(function(a){return a.toLowerCase()})},CEP:{JOB_TYPES:[c.CEP,c.FULL_SERVICE_CEP].map(function(a){return a.toLowerCase()})},COMMUNITY:{JOB_TYPES:[c.COMMUNITY].map(function(a){return a.toLowerCase()})},NAT:{JOB_TYPES:[c.NAT,c.FULL_SERVICE_NAT].map(function(a){return a.toLowerCase()})}},z=function(a){return a=a||0,0>a&&(a=0),new Array(a)},A=function(a){return console.error(a),l.toastError("Can not perform action due to server error."),i.reject()},B=function(){p.contentLoading=!0},C=function(){p.contentLoading=!1},D=function(c,d){b&&b.postMessage&&b.postMessage(a.extend({message:c},d),p.parentDomain)},E=function(b){p.isModalOpen=!1,D(b),a.isFunction(p.onClose)&&p.onClose({message:b})},F=function(a,b){l.showModal({templateUrl:"src/app/error-prompt-template.html",noBackdrop:!!b},{message:a,closePrompt:function(a){a.closeModal(),E("cancel")}})},G=function(){var b={schedule:null,jobs:[],resources:[]},c=[];return p.scheduleAllocation&&p.scheduleAllocation.address&&(b.schedule={latitude:p.scheduleAllocation.address.latitude,longitude:p.scheduleAllocation.address.longitude}),a.isArray(p.scheduleAllocation.resources)&&p.scheduleAllocation.resources.length>0&&a.forEach(p.scheduleAllocation.resources,function(a){a&&a.firstJobAllocation&&a.firstJobAllocation.startFromLocation&&b.resources.push({id:a.id,icon:{url:a.photoUrl||r,scaledSize:{width:32,height:32,widthUnit:"px",heightUnit:"px"}},coords:{latitude:a.firstJobAllocation.startFromLocation.latitude,longitude:a.firstJobAllocation.startFromLocation.longitude},options:{}})}),a.isArray(p.scheduleAllocation.jobs)&&p.scheduleAllocation.jobs.length>0&&a.forEach(p.scheduleAllocation.jobs,function(a){a&&a.address&&-1===c.indexOf([a.address.latitude,a.address.longitude].join("-"))&&(b.jobs.push({id:a.id,coords:{latitude:a.address.latitude,longitude:a.address.longitude},options:{}}),c.push([a.address.latitude,a.address.longitude].join("-")))}),b},H=function(b){p.contentMode=b,b===t.MAP&&(p.map.markers=G(),p.map.markers.schedule&&(p.map.center=a.copy(p.map.markers.schedule)))},I=function(a,b){!a.isSubcontractor&&X(b)&&(b.teamLeadResourceId=a.id)},J=function(a,b){X(b)&&b.teamLeadResourceId===a.id&&(b.teamLeadResourceId=null)},K=function(b,c){var d;c?(d=c.assignedResources.indexOf(b),X(c)&&d>-1&&(c.assignedResources.splice(d,1),c.teamLeadResourceId===b.id&&(c.teamLeadResourceId=null))):a.forEach(p.scheduleAllocation.jobs,function(a){K(b,a)})},L=function(b,c){var d=[];c?(a.isArray(c.conflictedJobs)&&c.conflictedJobs.length&&a.forEach(c.conflictedJobs,function(a){d=d.concat(a.assignedResources||[])}),X(c)&&(b.isSubcontractor||c.availableResources.indexOf(b)>-1&&-1===c.assignedResources.indexOf(b)&&-1===d.indexOf(b))&&(-1===c.numberOfResourcesRequired||c.assignedResources.length<c.numberOfResourcesRequired)&&c.assignedResources.push(b)):f(function(){a.forEach(p.scheduleAllocation.jobs,function(a){L(b,a)})})},M=function(b){var c=b.resources,d=b.jobs,e=[];a.isArray(c)&&c.length>0&&(e=c.map(function(a){return a.id})),a.isArray(d)&&d.length>0&&a.forEach(d,function(b){var d=[],f=a.copy(b.assignedResources);a.isArray(b.assignedResources)&&b.assignedResources.length>0&&(d=b.assignedResources.map(function(a){return a.id})),b.availableResources=[],a.isArray(b.availableResourceIds)&&b.availableResourceIds.length>0&&a.forEach(b.availableResourceIds,function(a){var d=e.indexOf(a);d>-1&&b.availableResources.push(c[d])}),b.assignedResources=[],a.isArray(b.assignResourceIds)&&b.assignResourceIds.length>0&&a.forEach(b.assignResourceIds,function(a){var g=e.indexOf(a),h=d.indexOf(a);g>-1?b.assignedResources.push(c[g]):h>-1?b.assignedResources.push(f[h]):b.originalAllocationMap[a]&&b.originalAllocationMap[a].resource&&b.assignedResources.push(n.ResourceModel.fromServer(b.originalAllocationMap[a].resource))})})},N=function(a){var b=null,c=a.jobType;if(c){c=c.toLowerCase();for(key in y)if(y.hasOwnProperty(key)&&y[key].JOB_TYPES.indexOf(c)>-1){b=y[key];break}}return b},O=function(){return k.getScheduleAllocationModel(p.rootRecordId)["catch"](A)},P=function(a,b){return k.saveAllocations(a,!!b)["catch"](A)},Q=function(a){return k.getAllocationConfigData(a)["catch"](A)},R=function(){var b,d=[],e=function(){var b=p.scheduleAllocation.jobs.map(function(b){var c,d,e=[],f={};return a.isArray(b.assignedResources)&&b.assignedResources.length>0&&a.forEach(b.assignedResources,function(a){f[a.id]?f[a.id].numberOfResources++:f[a.id]={jobId:b.id,resourceId:a.id,numberOfResources:1}}),d=a.merge({},b.originalAllocationMap,f),a.forEach(d,function(a){var c="",d=b.originalAllocationMap[a.resourceId],g=f[a.resourceId],h=b.possibleAllocationMap[a.resourceId];d?d&&!g?c="delete":d&&g&&d.numberOfResources!==g.numberOfResources&&(c="update"):c="create",e.push({id:a.id,jobId:a.jobId,resourceId:a.resourceId,numberOfResources:a.numberOfResources,action:c,distance:h?h.distance:null,travelTimeFrom:h?h.travelTimeFrom:null})}),c={id:b.id,teamLeadResourceId:b.teamLeadResourceId,allocations:e},p.scheduleType===y.COMMUNITY&&(c.locationConfirmed=!!b.locationConfirmed),p.scheduleType===y.CEP&&(c.readyToPublish=!!b.readyToPublish),c});return B(),P(b,p.notifyResourceOnSave).then(function(a){return a.success?(l.toastSuccess("Resources have been allocated successfully."),void E("done")):i.reject(a)})["catch"](function(a){console.error(a),a&&a.errorMessage&&l.toastError(a.errorMessage)})["finally"](function(){C()})};if(p.scheduleType===y.FULL_SERVICE){for(var f=0;f<p.scheduleAllocation.jobs.length;f++)b=p.scheduleAllocation.jobs[f],b.assignedResources.length>1&&!b.teamLeadResourceId&&d.push(b);d.length>0?l.showModal({templateUrl:"src/app/team-leader-allocation-confirm-modal.tpl.html"},{requiringTLJobs:d,jobType:p.scheduleAllocation.jobType,scheduleType:p.scheduleType,JOB_TYPE:c,SCHEDULE_TYPE:y,DEFAULT_SUBC_PHOTO_URL:s,DEFAULT_PHOTO_URL:r,getArray:z,setResourceAsTeamLeader:I,saveAllocations:function(a){e().then(a.closeModal())}}):e()}else e()},S=function(a,b){var b;return b!==a&&X(b)&&a.jobDate.getTime()===b.jobDate.getTime()&&a.startTime<b.finishTime&&a.finishTime>b.startTime},T=function(b,c){var d=[];return a.forEach(b,function(a){S(c,a)&&d.push(a)}),d},U=function(){return O().then(function(b){var c=a.copy(q);return b.success?(p.scheduleAllocation=n.ScheduleAllocationModel.fromServer(b.data),c.setMonth(c.getMonth()+3),c=c.getTime(),a.forEach(p.scheduleAllocation.jobs,function(a){y.CEP.JOB_TYPES.indexOf(a.jobType.toLowerCase())>-1?a.numberOfResourcesRequired=a.noOfEvaluators:a.numberOfResourcesRequired=a.numberOfInstructors,p.configData.jobStatusSettings&&p.configData.jobStatusSettings[a.jobStatus]&&(a.statusTextColor=p.configData.jobStatusSettings[a.jobStatus].backgroundColor),p.configData.natClassTypeSettings&&p.configData.natClassTypeSettings[a.classTypeName]?a.classTypeColor=p.configData.natClassTypeSettings[a.classTypeName].backgroundColor||v:a.classTypeColor=v,X(a)&&(a.conflictedJobs=T(p.scheduleAllocation.jobs,a))}),a.forEach(p.scheduleAllocation.resources,function(a){a.assignedHourPercentage=100*a.assignedMinutes/a.weeklyMinutes}),p.scheduleAllocation):i.reject(b)})},V=function(){return Q(p.rootRecordId).then(function(b){var c,d={},e={};return b.success?(p.configData=n.ConfigDataModel.fromServer(b.data),p.configData&&p.configData.userPermission&&p.configData.userPermission.canEdit?(a.isArray(p.configData.regions)||(p.configData.regions=[]),c=new n.PicklistItemModel(w,"All Regions"),p.configData.regions.unshift(c),p.region=c,a.isArray(p.configData.jobStatusSettings)&&a.forEach(p.configData.jobStatusSettings,function(a){d[a.jobStatus]=a}),a.isArray(p.configData.natClassTypeSettings)&&a.forEach(p.configData.natClassTypeSettings,function(a){e[a.classType]=a}),p.configData.jobStatusSettings=d,p.configData.natClassTypeSettings=e,p.configData):i.reject({errorMessage:"You do not have permission to perform this action"})):i.reject(b)})},W=function(a){return q>a},X=function(a){var b=[d.QUEUED,d.PENDING_ALLOCATION,d.PENDING_DISPATCH,d.DISPATCHED,d.READY,d.EN_ROUTE,d.ON_SITE,d.IN_PROGRESS];return!W(a.jobDate)&&b.indexOf(a.jobStatus)>-1},Y=function(a){var b=m.parseDateString(a.jobDate),c=[d.QUEUED,d.PENDING_ALLOCATION,d.PENDING_DISPATCH,d.DISPATCHED,d.READY,d.EN_ROUTE,d.ON_SITE,d.IN_PROGRESS];return!!p.configData.userPermission.canEdit&&!W(b)&&c.indexOf(a.jobStatus)>-1},Z=function(){var b=$();if(a.isArray(p.scheduleAllocation.jobs)&&p.scheduleAllocation.jobs.length>0)for(var c=0;c<p.scheduleAllocation.jobs.length;c++)job=p.scheduleAllocation.jobs[c],p.jobCanBeEdited(job)&&(job.locationConfirmed=!b)},$=function(){var b,c=!1;if(a.isArray(p.scheduleAllocation.jobs)&&p.scheduleAllocation.jobs.length>0)for(var d=0;d<p.scheduleAllocation.jobs.length;d++)if(b=p.scheduleAllocation.jobs[d],p.jobCanBeEdited(b)){if(!b.locationConfirmed){c=!1;break}c=!0}return c},_=function(){var b=aa();if(a.isArray(p.scheduleAllocation.jobs)&&p.scheduleAllocation.jobs.length>0)for(var c=0;c<p.scheduleAllocation.jobs.length;c++)job=p.scheduleAllocation.jobs[c],p.jobCanBeEdited(job)&&(job.readyToPublish=!b)},aa=function(){var b,c=!1;if(a.isArray(p.scheduleAllocation.jobs)&&p.scheduleAllocation.jobs.length>0)for(var d=0;d<p.scheduleAllocation.jobs.length;d++)if(b=p.scheduleAllocation.jobs[d],p.jobCanBeEdited(b)){if(!b.readyToPublish){c=!1;break}c=!0}return c};p.$onInit=function(){B(),i.all([V(),U()]).then(function(){p.scheduleType=N(p.scheduleAllocation),M(p.scheduleAllocation)})["catch"](function(a){console.error(a),a&&a.errorMessage&&F(a.errorMessage)})["finally"](function(){C()}),D("loaded"),f(function(){p.isModalOpen=!0},0)},function(){q.setHours(0,0,0,0),e.JOB_TYPE=c,e.SCHEDULE_TYPE=y,e.DEFAULT_PHOTO_URL=r,e.DEFAULT_SUBC_PHOTO_URL=s,e.CONTENT_MODE=t,e.RESOURCE_ORDER_OPTIONS=u,e.ALL_REGIONS_VALUE=w,p.contentMode=t.JOBS,p.orderBy=u[0],p.region=null,p.configData=null,p.map={zoom:12},p.scheduleType=null,p.setResourceAsTeamLeader=I,p.unsetTeamLeader=J,p.unassignResource=K,p.assignResource=L,p.switchContent=H,p.closeModal=E,p.saveAllocations=R,p.notifyResourceOnSave=!1,p.jobCanBeAllocated=X,p.jobCanBeEdited=Y,p.savedWithoutFullyAssigned=!1,p.confirmAllJobLocations=Z,p.isAllLocationsConfirmed=$,p.setAllReadyToPublish=_,p.isAllReadyToPublish=aa,p.getArray=z,p.rootRecordId=p.rootRecordId||x.rootRecordId,p.parentDomain=x.parent_domain||"*"}()}]})}(angular,top),function(a){a.module("arcApp").directive("draggableResource",["$window","$timeout","$document",function(b,c,d){a.element(b),a.element(d);return function(b,c,d){var e={scope:d.draggableResource,scroll:!1,revert:"invalid",zIndex:1,opacity:.9,revertDuration:200,helper:function(b){var c=a.element(b.currentTarget),d=c.clone();return d.addClass("ui-draggable-helper"),d.find(".arc-info--travel-info").remove(),d.find(".arc-attribute-count-info").remove(),d.find(".slds-avatar").removeClass("slds-avatar_large").addClass("slds-avatar_medium"),d}};c.draggable("instance")?c.draggable("enable"):c.draggable(e)}}])}(angular),function(a){a.module("arcApp").directive("droppableJob",["$window","$timeout","$document",function(b,c,d){a.element(b),a.element(d);return function(b,d,e){
var f,g=b.$eval(e.job),h={scope:e.droppableJob,activeClass:"arc-job-droppable",hoverClass:"arc-job-droppable_hover",accept:function(c){var d=a.element(c).scope(),h=g?g.assignedResources||[]:[],i=[],j=d?d.resource:null,k=g?g.numberOfResourcesRequired||0:0,l=b.$eval(e.jobCanBeAssigned);return g&&a.isArray(g.conflictedJobs)&&g.conflictedJobs.length&&a.forEach(g.conflictedJobs,function(a){i=i.concat(a.assignedResources||[])}),j&&(j.isSubcontractor||f&&f.indexOf(j)>-1&&-1===h.indexOf(j)&&-1===i.indexOf(j))&&(!g||g&&l&&(-1===k||h.length<k))},drop:function(a,f){var g=f.draggable.scope(),h=g?g.resource:null;e.onDrop&&h&&b.$apply(b.$eval(e.onDrop,{resource:h})),c(function(){d.siblings(".arc-job-droppable").removeClass("arc-job-droppable")})}};d.droppable("instance")?d.droppable("enable"):d.droppable(h),b.$watch(e.acceptedResources,function(a){f=a})}}])}(angular),function(a){a.module("arcApp").filter("hoursDurationName",[function(){return function(b){var c,d;return a.isNumber(b)&&(c=Math.floor(b),d=Math.floor(100*(b-c)),d=Math.round(60*d/100),c>0||d>0)?(c>0?c+"h":"")+(d>0?d+"m":""):"0h"}}])}(angular),angular.module("arcApp").run(["$templateCache",function(a){"use strict";a.put("src/app/assigned-resource-menu.tpl.html",'<div class="slds-dropdown slds-dropdown_right"> <ul class="slds-dropdown__list" role="menu"> <li class="slds-dropdown__item" ng-if="job.teamLeadResourceId !== resource.id" ng-class="{\'is-disabled\': resource.isSubcontractor}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.setResourceAsTeamLeader(resource, job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon--x-small slds-icon-text-default slds-m-right--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#favorite\' | skedSfUrl}}"></use> </svg> Set as Team Leader </span> </a> </li> <li class="slds-dropdown__item" ng-if="job.teamLeadResourceId === resource.id"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.unsetTeamLeader(resource, job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon--x-small slds-icon-text-default slds-m-right--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#spinner\' | skedSfUrl}}"></use> </svg> Unset Team Leader </span> </a> </li> <li class="slds-dropdown__item"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.unassignResource(resource, job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon--x-small slds-icon-text-default slds-m-right--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#resource_absence\' | skedSfUrl}}"></use> </svg> Unassign Resource </span> </a> </li> <li class="slds-dropdown__item"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.unassignResource(resource);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon--x-small slds-icon-text-default slds-m-right--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#ban\' | skedSfUrl}}"></use> </svg> Unassign for All Jobs </span> </a> </li> </ul> </div>'),a.put("src/app/cep-job-details-modal.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-csc-page arc-cep-page" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-icon_container slds-m-right_x-small"> <svg width="32px" height="32px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-grow slds-text-align_center"><h2 class="slds-text-heading_medium slds-hyphenate">{{($ctrl.pageMode === PAGE_MODE.EDIT)?(\'Edit Job - \' + $ctrl.job.name):\'Create New Job\'}}</h2></div> </div> </header> <div class="slds-modal__content" style="position: relative"> <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner_medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> <div class="slds-p-around_medium slds-grid slds-grid_pull-padded" ng-form="$ctrl.jobForm"> <!-- column 1 --> <section class="slds-form_compound slds-size_1-of-2 slds-p-horizontal_small"> <div class="slds-form-element__row"> <sked-input-lookup label="Course Catalog" name="courseCatalog" model="$ctrl.job.course" search="$ctrl.searchCourseCatalogs(searchString)" label-field="name" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#article\' | skedSfUrl}}" icon-class="slds-icon-standard-article" is-required="true" is-invalid="$ctrl.jobForm.$submitted && !$ctrl.job.course" is-readonly="$ctrl.job.isQueued === true"></sked-input-lookup> </div> <div class="slds-form-element__row"> <sked-input type="text" label="Class Name" name="className" model="$ctrl.job.className" is-required="true"></sked-input> <sked-input type="select" select-options="item.id as item.name for item in $ctrl.configData.jobTypes" label="Type" name="jobType" model="$ctrl.job.jobType" is-required="true"></sked-input> </div> <div class="slds-form-element__row slds-wrap"> <sked-input type="select" select-options="item as item.name for item in $ctrl.facilities" label="Facility" name="jobFacility" model="$ctrl.job.facility" is-required="true"></sked-input> <div class="slds-text-body--small slds-size--1-of-1 slds-p-left--xx-small arc-csc-form-meta" ng-if="$ctrl.job.facility" style="position:relative"> <div class="slds-grid slds-m-top--xx-small slds-grid--vertical-align-center slds-size--1-of-1" ng-if="$ctrl.job.facility.address"> <svg class="slds-icon slds-icon--xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#checkin\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-truncate">{{$ctrl.job.facility.address.fullAddress}}</div> </div> </div> </div> <div class="slds-form-element__row"> <sked-input type="number" label="No. of Evaluators" name="noEvaluators" model="$ctrl.job.noOfEvaluators" min-value="1" is-required="true" pattern="INTEGER_PATTERN"></sked-input> </div> <div class="slds-form-element__row"> <sked-input type="date-picker" label="Date of Event" name="jobDate" model="$ctrl.job.jobDate" is-required="true"></sked-input> <sked-input type="time-picker" label="Start Time" name="startTime" model="$ctrl.job.startTime" is-required="true"></sked-input> <sked-input type="time-picker" label="End Time" name="finishTime" model="$ctrl.job.finishTime" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <sked-input type="number" label="Class Set up Time (min)" name="classSetupTime" model="$ctrl.job.classSetupTime" min-value="0" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Class Pack down Time (min)" name="classPackdownTime" model="$ctrl.job.classPackdownTime" min-value="0" pattern="INTEGER_PATTERN"></sked-input> </div> <div class="slds-form-element__row"> <sked-input-tags label="Attributes (Tags)" name="neededSkills" label-field="label" model="$ctrl.job.neededSkills" search="$ctrl.searchNeededSkills(searchString)" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#quotes\' | skedSfUrl}}" icon-class="slds-icon-standard-quotes"></sked-input-tags> </div> <div class="slds-form-element__row"> <div class="slds-form-element"> <label class="slds-form-element__label">Special Instructions</label> <div class="slds-form-element__control"> <textarea class="slds-textarea" ng-model="$ctrl.job.specialInstructions"></textarea> </div> </div> </div> </section> <!-- column 2 --> <section class="slds-form_compound slds-size_1-of-2 slds-p-horizontal_small"> <div class="slds-theme_shade slds-p-vertical_x-small slds-p-horizontal_small slds-m-bottom_small" ng-if="$ctrl.pageMode !== PAGE_MODE.EDIT"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkRecurring" ng-model="$ctrl.job.isRecurring" ng-click="$ctrl.toggleRecurringJob()"> <label class="slds-checkbox__label" for="chkRecurring"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Manage Class Schedule</span> </label> </span> </div> </div> <div ng-show="$ctrl.job.isRecurring" ng-if="$ctrl.pageMode !== PAGE_MODE.EDIT" class="slds-m-bottom_small"> <div class="slds-form-element__row"> <!-- <sked-input type="select" select-options="item as item for item in [\'Weekly\']" label="Repeat" name="cbRepeatPattern" model="$ctrl.job.repeatPattern" ></sked-input> --> <sked-input type="number" label="# Class Days" name="noClassDays" model="$ctrl.job.numberOfClasses" min-value="1" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Repeat Every (weeks)" name="txtEvery" model="$ctrl.job.every" pattern="INTEGER_PATTERN"></sked-input> </div> <div class="slds-form-element__row slds-grid_vertical-align-end"> <fieldset class="slds-form-element arc-weekdays-checkboxes" ng-class="{\'slds-has-error\': ($ctrl.jobForm.$submitted && $ctrl.job.weekdays.length===0)}"> <legend class="slds-form-element__legend slds-form-element__label">On</legend> <div class="slds-checkbox_button-group"> <span class="slds-button slds-checkbox_button" ng-repeat="wd in WEEK_DAYS"> <input type="checkbox" id="chk{{wd.label}}" name="checkbox" ng-click="$ctrl.selectWeekDay(wd)" ng-checked="$ctrl.job.weekdays.indexOf(wd) !== -1" ng-disabled="wd.disabled"> <label class="slds-checkbox_button__label" ng-attr-for="chk{{wd.label}}"> <span class="slds-checkbox_faux">{{wd.label}}</span> </label> </span> </div> </fieldset> <div class="slds-form-element slds-m-left_medium slds-m-bottom_x-small"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkSkipHolidays" ng-model="$ctrl.job.skipHolidays"> <label class="slds-checkbox__label" for="chkSkipHolidays"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Skip Holidays?</span> </label> </span> </div> </div> </div> <div class="slds-form-element__row slds-p-top_x-small"> <!-- <div class="slds-form-element">\n                                <div class="slds-form-element__control">\n                                    <span class="slds-checkbox">\n                                        <input type="checkbox" id="chkSkipWeekends" ng-model="$ctrl.job.skipWeekends" ng-click="$ctrl.toggleSkipWeekends()">\n                                        <label class="slds-checkbox__label" for="chkSkipWeekends">\n                                            <span class="slds-checkbox_faux"></span>\n                                            <span class="slds-form-element__label">Skip Weekend?</span>\n                                        </label>\n                                    </span>\n                                </div>\n                            </div> --> </div> </div> <div class="slds-theme_shade slds-p-vertical_x-small slds-p-horizontal_small slds-m-bottom_xx-small"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkStackedClass" ng-model="$ctrl.job.isStackedClass" ng-click="$ctrl.toggleStackedClass()"> <label class="slds-checkbox__label" for="chkStackedClass"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Is Stacked Class</span> </label> </span> </div> </div> <div class="slds-p-vertical_x-small" ng-if="$ctrl.job.isStackedClass"> <div class="slds-text-title_caps slds-m-bottom_xx-small">MASTER CLASS</div> <table class="slds-table slds-table_bordered arc-csc__subclasses-table slds-m-bottom_medium"> <thead> <tr class="slds-line-height_reset"> <!-- <th class="no-col">#</th> --> <th class="slds-text-title">Course Code</th> <th class="slds-text-title">Start Time</th> <th class="slds-text-title">Duration (min)</th> <th class="info-col"></th> <th class="action-col"></th> </tr> </thead> <tbody> <tr class="slds-hint-parent"> <!-- <td>{{$index + 1}}</td> --> <td> <sked-input type="text" model="$ctrl.job.course.masterClassName" is-readonly="true"></sked-input> </td> <td> <sked-input type="time-picker" model="$ctrl.job.startTime" is-readonly="true"></sked-input> </td> <td ng-class="{\'slds-has-error\': subclass.error.timeOverlap}"> <sked-input type="number" model="$ctrl.job.course.classDuration" is-readonly="true"></sked-input> </td> <td class="info-col"></td> <td class="action-col"></td> </tr> </tbody> </table> <div class="slds-text-title_caps slds-m-bottom_xx-small">SUBCLASSES</div> <table class="slds-table slds-table_bordered arc-csc__subclasses-table"> <thead> <tr class="slds-line-height_reset"> <!-- <th class="no-col">#</th> --> <th class="slds-text-title">Course Code</th> <th class="slds-text-title">Start Time</th> <th class="slds-text-title">End Time</th> <!-- <th class="slds-text-title" >Duration (min)</th> --> <th class="info-col"></th> <th class="action-col"> <button class="slds-button slds-button_icon" ng-click="$ctrl.addSubclass()" ng-disabled="!$ctrl.job.course || !$ctrl.job.course.subclassesSettings || $ctrl.job.subclasses.length === $ctrl.job.course.subclassesSettings.length"> <svg class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use> </svg> </button> </th> </tr> </thead> <tbody> <tr class="slds-hint-parent" ng-repeat="subclass in $ctrl.job.subclasses | orderBy: \'displayOrder\'"> <!-- <td>{{$index + 1}}</td> --> <td ng-class="{\'slds-has-error\': subclass.error.courseCode || subclass.error.courseDuplicate}"> <sked-input type="select" select-options="item.courseCode as item.courseCode for item in $ctrl.job.course.subclassesSettings" model="subclass.courseCode" on-change="$ctrl.handleSubclassCourseCodeChanged(subclass, item)"></sked-input> </td> <td ng-class="{\'slds-has-error\': subclass.error.startTime || subclass.error.timeRange || subclass.error.timeOverlap}"> <sked-input type="time-picker" model="subclass.startTime" name="startTime_{{$index}}"></sked-input> </td> <td ng-class="{\'slds-has-error\': subclass.error.finishTime || subclass.error.timeRange || subclass.error.timeOverlap}"> <sked-input type="time-picker" model="subclass.finishTime" name="finishTime_{{$index}}"></sked-input> </td> <!-- <td ng-class="{\'slds-has-error\': subclass.error.timeOverlap}">\n                                        <sked-input type="number" model="subclass.classDuration" is-readonly="true"></sked-input>\n                                    </td> --> <td class="info-col"> <span class="slds-icon_container" ng-if="subclass.error.isError" sked-popover="true" sked-popover-position="left" sked-popover-template="src/app/csc-subclasses-error-popover.tpl.html" sked-popover-container=".arc-page"> <svg class="slds-icon slds-icon--xx-small slds-icon-text-error" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> </td> <td class="action-col"> <button class="slds-button slds-button_icon" ng-click="$ctrl.removeSubclass(subclass)"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> </button> </td> </tr> </tbody> </table> </div> </section> </div> </div> <footer class="slds-modal__footer"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center"> <div><button class="slds-button slds-button_destructive" ng-if="$ctrl.pageMode === PAGE_MODE.EDIT && $ctrl.jobCanBeDeleted" ng-click="$ctrl.deleteJob()" ng-disabled="$ctrl.contentLoading">Delete Job</button></div> <div> <button class="slds-button slds-button_success" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.ALLOCATE_RESOURCE)" ng-disabled="$ctrl.contentLoading || $ctrl.job.isQueued === true">{{($ctrl.pageMode === PAGE_MODE.EDIT)?\'Save\':\'Create\'}} &amp; Allocate</button> <button class="slds-button slds-button_brand" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.CLOSE_MODAL)" ng-disabled="$ctrl.contentLoading">{{($ctrl.pageMode === PAGE_MODE.EDIT)?\'Save\':\'Create\'}} &amp; Close</button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">Cancel</button> </div> </div> </footer> </div> </section>'),a.put("src/app/cep-job-info-popover.tpl.html",'<div class="acr-cep-job-info-popover"> <div class="slds-popover__body"> <dl class="slds-list_horizontal slds-text-body--small slds-wrap"> <dt class="slds-item_label slds-text-color_weak slds-truncate">Job Number</dt> <dd class="slds-item_detail slds-truncate">{{job.name}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Class Name</dt> <dd class="slds-item_detail slds-truncate">{{job.className}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Status</dt> <dd class="slds-item_detail slds-truncate" ng-style="{color: job.backgroundColor}">{{job.jobStatus}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Start Time</dt> <dd class="slds-item_detail slds-truncate">{{job.startTime | skedTimeName}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">End Time</dt> <dd class="slds-item_detail slds-truncate">{{job.finishTime | skedTimeName}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate" ng-if="job.isStackedClass">Subclasses</dt> <dd class="slds-item_detail slds-truncate" ng-if="job.isStackedClass"> <ul> <li ng-repeat="subclass in job.subclasses | orderBy: \'displayOrder\'">{{subclass.courseCode}} ({{subclass.startTime | skedTimeName}} - {{subclass.finishTime | skedTimeName}})</li> </ul> </dd> <dt class="slds-item_label slds-text-color_weak slds-truncate" ng-if="job.hasAllocation">Allocated Resources</dt> <dd class="slds-item_detail slds-truncate" ng-if="job.hasAllocation"> <ul> <li ng-repeat="allocation in job.allocations" class="slds-grid slds-grid_vertical-align-center"> <div class="slds-size_5-of-12 slds-truncate">{{allocation.resource.name}}</div> <div class="slds-size_2-of-12 slds-p-horizontal_small slds-grid slds-grid_align-spread"> <span><span ng-show="allocation.resource.id === job.teamLeadResourceId" class="team-leader__indicator"></span></span> <span><span ng-show="allocation.resource.category===\'Charge Nurse\'" class="charge-nurse__indicator"></span></span> </div> <div class="slds-size_5-of-12" ng-style="{color: $ctrl.configData.jobStatusSettings[allocation.status].backgroundColor}">{{allocation.status}}</div> </li> </ul> </dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Special Instructions</dt> <dd class="slds-item_detail">{{job.specialInstructions | limitTo: MAX_INSTRUCTORS_LENGTH}}<span ng-show="job.specialInstructions.length > MAX_INSTRUCTORS_LENGTH">...</span></dd> </dl> </div> <div class="slds-popover__footer slds-theme--shade slds-text-body_small" ng-if="job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED || job.isConflict"> <!-- <div class="slds-grid slds-grid_vertical-align-center">\n            <div class="slds-m-right_small"><span class="charge-nurse__indicator"></span></div>\n            <div class="slds-text-color_weak">Charge Nurse</div>\n        </div> --> <!-- <div class="error-inline-message" > \n            <svg class="slds-icon slds-icon_xx-small slds-m-right_xx-small" aria-hidden="true"> \n                <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> \n            </svg> Job times conflict with others in room\n        </div>  --> <div class="warning-inline-message slds-m-bottom_xxx-small slds-grid" ng-if="job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED"> <svg class="slds-icon slds-icon_xx-small slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> <div> <p ng-if="job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED">Job has not been fully allocated yet</p> </div> </div> <div class="error-inline-message slds-m-bottom_xxx-small slds-grid" ng-if="job.isConflict"> <svg class="slds-icon slds-icon_xx-small slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> </svg> <div> <p>Job times conflict with others in room</p> </div> </div> </div> </div>'),a.put("src/app/cep-scheduling-console.tpl.html",'<div class="arc-csc-page arc-console-page"> <div class="arc-csc-panel panel--header slds-p-horizontal_medium slds-p-vertical_small slds-border--bottom"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-end"> <!-- regions selector --> <div class="slds-grid slds-grid_vertical-align-end slds-size_1-of-2 slds-grid_align-start"> <div class="slds-icon_container slds-m-right_small"> <svg width="48px" height="48px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="transparent"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-form-element region-picklist"> <label class="slds-form-element__label" for="cboRegion">Region</label> <div class="slds-form-element__control"> <div class="slds-select_container"> <select id="cboRegion" class="slds-select" ng-model="$ctrl.region" ng-options="region as region.label for region in $ctrl.configData.regions"></select> </div> </div> </div> </div> <!-- title --> <div class="slds-grid slds-grid_align-center slds-grid_vertical-align-center viewing-day-title"> <div class="slds-text-heading--medium viewing-day-title__heading">{{$ctrl.date | date : \'MMMM, yyyy\'}}</div> <div class="slds-grid"> <input tabindex="0" class="hidden-date-picker" id="hdMonthPicker" sked-month-picker="$ctrl.commonMonthPickerOptions" ng-model="$ctrl.date" tabindex="-1"> <div class="slds-button-group cal-button-group"> <button class="slds-button slds-button--icon-border" ng-click="$ctrl.moveBack()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Previous</span> </button> <button class="slds-button slds-button--icon-border" ng-click="$ctrl.focusInput(\'#hdMonthPicker\')"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#monthlyview\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Calendar</span> </button> <button class="slds-button slds-button--icon-border" ng-click="$ctrl.moveNext()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Next</span> </button> </div> </div> </div> <!-- date/button --> <div class="slds-grid slds-size_1-of-2 slds-grid_align-end"> <button class="slds-button slds-button_neutral" ng-disabled="!$ctrl.region" ng-click="$ctrl.refreshConsole()"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#refresh\' | skedSfUrl}}"></use> </svg> Refresh </button> </div> </div> </div> <!-- filter --> <div class="slds-grid slds-grid--vertical-align-center slds-border_bottom slds-p-vertical_small slds-p-horizontal_medium slds-theme_shade" ng-show="$ctrl.region"> <h2 class="slds-text-heading_label slds-m-right_small">Filters</h2> <div class="slds-grid"> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.states" select-all-option="Any States" model="$ctrl.filters.states" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.locations" select-all-option="Any Locations" model="$ctrl.filters.locations" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.jobStatuses" select-all-option="Any Job Statuses" model="$ctrl.filters.jobStatuses" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.jobAllocations" select-all-option="Any Job Allocations" model="$ctrl.filters.jobAllocations" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <button class="slds-button slds-button_brand" ng-click="$ctrl.applyFilters()"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#filterList\' | skedSfUrl}}"></use> </svg> Apply Filters </button> </div> </div> <div class="arc-csc-panel panel--content slds-p-horizontal--medium slds-m-bottom--large"> <!-- the table --> <div class="slds-p-top--large" ng-if="$ctrl.region && $ctrl.scheduleData && $ctrl.scheduleData.length > 0"> <table class="arc-csc-layout-table" ng-style="{\'max-width\': (($ctrl.days.length * GRID_SETTINGS.slotSize.w) + GRID_SETTINGS.leftColWidth + 0.125) + \'rem\'}"> <tr> <td class="arc-csc-layout-table__cell cell-left slds-text-body--small"> <div class="cell-left__header" sked-docked-top-to> </div> <div class="cell-left__items"> <ul row-height-sync=".arc-csc-data-content-table" sync-context-properties="$ctrl.scheduleData"> <li ng-repeat="dataItem in $ctrl.scheduleData" sync-row> <p sked-popover="dataItem.facility.facilityId" sked-popover-position="right" sked-popover-template="src/app/facility-info-popover.tpl.html">{{dataItem.facility.name}}</p> </li> </ul> </div> </td> <td class="arc-csc-layout-table__cell cell--main"> <div class="arc-csc-data-header-wrapper" sked-docked-top-to> <div class="arc-csc-data-header-container" ng-style="{width: ($ctrl.days.length * GRID_SETTINGS.slotSize.w) + \'rem\'}"> <table class="arc-csc-data-header-table"> <tr> <td ng-repeat="day in $ctrl.days" class="slds-text-body--small slds-text-color--weak slds-text-align--center"> <div>{{day.date | date: \'EEE\'}}</div> <div>{{day.date | date: \'M/d\'}}</div> <div class="yesterday-indicator" ng-if="day.isYesterday"></div> </td> </tr> </table> </div> </div> <div class="arc-csc-data-content-wrapper" sked-draggable-scrolling=".arc-csc-data-header-wrapper"> <div ng-style="{width: ($ctrl.days.length * GRID_SETTINGS.slotSize.w) + \'rem\'}" class="arc-csc-data-content-container"> <table class="arc-csc-data-content-table"> <tr ng-repeat="dataItem in $ctrl.scheduleData" sync-row> <td ng-repeat="day in $ctrl.days" ng-class="{weekend: day.isWeekend, \'out-of-month\': day.isOutofMonth, \'past-day\': day.isInPast, \'yesterday\': day.isYesterday}" ng-click="$ctrl.handleGridBlockClicked($event, dataItem.facility, day)" droppable-grid-cell="job-console" on-drop="$event.stopPropagation();$ctrl.rescheduleJob(job, day.date, dataItem.facility)"> <div class="job-block" ng-repeat="job in dataItem.jobsByDate[day.dateIso]" sked-dropdown-menu="src/app/job-block-menu.tpl.html" sked-dropdown-menu-container=".arc-csc-data-content-wrapper" sked-dropdown-menu-ignored="day.isInPast" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/cep-job-info-popover.tpl.html" draggable-job="$ctrl.jobCanBeEdited(job)" draggable-job-scope="job-console" draggable-job-container=".arc-csc-data-content-wrapper" job="job" ng-style="{background: job.backgroundColor, color: job.textColor}"> <span class="job-conflict-indicator" ng-if="job.isConflict"></span> {{job.startTime | arcShortTimeName}}-{{job.finishTime | arcShortTimeName}} </div> </td> </tr> </table> </div> </div> </td> </tr> </table> </div> <!-- empty data --> <div ng-if="!$ctrl.region || !$ctrl.scheduleData || $ctrl.scheduleData.length <= 0" class="slds-text-align--center slds-m-top--xx-large arc-csc-sc--empty"> <span class="slds-icon_container slds-m-right--x-small"> <svg class="slds-icon slds-icon--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <span ng-if="loading">Loading ...</span> <span ng-if="!loading && !$ctrl.region">No region selected...</span> <span ng-if="!loading && $ctrl.region && (!$ctrl.scheduleData || $ctrl.scheduleData.length <= 0)">No schedule data for selected region...</span> </div> </div> </div>'),
a.put("src/app/community-job-info-popover.tpl.html",'<div class="acr-csc-job-info-popover"> <div class="slds-popover__body"> <dl class="slds-list_horizontal slds-text-body_small slds-wrap"> <dt class="slds-item_label slds-text-color_weak slds-truncate">Job Number</dt> <dd class="slds-item_detail slds-truncate">{{job.name}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Course Name</dt> <dd class="slds-item_detail slds-truncate">{{job.course.name}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Class Sub Type</dt> <dd class="slds-item_detail slds-truncate">{{job.communityClassSubType.id}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Status</dt> <dd class="slds-item_detail slds-truncate" ng-style="{color: job.backgroundColor}">{{job.jobStatus}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">No. of Instructors</dt> <dd class="slds-item_detail slds-truncate">{{job.numberOfInstructors}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Address</dt> <dd class="slds-item_detail slds-truncate">{{job.address.fullAddress}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Offerings</dt> <dd class="slds-item_detail slds-truncate"> <ul> <li ng-repeat="offering in job.offerings">{{offering.name}}</li> </ul> </dd> <dt class="slds-item_label slds-text-color_weak slds-truncate" ng-if="job.isStackedClass">Subclasses</dt> <dd class="slds-item_detail slds-truncate" ng-if="job.isStackedClass"> <ul> <li ng-repeat="subclass in job.subclasses | orderBy: \'displayOrder\'">{{subclass.courseCode}} ({{subclass.startTime | skedTimeName}} - {{subclass.finishTime | skedTimeName}})</li> </ul> </dd> <dt class="slds-item_label slds-text-color_weak slds-truncate" ng-if="job.hasAllocation">Allocated Resources</dt> <dd class="slds-item_detail slds-truncate" ng-if="job.hasAllocation"> <ul> <li ng-repeat="allocation in job.allocations" class="slds-grid"> <div class="slds-size_3-of-5 slds-p-right_xx-small slds-truncate">{{allocation.resource.name}}</div> <div class="slds-size_2-of-5" ng-style="{color: $ctrl.configData.jobStatusSettings[allocation.status].backgroundColor}">{{allocation.status}}</div> </li> </ul> </dd> </dl> </div> <div class="slds-popover__footer slds-theme--shade slds-text-body_small" ng-if="job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED || !job.locationConfirmed || (!job.isQueued && job.isConflict) || (job.isQueued && !job.copyResult.success)"> <div class="warning-inline-message slds-m-bottom_xxx-small slds-grid" ng-if="!job.locationConfirmed || job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED"> <svg class="slds-icon slds-icon_xx-small slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> <div> <p ng-if="!job.locationConfirmed">Location has not been confirmed yet</p> <p ng-if="job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED">Job has not been fully allocated yet</p> </div> </div> <!-- <div class="warning-inline-message slds-m-bottom_xxx-small" ng-if="job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED"> \n            <svg class="slds-icon slds-icon_xx-small slds-m-right_xx-small" aria-hidden="true"> \n                <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> \n            </svg> Job has not been fully allocated yet\n        </div>  --> <div class="error-inline-message slds-m-bottom_xxx-small slds-grid" ng-if="(!job.isQueued && job.isConflict) || (job.isQueued && !job.copyResult.success)"> <svg class="slds-icon slds-icon_xx-small slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> </svg> <div> <p ng-if="!job.isQueued && job.isConflict">Job times conflict with others in room</p> <p ng-if="job.isQueued && !job.copyResult.success">{{job.copyResult.message}}</p> </div> </div> <!-- <div class="error-inline-message slds-grid" ng-if="!job.isQueued && job.isConflict"> \n            <svg class="slds-icon slds-icon_x-small slds-m-right_xx-small" aria-hidden="true"> \n                <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> \n            </svg> \n            <p>Job times conflict with others in room</p>\n        </div> \n        <div class="error-inline-message slds-grid" ng-if="job.isQueued && !job.copyResult.success"> \n            <svg class="slds-icon slds-icon_x-small slds-m-right_xx-small" aria-hidden="true"> \n                <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> \n            </svg> \n            <p>{{job.copyResult.message}}</p>\n        </div>  --> </div> </div>'),a.put("src/app/community-queued-jobs-side-panel.tpl.html",'<div class="arc-csc-side-panel slds-panel slds-grid slds-grid_vertical slds-nowrap"> <div class="slds-p-horizontal_medium slds-p-vertical_small arc-csc-side-panel__header slds-has-divider_bottom"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center"> <!-- <div class="slds-text-heading--medium viewing-day-title__heading">Queued Jobs</div> --> <div class="slds-form-element"> <label class="slds-checkbox" for="chkSelectAll"> <input type="checkbox" name="default" id="chkSelectAll" ng-checked="$ctrl.sidePanelState.selectedJobs.length > 0 && ($ctrl.queuedJobs | filter:$ctrl.filterQueuedJObsByViewMode).length === $ctrl.sidePanelState.selectedJobs.length" ng-click="$ctrl.selectAllQueuedJobs()" ng-disabled="!$ctrl.queuedJobs || $ctrl.queuedJobs.length === 0"> <span class="slds-checkbox--faux"></span> <span class="slds-form-element__label">Select All Jobs</span> </label> </div> <div class="slds-button-group" role="group"> <button class="slds-button slds-button_icon slds-button_icon-border" ng-class="{\'slds-is-selected\': $ctrl.sidePanelState.viewMode === QUEUED_JOBS_VIEW_MODE.SINGLE}" title="Single Job" ng-click="$ctrl.sidePanelState.selectedJobs = [];$ctrl.sidePanelState.viewMode = QUEUED_JOBS_VIEW_MODE.SINGLE"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Single Job</span></button> <button class="slds-button slds-button_icon slds-button_icon-border" ng-class="{\'slds-is-selected\': $ctrl.sidePanelState.viewMode === QUEUED_JOBS_VIEW_MODE.GROUPED}" title="Grouped Jobs" ng-click="$ctrl.sidePanelState.selectedJobs = [];$ctrl.sidePanelState.viewMode = QUEUED_JOBS_VIEW_MODE.GROUPED"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#standard_objects\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Grouped Jobs</span></button> </div> </div> </div> <div class="slds-p-vertical_x-small arc-csc-side-panel__body slds-grow slds-scrollable_y"> <ul class="sc-queued-job__list" ng-if="$ctrl.queuedJobs && $ctrl.queuedJobs.length > 0"> <li class="slds-p-horizontal_medium slds-p-vertical_x-small" ng-repeat="queuedJob in $ctrl.queuedJobs" ng-click="$ctrl.toggleQueuedJobSelection(queuedJob)" ng-class="{\'is-selected\': $ctrl.sidePanelState.selectedJobs.indexOf(queuedJob) >= 0}" ng-if="($ctrl.sidePanelState.viewMode === QUEUED_JOBS_VIEW_MODE.GROUPED && (!queuedJob.scheduleJob || queuedJob.queuedType === QUEUED_JOB_TYPE.SCHEDULE) || ($ctrl.sidePanelState.viewMode === QUEUED_JOBS_VIEW_MODE.SINGLE && queuedJob.queuedType === QUEUED_JOB_TYPE.JOB))"> <div class="slds-media"> <div class="slds-media__figure slds-p-top_xx-small"> <span class="slds-icon_container slds-icon-standard-event" ng-if="queuedJob.queuedType === QUEUED_JOB_TYPE.JOB"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> </span> <span class="slds-icon_container slds-icon-standard-orders" ng-if="queuedJob.queuedType === QUEUED_JOB_TYPE.SCHEDULE"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#orders\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body"> <h2 class="slds-truncate">{{queuedJob.course.name}}</h2> <div class="slds-grid"> <div class="slds-text-body_small slds-text-color_weak slds-m-right_small" ng-if="queuedJob.queuedType === QUEUED_JOB_TYPE.JOB"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_xx-small slds-icon-text-default" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> </span>{{(queuedJob.queuedType === QUEUED_JOB_TYPE.JOB)?(queuedJob.jobDate | date: COMMON_DATE_FORMAT):\'\'}} </div> <div class="slds-text-body_small slds-text-color_weak"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_xx-small slds-icon-text-default" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#clock\' | skedSfUrl}}"></use> </svg> </span>{{queuedJob.startTime | skedTimeName}} - {{queuedJob.finishTime | skedTimeName}} </div> </div> <div class="slds-text-body_small slds-grid arc-csc-queued-job__warning-message" ng-if="queuedJob.isPreviouslyCancelled"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_xx-small slds-icon-text-default" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <div>{{(queuedJob.queuedType === QUEUED_JOB_TYPE.JOB)?\'Previously Cancelled\':\'Contains Cancelled Jobs\'}}</div> </div> <div class="slds-text-body_small slds-grid arc-csc-queued-job__error-message" ng-if="queuedJob.copyResult.success === false || queuedJob.success === false"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_xx-small slds-icon-text-default" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> </svg> </span> <div ng-if="queuedJob.queuedType === QUEUED_JOB_TYPE.JOB">{{queuedJob.copyResult.message}}</div> <ul ng-if="queuedJob.queuedType === QUEUED_JOB_TYPE.SCHEDULE"> <li ng-repeat="(key, value) in queuedJob.errorMessages">{{key}} ({{value}})</li> </ul> </div> <div class="slds-text-body_small slds-grid arc-csc-queued-job__success" ng-if="(queuedJob.queuedType === QUEUED_JOB_TYPE.JOB && queuedJob.copyResult.success === true) || (queuedJob.queuedType === QUEUED_JOB_TYPE.SCHEDULE && queuedJob.success !== false)"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_xx-small slds-icon-text-default" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#success\' | skedSfUrl}}"></use> </svg> </span> <div>Success</div> </div> </div> </div> </li> </ul> <div class="sc-queued-job__list_empty slds-align_absolute-center slds-text-body_small" ng-if="!$ctrl.queuedJobs || $ctrl.queuedJobs.length === 0"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> </span> No Queued Job found. </div> </div> <div class="slds-panel__section arc-csc-side-panel__footer slds-has-divider_top"> <div class="slds-grid slds-grid_align-spread"> <div> <button class="slds-button slds-button_success" ng-click="$ctrl.resolveQueuedJobConflict();" ng-disabled="!$ctrl.sidePanelState.selectedJobs || $ctrl.sidePanelState.selectedJobs.length === 0"> <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#check\' | skedSfUrl}}"></use> </svg> Resolve </button> <button class="slds-button slds-button_destructive" ng-click="$ctrl.deleteSelectedQueuedJobs();" ng-disabled="!$ctrl.sidePanelState.selectedJobs || $ctrl.sidePanelState.selectedJobs.length === 0"> <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> Delete </button> </div> <button type="button" class="slds-button slds-button_neutral" ng-click="$ctrl.hideSidePanel()">Close</button> </div> </div> <div class="slds-spinner_container" ng-show="$ctrl.sidePanelState.loading===true"> <div role="status" class="slds-spinner slds-spinner_medium"> <span class="slds-assistive-text">Searching</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> </div>'),a.put("src/app/community-scheduling-console.tpl.html",'<div class="arc-csc-page arc-console-page"> <div class="arc-csc-panel panel--header slds-p-horizontal_medium slds-p-vertical_small slds-border_bottom"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-end"> <!-- regions selector --> <div class="slds-grid slds-grid_vertical-align-end slds-size_1-of-2 slds-grid_align-start"> <div class="slds-icon_container slds-m-right_small"> <svg width="48px" height="48px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="transparent"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-form-element region-picklist slds-m-right_x-small"> <label class="slds-form-element__label" for="cboRegion">Region</label> <div class="slds-form-element__control"> <div class="slds-select_container"> <select id="cboRegion" class="slds-select" ng-model="$ctrl.region" ng-options="region as region.label for region in $ctrl.configData.regions"></select> </div> </div> </div> </div> <!-- title --> <div class="slds-grid slds-grid_align-center slds-grid_vertical-align-center viewing-day-title"> <div class="slds-text-heading--medium viewing-day-title__heading">{{$ctrl.date | date : \'MMMM, yyyy\'}}</div> <div class="slds-grid"> <input tabindex="0" class="hidden-date-picker" id="hdMonthPicker" sked-month-picker="$ctrl.commonMonthPickerOptions" ng-model="$ctrl.date" tabindex="-1"> <div class="slds-button-group cal-button-group"> <button class="slds-button slds-button--icon-border" ng-click="$ctrl.moveBack()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Previous</span> </button> <button class="slds-button slds-button--icon-border" ng-click="$ctrl.focusInput(\'#hdMonthPicker\')"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#monthlyview\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Calendar</span> </button> <button class="slds-button slds-button--icon-border" ng-click="$ctrl.moveNext()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Next</span> </button> </div> </div> </div> <!-- date/button --> <div class="slds-grid slds-size_1-of-2 slds-grid_align-end"> <div class="slds-form-element" ng-if="$ctrl.configData.userPermission.canClone"> <label class="slds-form-element__label" for="cboRegion">Copy Class Pattern from Previous Month</label> <div class="slds-grid arc-csc-prev-month"> <input tabindex="0" class="hidden-date-picker" id="hdPrevMonthPicker" sked-month-picker="$ctrl.previousMonthPickerOptions" ng-model="$ctrl.monthForCopying" tabindex="-1"> <button class="slds-button slds-button_neutral slds-text-color_weak previous-month-picker" ng-click="$ctrl.focusInput(\'#hdPrevMonthPicker\')"> <span>{{$ctrl.monthForCopying | date: \'MMMM, yyyy\'}}</span> <svg class="slds-button__icon slds-button__icon_right slds-float_right"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#monthlyview\' | skedSfUrl}}"></use> </svg> </button> <button class="slds-button slds-button_brand" ng-disabled="!$ctrl.region || !$ctrl.monthCanBeCopied()" ng-click="$ctrl.copyClassPattern()"> <svg class="slds-button__icon slds-button__icon_left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#copy\' | skedSfUrl}}"></use> </svg> Copy </button> </div> </div> <div class="slds-grid slds-grid_vertical-align-end slds-m-left_x-small"> <button class="slds-button slds-button_neutral" ng-disabled="!$ctrl.region" ng-click="($ctrl.sidePanelState.show)?$ctrl.hideSidePanel():$ctrl.showSidePanel()" ng-if="$ctrl.configData.userPermission.canClone"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#side_list\' | skedSfUrl}}"></use> </svg> Queued Jobs </button> <button class="slds-button slds-button_neutral" ng-disabled="!$ctrl.region" ng-click="$ctrl.refreshConsole()"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#refresh\' | skedSfUrl}}"></use> </svg> Refresh </button> </div> </div> </div> </div> <!-- filter --> <div class="slds-grid slds-grid--vertical-align-center slds-border_bottom slds-p-vertical_small slds-p-horizontal_medium slds-theme_shade" ng-show="$ctrl.region"> <h2 class="slds-text-heading_label slds-m-right_small">Filters</h2> <div class="slds-grid"> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.states" select-all-option="Any States" model="$ctrl.filters.states" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.locations" select-all-option="Any Locations" model="$ctrl.filters.locations" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item.name for item in $ctrl.filterSources.courses" select-all-option="Any Courses" model="$ctrl.filters.courses" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.jobStatuses" select-all-option="Any Job Statuses" model="$ctrl.filters.jobStatuses" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.jobAllocations" select-all-option="Any Job Allocations" model="$ctrl.filters.jobAllocations" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <button class="slds-button slds-button_brand" ng-click="$ctrl.applyFilters()"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#filterList\' | skedSfUrl}}"></use> </svg> Apply Filters </button> </div> </div> <div class="arc-csc-panel panel--content slds-p-horizontal--medium slds-m-bottom--large"> <!-- the table --> <div class="slds-p-top--large" fixed-min-height="true" ng-if="$ctrl.region && $ctrl.scheduleData && $ctrl.scheduleData.length > 0"> <table class="arc-csc-layout-table" ng-style="{\'max-width\': (($ctrl.days.length * GRID_SETTINGS.slotSize.w) + GRID_SETTINGS.leftColWidth + 0.125) + \'rem\'}"> <tr> <td class="arc-csc-layout-table__cell cell-left slds-text-body--small"> <div class="cell-left__header" sked-docked-top-to> </div> <div class="cell-left__items"> <ul row-height-sync=".arc-csc-data-content-table" sync-context-properties="$ctrl.scheduleData,$ctrl.sidePanelState.selectedJobs"> <li ng-repeat="dataItem in $ctrl.scheduleData" sync-row> <p sked-popover="dataItem.facility.facilityId" sked-popover-position="right" sked-popover-template="src/app/facility-info-popover.tpl.html">{{dataItem.facility.name}}</p> <!-- <p class="slds-truncate">{{dataItem.facility.name}}</p>\n                                    <span class="slds-listbox__option-meta_entity">{{dataItem.facility.id}}</span> --> </li> </ul> </div> </td> <td class="arc-csc-layout-table__cell cell--main"> <div class="arc-csc-data-header-wrapper" sked-docked-top-to> <div class="arc-csc-data-header-container" ng-style="{width: ($ctrl.days.length * GRID_SETTINGS.slotSize.w) + \'rem\'}"> <table class="arc-csc-data-header-table"> <tr> <td ng-repeat="day in $ctrl.days" class="slds-text-body--small slds-text-color--weak slds-text-align--center"> <div>{{day.date | date: \'EEE\'}}</div> <div>{{day.date | date: \'M/d\'}}</div> <div class="yesterday-indicator" ng-if="day.isYesterday"></div> </td> </tr> </table> </div> </div> <div class="arc-csc-data-content-wrapper" sked-draggable-scrolling=".arc-csc-data-header-wrapper"> <div ng-style="{width: ($ctrl.days.length * GRID_SETTINGS.slotSize.w) + \'rem\'}" class="arc-csc-data-content-container"> <table class="arc-csc-data-content-table"> <tr ng-repeat="dataItem in $ctrl.scheduleData" sync-row> <td ng-repeat="day in $ctrl.days" ng-class="{weekend: day.isWeekend, \'out-of-month\': day.isOutofMonth, \'past-day\': day.isInPast, \'yesterday\': day.isYesterday}" ng-click="$ctrl.handleGridBlockClicked($event, dataItem.facility, day)" droppable-grid-cell="job-console" on-drop="$event.stopPropagation();$ctrl.rescheduleJob(job, day.date, dataItem.facility)"> <div class="job-block" ng-repeat="job in dataItem.jobsByDate[day.dateIso] | orderBy : [\'isQueued\', \'startTime\']" sked-dropdown-menu="src/app/job-block-menu.tpl.html" sked-dropdown-menu-container=".arc-csc-data-content-wrapper" sked-dropdown-menu-ignored="day.isInPast" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/community-job-info-popover.tpl.html" ng-show="!job.isQueued || (job.isQueued && ($ctrl.sidePanelState.selectedJobs.indexOf(job) > -1 || $ctrl.sidePanelState.selectedJobs.indexOf(job.scheduleJob) > -1))" draggable-job="$ctrl.jobCanBeEdited(job)" draggable-job-scope="job-console" draggable-job-container=".arc-csc-data-content-wrapper" job="job" ng-style="{background: job.backgroundColor, color: job.textColor}"> <span class="copy-result-indicator" ng-if="job.isQueued" ng-class="{\'copy-success\': job.copyResult.success === true, \'copy-error\': job.copyResult.success === false}"></span> <span class="job-conflict-indicator" ng-if="!job.isQueued && job.isConflict"></span> <span class="location-confirmed-indicator" ng-if="!job.locationConfirmed"> <!-- <svg class="slds-icon slds-icon_xx-small" aria-hidden="true"> \n                                                        <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> \n                                                    </svg> --> </span> {{job.startTime | arcShortTimeName}}-{{job.finishTime | arcShortTimeName}} </div> </td> </tr> </table> </div> </div> </td> <td class="arc-csc-layout-table__cell cell--side-panel" ng-class="{\'is-opened\':$ctrl.sidePanelState.show}"> <div ng-include="\'src/app/community-queued-jobs-side-panel.tpl.html\'" class="arc-csc-side-panel-container" sked-docked-horizontal-to=".arc-csc-panel.panel--content"></div> </td> </tr> </table> </div> <!-- empty data --> <div ng-if="!$ctrl.region || !$ctrl.scheduleData || $ctrl.scheduleData.length <= 0" class="slds-text-align--center slds-m-top--xx-large arc-csc-sc--empty"> <span class="slds-icon_container slds-m-right--x-small"> <svg class="slds-icon slds-icon--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <span ng-if="loading">Loading ...</span> <span ng-if="!loading && !$ctrl.region">No region selected...</span> <span ng-if="!loading && $ctrl.region && (!$ctrl.scheduleData || $ctrl.scheduleData.length <= 0)">No schedule data for selected region...</span> </div> </div> </div>'),a.put("src/app/csc-copying-confirm-modal.tpl.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Copy Class Pattern</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p class="slds-m-bottom_small"> Copy all classes from <strong>{{sourceMonth | date: monthFormat}}</strong> to <strong>{{destinationMonth | date: monthFormat}}</strong> </p> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkIncludingSubclasses" ng-model="isIncludingSubclasses"> <label class="slds-checkbox__label" for="chkIncludingSubclasses"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Including Subclasses</span> </label> </span> </div> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="closeModal()">No</button> <button class="slds-button slds-button--brand" ng-click="closeModal({isIncludingSubclasses: isIncludingSubclasses})">Yes</button> </div> </div>'),a.put("src/app/csc-job-details-modal.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-csc-page slds-modal_large" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-icon_container slds-m-right_x-small"> <svg width="32px" height="32px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-grow slds-text-align_center"><h2 class="slds-text-heading_medium slds-hyphenate">{{($ctrl.pageMode === PAGE_MODE.EDIT)?(\'Edit Job - \' + $ctrl.job.name):\'Create New Job\'}}</h2></div> </div> </header> <div class="slds-modal__content" style="position: relative"> <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner_medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> <div class="slds-p-around_medium slds-grid slds-grid_pull-padded" ng-form="$ctrl.jobForm"> <!-- column 1 --> <section class="slds-form_compound slds-size_1-of-1 slds-p-horizontal_small"> <div class="slds-form-element__row"> <sked-input-lookup label="Course Catalog" name="courseCatalog" model="$ctrl.job.course" search="$ctrl.searchCourseCatalogs(searchString)" label-field="name" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#article\' | skedSfUrl}}" icon-class="slds-icon-standard-article" is-required="true" is-invalid="$ctrl.jobForm.$submitted && !$ctrl.job.course" is-readonly="$ctrl.job.isQueued === true"></sked-input-lookup> </div> <div class="slds-form-element__row"> <sked-input type="select" select-options="item as item.label for item in $ctrl.configData.communityClassSubTypes" label="Community Class Sub Type" name="communityClassSubTypes" model="$ctrl.job.communityClassSubType" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <sked-input-tags label="Attributes (Tags)" name="neededSkills" label-field="label" model="$ctrl.job.neededSkills" search="$ctrl.searchNeededSkills(searchString)" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#quotes\' | skedSfUrl}}" icon-class="slds-icon-standard-quotes"></sked-input-tags> </div> <!-- <div class="slds-form-element__row slds-wrap">\n                        <sked-input-lookup label="Address" name="lkAddress" model="$ctrl.job.address" search="$ctrl.searchAddresses(searchString)" label-field="fullAddress" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#address\' | skedSfUrl}}" icon-class="slds-icon-standard-address" is-required="true" is-invalid="$ctrl.jobForm.$submitted && !$ctrl.job.address"></sked-input-lookup>\n                    </div>  --> <div class="slds-form-element__row slds-wrap"> <sked-input type="select" select-options="item as item.name for item in $ctrl.facilities" label="Facility" name="jobFacility" model="$ctrl.job.facility" is-required="true"></sked-input> <div class="slds-text-body--small slds-size--1-of-1 slds-p-left--xx-small arc-csc-form-meta" ng-if="$ctrl.job.facility" style="position:relative"> <div class="slds-grid slds-m-top--xx-small slds-grid--vertical-align-center slds-size--1-of-1" ng-if="$ctrl.job.facility.address"> <svg class="slds-icon slds-icon--xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#checkin\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-truncate">{{$ctrl.job.facility.address.fullAddress}}</div> </div> </div> </div> <!-- <div class="slds-form-element__row ">\n                        <div class="slds-form-element">\n                            <div class="slds-form-element__control">\n                                <span class="slds-checkbox">\n                                    <input type="checkbox" id="chkLocationConfirmed" ng-model="$ctrl.job.locationConfirmed" ng-disabled="!!$ctrl.job.hasAllocation">\n                                    <label class="slds-checkbox__label" for="chkLocationConfirmed">\n                                        <span class="slds-checkbox_faux"></span>\n                                        <span class="slds-form-element__label">Location Confirmed</span>\n                                    </label>\n                                </span>\n                            </div>\n                        </div>\n                    </div>  --> <div class="slds-form-element__row"> <sked-input type="date-picker" date-options="EVENT_DATE_OPTIONS" label="Date of Event" name="jobDate" model="$ctrl.job.jobDate" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <sked-input type="time-picker" label="Start Time" name="startTime" model="$ctrl.job.startTime" class="slds-size_1-of-2" is-required="true"></sked-input> <sked-input type="time-picker" label="End Time" name="finishTime" model="$ctrl.job.finishTime" class="slds-size_1-of-2" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <sked-input type="number" label="Class Set up Time (min)" name="classSetupTime" model="$ctrl.job.classSetupTime" min-value="0" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Class Pack down Time (min)" name="classPackdownTime" model="$ctrl.job.classPackdownTime" min-value="0" pattern="INTEGER_PATTERN"></sked-input> </div> </section> <!-- column 2 --> <section class="slds-form_compound slds-size_1-of-1 slds-p-horizontal_small"> <div class="slds-form-element__row"> <sked-input type="number" label="# Students" name="noStudents" model="$ctrl.job.numberOfStudents" min-value="1" is-required="true" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="# Instructors" name="noInstructors" model="$ctrl.job.numberOfInstructors" min-value="1" is-required="true" pattern="INTEGER_PATTERN"></sked-input> <!-- <sked-input type="number" label="Class Duration" name="classDuration" model="$ctrl.job.classDuration" class="slds-size_1-of-3" min-value="1" is-required="true" pattern="INTEGER_PATTERN"></sked-input> --> <!-- <sked-input type="number" label="# Class Days" name="noClassDays" model="$ctrl.job.numberOfClasses" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> --> <!-- <sked-input type="number" label="# Breaks" name="noBreaks" model="$ctrl.job.numberOfBreaks" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input>\n                        <sked-input type="number" label="Break Duration" name="breakDuration" model="$ctrl.job.breakDuration" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> --> </div> <div class="slds-form-element__row"> <sked-input type="number" label="# Breaks" name="noBreaks" model="$ctrl.job.numberOfBreaks" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Break Duration" name="breakDuration" model="$ctrl.job.breakDuration" pattern="INTEGER_PATTERN"></sked-input> </div> <div class="slds-form-element__row"> <div class="slds-form-element"> <label class="slds-form-element__label">Special Instructions</label> <div class="slds-form-element__control"> <textarea class="slds-textarea" ng-model="$ctrl.job.specialInstructions"></textarea> </div> </div> </div> <div class="slds-theme_shade slds-p-vertical_x-small slds-p-horizontal_small slds-m-bottom_small" ng-if="$ctrl.pageMode !== PAGE_MODE.EDIT"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkRecurring" ng-model="$ctrl.job.isRecurring" ng-click="$ctrl.toggleRecurringJob()"> <label class="slds-checkbox__label" for="chkRecurring"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Manage Class Schedule</span> </label> </span> </div> </div> <div ng-show="$ctrl.job.isRecurring" ng-if="$ctrl.pageMode !== PAGE_MODE.EDIT"> <div class="slds-form-element__row"> <!-- <sked-input type="select" select-options="item as item for item in [\'Weekly\']" label="Repeat" name="cbRepeatPattern" model="$ctrl.job.repeatPattern" ></sked-input> --> <sked-input type="number" label="# Class Days" name="noClassDays" model="$ctrl.job.numberOfClasses" min-value="1" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Repeat Every (weeks)" name="txtEvery" model="$ctrl.job.every" pattern="INTEGER_PATTERN"></sked-input> </div> <div class="slds-form-element__row"> <fieldset class="slds-form-element arc-weekdays-checkboxes" ng-class="{\'slds-has-error\': ($ctrl.jobForm.$submitted && $ctrl.job.weekdays.length===0)}"> <legend class="slds-form-element__legend slds-form-element__label">On</legend> <div class="slds-checkbox_button-group"> <span class="slds-button slds-checkbox_button" ng-repeat="wd in WEEK_DAYS"> <input type="checkbox" id="chk{{wd.label}}" name="checkbox" ng-click="$ctrl.selectWeekDay(wd)" ng-checked="$ctrl.job.weekdays.indexOf(wd) !== -1" ng-disabled="wd.disabled"> <label class="slds-checkbox_button__label" ng-attr-for="chk{{wd.label}}"> <span class="slds-checkbox_faux">{{wd.label}}</span> </label> </span> </div> </fieldset> </div> <div class="slds-form-element__row slds-p-top_x-small"> <div class="slds-form-element"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkSkipHolidays" ng-model="$ctrl.job.skipHolidays"> <label class="slds-checkbox__label" for="chkSkipHolidays"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Skip Holidays?</span> </label> </span> </div> </div> <!-- <div class="slds-form-element">\n                                <div class="slds-form-element__control">\n                                    <span class="slds-checkbox">\n                                        <input type="checkbox" id="chkSkipWeekends" ng-model="$ctrl.job.skipWeekends" ng-click="$ctrl.toggleSkipWeekends()">\n                                        <label class="slds-checkbox__label" for="chkSkipWeekends">\n                                            <span class="slds-checkbox_faux"></span>\n                                            <span class="slds-form-element__label">Skip Weekend?</span>\n                                        </label>\n                                    </span>\n                                </div>\n                            </div> --> </div> </div> </section> <!-- column 3 --> <section class="slds-form_compound slds-size_1-of-1 slds-p-horizontal_small"> <!-- stacked sub-classes --> <div class="slds-m-bottom_small"> <div class="slds-theme_shade slds-p-vertical_x-small slds-p-horizontal_small slds-m-bottom_xx-small"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkStackedClass" ng-model="$ctrl.job.isStackedClass" ng-click="$ctrl.toggleStackedClass()"> <label class="slds-checkbox__label" for="chkStackedClass"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Is Stacked Class</span> </label> </span> </div> </div> <div class="slds-p-vertical_x-small" ng-if="$ctrl.job.isStackedClass"> <div class="slds-text-title_caps slds-m-bottom_xx-small">MASTER CLASS</div> <table class="slds-table slds-table_bordered arc-csc__subclasses-table slds-m-bottom_medium"> <thead> <tr class="slds-line-height_reset"> <!-- <th class="no-col">#</th> --> <th class="slds-text-title">Course Code</th> <th class="slds-text-title">Start Time</th> <th class="slds-text-title">Duration (min)</th> <th class="info-col"></th> <th class="action-col"></th> </tr> </thead> <tbody> <tr class="slds-hint-parent"> <!-- <td>{{$index + 1}}</td> --> <td> <sked-input type="text" model="$ctrl.job.course.masterClassName" is-readonly="true"></sked-input> </td> <td> <sked-input type="time-picker" model="$ctrl.job.startTime" is-readonly="true"></sked-input> </td> <td ng-class="{\'slds-has-error\': subclass.error.timeOverlap}"> <sked-input type="number" model="$ctrl.job.course.classDuration" is-readonly="true"></sked-input> </td> <td class="info-col"></td> <td class="action-col"></td> </tr> </tbody> </table> <div class="slds-text-title_caps slds-m-bottom_xx-small">SUBCLASSES</div> <table class="slds-table slds-table_bordered arc-csc__subclasses-table"> <thead> <tr class="slds-line-height_reset"> <!-- <th class="no-col">#</th> --> <th class="slds-text-title">Course Code</th> <th class="slds-text-title">Start Time</th> <th class="slds-text-title">Duration (min)</th> <th class="info-col"></th> <th class="action-col"> <button class="slds-button slds-button_icon" ng-click="$ctrl.addSubclass()" ng-disabled="!$ctrl.job.course || !$ctrl.job.course.subclassesSettings || $ctrl.job.subclasses.length === $ctrl.job.course.subclassesSettings.length"> <svg class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use> </svg> </button> </th> </tr> </thead> <tbody> <tr class="slds-hint-parent" ng-repeat="subclass in $ctrl.job.subclasses | orderBy: \'displayOrder\'"> <!-- <td>{{$index + 1}}</td> --> <td ng-class="{\'slds-has-error\': subclass.error.courseCode || subclass.error.courseDuplicate}"> <sked-input type="select" select-options="item.courseCode as item.courseCode for item in $ctrl.job.course.subclassesSettings" model="subclass.courseCode" on-change="$ctrl.handleSubclassCourseCodeChanged(subclass, item)"></sked-input> </td> <td ng-class="{\'slds-has-error\': subclass.error.startTime || subclass.error.timeRange || subclass.error.timeOverlap}"> <sked-input type="time-picker" model="subclass.startTime"></sked-input> </td> <!-- <td ng-class="{\'slds-has-error\': subclass.error.finishTime || subclass.error.timeRange || subclass.error.timeOverlap}">\n                                            <sked-input type="time-picker" model="subclass.finishTime"></sked-input>\n                                        </td> --> <td ng-class="{\'slds-has-error\': subclass.error.timeOverlap}"> <sked-input type="number" model="subclass.classDuration" is-readonly="true"></sked-input> </td> <td class="info-col"> <span class="slds-icon_container" ng-if="subclass.error.isError" sked-popover="true" sked-popover-position="left" sked-popover-template="src/app/csc-subclasses-error-popover.tpl.html" sked-popover-container=".arc-page"> <svg class="slds-icon slds-icon--xx-small slds-icon-text-error" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> </td> <td class="action-col"> <button class="slds-button slds-button_icon" ng-click="$ctrl.removeSubclass(subclass)"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> </button> </td> </tr> </tbody> </table> </div> </div> <!-- offerings --> <div> <div class="slds-theme_shade slds-p-vertical_x-small slds-p-horizontal_small slds-m-bottom_small slds-grid slds-grid_align-spread"> <label class="slds-text-color_weak slds-text-body_small">Offerings</label> <button class="slds-button slds-button_icon" ng-click="$ctrl.addJobOffering()"> <svg class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use> </svg> </button> </div> <ul class="arc-csc__offerings-list"> <li ng-repeat="offering in $ctrl.job.offerings" ng-if="offering.isDeleted !== true" class="slds-grid slds-m-bottom_x-small"> <sked-input type="text" name="txtEvery" model="offering.name" on-change="offering.isChanged=true"></sked-input> <button class="slds-button slds-button_icon slds-p-horizontal_small" ng-click="$ctrl.removeJobOffering($index)"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> </button> </li> </ul> </div> </section> </div> </div> <footer class="slds-modal__footer"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center"> <div><button class="slds-button slds-button_destructive" ng-if="$ctrl.pageMode === PAGE_MODE.EDIT && $ctrl.jobCanBeDeleted" ng-click="$ctrl.deleteJob()" ng-disabled="$ctrl.contentLoading">Delete Job</button></div> <div> <button class="slds-button slds-button_success" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.ALLOCATE_RESOURCE)" ng-disabled="$ctrl.contentLoading || $ctrl.job.isQueued === true ">{{($ctrl.pageMode === PAGE_MODE.EDIT)?\'Save\':\'Create\'}} &amp; Allocate</button> <button class="slds-button slds-button_brand" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.CLOSE_MODAL)" ng-disabled="$ctrl.contentLoading">{{($ctrl.pageMode === PAGE_MODE.EDIT)?\'Save\':\'Create\'}} &amp; Close</button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">Cancel</button> </div> </div> </footer> </div> </section>'),
a.put("src/app/csc-subclasses-error-popover.tpl.html",'<div class="arc-nat-job-error-popover"> <div class="slds-popover__body"> <ul class="slds-text-color_error slds-list_dotted"> <li ng-show="subclass.error.courseCode">Course code is required.</li> <li ng-show="subclass.error.startTime">Start time is required and should be equal or after master class start time.</li> <li ng-show="subclass.error.finishTime">Finish time is required and must not exceed master class duration.</li> <li ng-show="subclass.error.timeRange">Start Time should not be after Finish Time.</li> <li ng-show="subclass.error.timeOverlap">Conflict subclasses times.</li> <li ng-show="subclass.error.courseDuplicate">Duplicate course code.</li> </ul> </div> </div>'),a.put("src/app/edit-nat-course-modal.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal slds-modal_large arc-page arc-csc-page limit-width-modal" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-icon_container slds-m-right_x-small"> <svg width="32px" height="32px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-grow slds-text-align_center"><h2 class="slds-text-heading_medium slds-hyphenate">Edit Course</h2></div> </div> </div> <div class="slds-modal__content" style="position: relative"> <!-- course information --> <div class="slds-page-header slds-p-vertical_medium slds-m-bottom_small"> <div class="slds-grid slds-grid_pull-padded"> <div class="slds-size_3-of-7 slds-p-horizontal_small slds-media"> <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-standard-article"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#article\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body"> <dl class="slds-list--horizontal slds-wrap"> <dt class="slds-item--label slds-text-color--weak slds-truncate">Course Name:</dt> <dd class="slds-item--detail slds-truncate untruncate">{{$ctrl.natCourse.name}}</dd> <dt class="slds-item--label slds-text-color--weak slds-truncate">Course Catalog:</dt> <dd class="slds-item--detail slds-truncate untruncate">{{$ctrl.natCourse.course.name}}</dd> <dt class="slds-item--label slds-text-color--weak slds-truncate">Region:</dt> <dd class="slds-item--detail slds-truncate untruncate">{{$ctrl.region.name}}</dd> </dl> </div> </div> <div class="slds-size_3-of-7 slds-p-horizontal_small slds-media"> <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-standard-event"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body"> <dl class="slds-list--horizontal slds-wrap"> <dt class="slds-item--label slds-text-color--weak slds-truncate">Start Month:</dt> <dd class="slds-item--detail slds-truncate untruncate">{{$ctrl.natCourse.startMonth | date: \'MMMM, yyyy\'}}</dd> <dt class="slds-item--label slds-text-color--weak slds-truncate">Class Pattern:</dt> <dd class="slds-item--detail slds-truncate untruncate">{{$ctrl.getFormattedClassPattern()}}</dd> <dt class="slds-item--label slds-text-color--weak slds-truncate">Max Hours per Day:</dt> <dd class="slds-item--detail slds-truncate untruncate">{{$ctrl.natCourse.maximumHoursPerDay || 0}}h</dd> </dl> </div> </div> <!-- <div class="slds-size_2-of-8 slds-p-horizontal_small slds-media" >\n                        <div class="slds-media__figure">\n                            <span class="slds-icon_container slds-icon-standard-today" >\n                                <svg class="slds-icon" aria-hidden="true">\n                                    <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#today\' | skedSfUrl}}"></use>\n                                </svg>\n                            </span>\n                        </div>\n                        <div class="slds-media__body" >\n                            <dl class="slds-list--horizontal slds-wrap">\n								<dt class="slds-item--label slds-text-color--weak slds-truncate" style="width: 60%">Max Hours per Day:</dt>\n								<dd class="slds-item--detail slds-truncate untruncate" style="width: 40%">{{$ctrl.natCourse.maximumHoursPerDay || 0}}h</dd>\n								<dt class="slds-item--label slds-text-color--weak slds-truncate" style="width: 60%">Class Setup Time:</dt>\n								<dd class="slds-item--detail slds-truncate untruncate" style="width: 40%">{{$ctrl.natCourse.classSetupTime || 0}}m</dd>\n								<dt class="slds-item--label slds-text-color--weak slds-truncate" style="width: 60%">Class Packdown Time:</dt>\n								<dd class="slds-item--detail slds-truncate untruncate" style="width: 40%">{{$ctrl.natCourse.classPackdownTime || 0}}m</dd>\n							</dl>\n                        </div>\n                    </div> --> <!-- <div class="slds-size_1-of-5 slds-p-horizontal_small slds-grid slds-grid_align-end slds-col_bump-left">\n                        <div class="slds-button-group" role="group">\n                            <button class="slds-button slds-button_icon slds-button_icon-border" ng-class="{\'slds-is-selected\': $ctrl.contentMode === CONTENT_MODE.JOBS}" title="Jobs" ng-click="$ctrl.switchContent(CONTENT_MODE.JOBS)">\n                                <svg class="slds-button__icon" aria-hidden="true">\n                                    <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use>\n                                </svg>\n                                <span class="slds-assistive-text">Jobs</span></button>\n                            <button class="slds-button slds-button_icon slds-button_icon-border" ng-class="{\'slds-is-selected\': $ctrl.contentMode === CONTENT_MODE.MAP}" title="Map" ng-click="$ctrl.switchContent(CONTENT_MODE.MAP)">\n                                <svg class="slds-button__icon" aria-hidden="true">\n                                    <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#location\' | skedSfUrl}}"></use>\n                                </svg>\n                            <span class="slds-assistive-text">Map</span></button>\n                        </div>\n                    </div> --> </div> </div> <!-- the table --> <div class="slds-p-around_medium" ng-form="$ctrl.natCourseDetailsForm"> <table class="slds-table slds-table_bordered arc-nat-job-confirm__table" style="table-layout: fixed"> <thead> <tr class="slds-text-title--caps"> <td style="width: 1.75rem"></td> <td style="width: 2rem;text-align: right">#</td> <td style="width: 6rem">JOB No.</td> <td style="width: 10rem">Class Type</td> <td style="width: 11.5rem">Start Date</td> <td style="width: 9rem">Start Time</td> <td style="width: 9rem">End Time</td> <td>Location</td> <td style="width: 7rem">No. Students</td> <td style="width: 4rem;text-align: right"># Inst</td> <td style="width: 3.5rem"></td> </tr> </thead> <tbody> <tr ng-repeat="job in $ctrl.natCourse.jobs" ng-class="{\'new-job\': !job.id, \'cancelled-job\': job.isCancelled, \'disabled-job\': job.isReadonly || job.isCancelled}"> <td style="padding-left: .75rem"> <div class="class-type-marker" ng-style="{\'background-color\': $ctrl.configData.natClassTypeSettings[job.classType.name].backgroundColor}" ng-show="job.classType"></div> <span class="slds-icon_container slds-m-bottom_xx-small" ng-if="!job.isReadonly && !job.isCancelled && job.error.isInvalid" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/edit-nat-job-error-popover.tpl.html" sked-popover-container=".arc-page"> <svg class="slds-icon slds-icon--xx-small slds-icon-text-error" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <span class="slds-icon_container slds-m-bottom_xx-small" ng-if="job.isReadonly || job.isCancelled" sked-popover="true" sked-popover-position="right" sked-popover-content="\'Class in past or being cancelled\'"> <svg class="slds-icon slds-icon--xx-small slds-icon-text-default" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#lock\' | skedSfUrl}}"></use> </svg> </span> </td> <td class="slds-text-align_right">{{job.orderNumber}}</td> <td><a ng-href="/{{job.id}}" target="_blank">{{job.name}}</a></td> <td> <sked-input type="select" select-options="item as item.name for item in $ctrl.classTypes" model="job.classType" on-change="$ctrl.handleClassTypeChanged(job)" is-disabled="job.isReadonly || job.isCancelled"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.jobDate || job.error.conflict)}"> <sked-input type="date-picker" model="job.jobDate" is-readonly="job.isReadonly || job.isCancelled" date-options="job.jobDateOptions"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.startTime || job.error.conflict || job.error.timeRange || job.error.timeInterval)}"> <sked-input type="time-picker" model="job.startTime" is-readonly="job.isReadonly || job.isCancelled" time-options="$ctrl.jobTimeOptions"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.finishTime || job.error.conflict || job.error.timeRange || job.error.timeInterval)}"> <sked-input type="time-picker" model="job.finishTime" is-readonly="job.isReadonly || job.isCancelled" time-options="$ctrl.jobTimeOptions"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.location || job.error.conflict)}"> <sked-input type="select" select-options="item as item.name for item in $ctrl.facilities" model="job.facility" is-disabled="job.isReadonly || job.isCancelled" ng-attr-title="{{job.facility.name}}"></sked-input> </td> <td ng-class="{\'slds-has-error\': job.error.numberOfStudents}"> <sked-input type="number" name="noOfStudents_{{$index}}" model="job.numberOfStudents" min-value="1" pattern="INTEGER_PATTERN" on-change="$ctrl.handleNumberOfStudentsChanged(job)" is-readonly="job.isReadonly || job.isCancelled" on-blur="$ctrl.handleNumberOfStudentsBlurred($index)"></sked-input> </td> <!-- <td><sked-input type="number" name="noOfInstructors_{{$index}}" model="job.numberOfInstructors" min-value="1" pattern="INTEGER_PATTERN" ></sked-input></td> --> <td class="slds-text-align_right"><div class="slds-p-horizontal_small">{{job.numberOfInstructors}}</div></td> <td class="slds-text-align_right"> <button class="slds-button slds-button_icon button-icon_blue" ng-click="$ctrl.splitJobRecord($index)" sked-popover="true" sked-popover-content="\'Split Class\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page" ng-hide="job.isCancelled || job.isReadonly"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#socialshare\' | skedSfUrl}}"></use> </svg> </button> <button class="slds-button slds-button_icon button-icon_red" ng-click="$ctrl.removeJobRecord($index)" ng-if="!job.id" sked-popover="true" sked-popover-content="\'Remove Class\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> </button> <button class="slds-button slds-button_icon button-icon_yellow" ng-click="$ctrl.cancelJobRecord($index)" ng-if="job.id" sked-popover="true" sked-popover-content="\'Cancel Class\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page" ng-hide="job.isCancelled || !job.isCancellable"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> </button> <button class="slds-button slds-button_icon button-icon_blue" ng-click="$ctrl.undoJobCancellation($index)" ng-if="job.id" sked-popover="true" sked-popover-content="\'Undo Cancellation\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page" ng-show="job.isCancelled && job.originalStatus"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#undo\' | skedSfUrl}}"></use> </svg> </button> </td> </tr> </tbody> </table> </div> </div> <!-- the summary --> <div class="slds-p-horizontal_medium slds-p-vertical_small slds-grow-none slds-shrink-none slds-theme_shade arc-nat-class-types__summary"> <div class="slds-grid slds-grid_pull-padded-large slds-wrap"> <div class="slds-p-horizontal_large class-type-hour__item" ng-repeat="classType in $ctrl.classTypes | orderBy: \'displayOrder\'" ng-class="{\'value-smaller\': classType.scheduledHours < classType.totalHours, \'value-equal\': classType.scheduledHours === classType.totalHours, \'value-bigger\': classType.scheduledHours > classType.totalHours}" ng-show="!classType.isDefault || (classType.scheduledHours || 0) !== 0"> <span class="slds-m-right_small slds-text-color_weak">{{classType.name}}</span> <!-- <span class="class-type-hour__value">{{(classType.scheduledHours)?classType.scheduledHours.toFixed(1):0}}/{{(classType.totalHours || 0).toFixed(1)}}</span> --> <span class="class-type-hour__value" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/nat-job-summary-popover.tpl.html" sked-popover-container=".arc-page">{{classType.scheduledHours | hoursDurationName}}/{{classType.totalHours | hoursDurationName}}</span> </div> </div> </div> <div class="slds-modal__footer slds-grid slds-grid_align-end slds-p-horizontal_medium"> <div> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> Cancel </button> <button class="slds-button slds-button_success" ng-click="$ctrl.saveCourse(ACTION_AFTER_SAVING.ALLOCATE_RESOURCE)" ng-disabled="$ctrl.contentLoading">Save Course &amp; Allocate</button> <button class="slds-button slds-button_brand" ng-click="$ctrl.saveCourse(ACTION_AFTER_SAVING.CLOSE_MODAL)" ng-disabled="$ctrl.contentLoading">Save Course &amp; Close</button> </div> </div> <!-- loading spinner --> <div class="slds-spinner_container" ng-show="$ctrl.contentLoading" style="top: 3rem;bottom: 3rem;border-radius: .25rem"> <div role="status" class="slds-spinner slds-spinner--medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> </div> </section>'),a.put("src/app/edit-nat-job-error-popover.tpl.html",'<div class="arc-nat-job-error-popover"> <div class="slds-popover__body"> <ul class="slds-text-color_error slds-list_dotted"> <li ng-show="job.error.jobDate">Invalid Job Date.</li> <li ng-show="job.error.startTime">Invalid Job Start Time.</li> <li ng-show="job.error.finishTime">Invalid Job Finish Time.</li> <li ng-show="job.error.timeRange">Job Start Time should not be after Finish Time.</li> <li ng-show="job.error.timeInterval">Job Time exceed Maximum Hour per Day ({{$ctrl.natCourse.maximumHoursPerDay || 0}}h) or Course Class Type Total Hours ({{job.classType.totalHours || 0}}h).</li> <li ng-show="job.error.location">Invalid Job Location.</li> <li ng-show="job.error.conflict">Job Date/Time and Location is conflict with other job.</li> <li ng-show="job.error.numberOfStudents">Invalid Number of Students</li> </ul> </div> </div>'),a.put("src/app/error-prompt-template.html",'<div role="alertdialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal--prompt" ng-init="scope=this"> <div class="slds-modal__container"> <div class="slds-modal__header slds-theme--error slds-theme--alert-texture"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closePrompt(scope)"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium" id="prompt-heading-id">Service Unavailable</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p>{{message}}</p> </div> <div class="slds-modal__footer slds-theme--default"> <button class="slds-button slds-button--neutral" ng-click="closePrompt(scope)">Okay</button> </div> </div> </div>'),a.put("src/app/facility-info-popover.tpl.html",'<div class="acr-facility-info-popover"> <div class="slds-popover__body"> <p><strong>{{dataItem.facility.facilityId}}</strong></p> <p class="slds-text-body_small slds-text-color_weak">{{dataItem.facility.notes}}</p> </div> </div>'),a.put("src/app/full-service-allocation-conflict-modal.tpl.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Resource Availability Conflicts</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p class="slds-m-bottom_small"> The following job allocation are conflict with other jobs </p> <table class="slds-table slds-table--bordered slds-table--cell-buffer--small"> <thead> <tr class="slds-text-title--caps"> <th>Job</th> <th>Resource</th> <th>Job Conflict</th> </tr> </thead> <tbody> <tr ng-repeat="item in conflictData "> <td><a ng-href="/{{item.jobId}}" target="_blank">{{item.jobName}}</a></td> <td><a ng-href="/{{item.resourceId}}" target="_blank">{{item.resourceName}}</a></td> <td>{{item.conflictDetails}}</td> </tr> </tbody> </table> <p class="slds-m-top_medium"> Would you like to proceed in saving this course? All conflicting allocations will be removed after saving. </p> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="closeModal(\'cancel\')">No</button> <button class="slds-button slds-button--success" ng-click="closeModal(\'SAVE_AND_ALLOCATE\')">Save &amp; Allocate</button> <button class="slds-button slds-button--brand" ng-click="closeModal(\'SAVE_AND_CLOSE\')" ng-hide="saveAndAllocate">Save &amp; Close</button> </div> </div>'),a.put("src/app/full-service-booking-grid.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-fsbg-page slds-modal_large limit-width-modal" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <div class="slds-grid arc-header-layout slds-grid_vertical-align-center"> <div class="arc-col-title slds-shrink-none slds-grow-none"> <!-- title --> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-icon_container slds-m-right_x-small"> <svg width="32px" height="32px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <h2 class="slds-text-heading_medium slds-hyphenate">Schedule Full Service Training</h2> </div> </div> <div class="arc-col-control"> <!-- filters --> <div class="slds-grid slds-grid_vertical-align-center"> <sked-input type="select" select-options="item.value as item.label for item in CAL_SETTINGS.radiuses" class="slds-m-right_x-small" model="$ctrl.calendar.radius" is-disabled="$ctrl.contentLoading" label="Radius"></sked-input> <sked-input type="select" select-options="item.value as item.label for item in CAL_SETTINGS.intervals" class="slds-m-right_x-small" model="$ctrl.calendar.interval" is-disabled="$ctrl.contentLoading" label="Interval"></sked-input> <sked-multi-picklist select-options="item as item.label for item in $ctrl.configData.employmentTypes" select-all-option="Any" label="Employment Type" model="$ctrl.calendar.employmentTypes" is-readonly="$ctrl.contentLoading" class="slds-m-right_x-small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item.label for item in CAL_SETTINGS.scheduledHours" select-all-option="Any" label="Scheduled Hours" model="$ctrl.calendar.scheduledHours" is-readonly="$ctrl.contentLoading"></sked-multi-picklist> <div class="slds-form-element"> <label class="slds-form-element__label">&nbsp;</label> <div class="slds-m-left_x-small" sked-popover="true" sked-popover-content="\'Reset Filter\'" sked-popover-container=".arc-page" sked-popover-position="top" sked-popover-theme="tooltip"> <button class="slds-button slds-button_icon slds-button_icon-border-filled" ng-click="$ctrl.resetBookingGridFilters()"> <svg class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#refresh\' | skedSfUrl}}"></use> </svg> </button> </div> </div> <div class="slds-form-element slds-col_bump-left"> <label class="slds-form-element__label">Booking Grid Start Date</label> <div class="slds-button-group sked-pagin-group slds-form-element__control"> <button class="slds-button slds-button_icon-border" ng-click="$ctrl.moveCalendarBack()" ng-disabled="$ctrl.contentLoading"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> </button> <sked-input type="date-picker" name="calStartDate" model="$ctrl.calendar.date" is-readonly="$ctrl.contentLoading" class="calendar-date-picker"></sked-input> <button class="slds-button slds-button_icon-border" ng-click="$ctrl.moveCalendarNext()" ng-disabled="$ctrl.contentLoading"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> </button> </div> </div> </div> </div> </div> </header> <div class="slds-modal__content full-height__modal-content" style="position: relative"> <!-- warning bar --> <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning" ng-if="$ctrl.showWarning" style="position: absolute;z-index: 1000"> <span class="slds-assistive-text">warning</span> <span class="slds-icon_container slds-icon-utility-warning slds-m-right_x-small"> <svg class="slds-icon slds-icon_x-small"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <h2>This training event has already been scheduled. All event data including resource allocation will be refreshed if it is rescheduled.</h2> <button class="slds-button slds-button_icon slds-notify__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.showWarning = false"> <svg class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> </div> <!-- loading spinner --> <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner_medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> <div class="slds-grid arc-grid-layout" ng-class="{\'slds-p-top_x-large\': $ctrl.showWarning}"> <!-- left side control panel --> <div class="slds-border_right arc-col-from slds-shrink-none slds-grow-none"> <div style="height: 100%" ng-show="!$ctrl.editingJob"> <!-- tabs --> <div class="slds-tabs_default arc-event-details-tab"> <ul class="slds-tabs_default__nav"> <li class="slds-tabs_default__item slds-grid slds-grid_vertical-align-center slds-border_right" ng-repeat="tab in TABS" ng-class="{\'slds-is-active\': tab === $ctrl.currentTab, \'is-disabled\': tab.isDisabled()}" ng-hide="tab.isHidden()" ng-click="$ctrl.selectTab(tab)"> <a class="slds-tabs_default__link"> <span class="slds-icon_container slds-m-right_xx-small"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#\' + tab.icon | skedSfUrl}}"></use> </svg> </span> <span class="slds-text-title_caps">{{tab.getLabel()}}</span> </a> <div class="tab-error-indicator slds-icon_container" ng-if="tab.isInvalid"> <svg class="slds-icon slds-icon_xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> </svg> </div> </li> </ul> </div> <div class="slds-scrollable_y arc-form__content"> <!-- event details --> <div ng-show="$ctrl.currentTab === TABS.EVENT_DETAILS" style="height: 100%"> <div class="slds-theme_shade slds-p-horizontal_medium slds-p-vertical_small"> <div class="slds-media"> <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-standard-account"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#account\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body"> <p class="slds-text-title_caps slds-line-height_reset">Account</p> <h2 class="slds-text-heading_small slds-m-right_small slds-m-top_xxx-small slds-align-middle slds-truncate">{{$ctrl.job.account.name}}</h2> </div> </div> </div> <div class="slds-p-horizontal_medium slds-p-vertical_small slds-form_compound" ng-form="$ctrl.jobForm"> <section> <div class="slds-form-element__row"> <sked-input type="select" select-options="item as item.label for item in $ctrl.configData.regions" model="$ctrl.job.region" label="Region" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <!-- <sked-input type="select" select-options="item as item.name for item in $ctrl.configData.courseCatalogs" label="Course" name="course" model="$ctrl.job.course" is-required="true" on-change="$ctrl.populateCourseData($ctrl.job.course)" ></sked-input> --> <sked-input-lookup label="Course Catalog" name="courseCatalog" model="$ctrl.job.course" search="$ctrl.searchCourseCatalogs(searchString)" label-field="name" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#article\' | skedSfUrl}}" icon-class="slds-icon-standard-article" is-required="true" is-invalid="$ctrl.jobForm.$submitted && !$ctrl.job.course"></sked-input-lookup> </div> <div class="slds-form-element__row slds-wrap"> <!-- <sked-input-lookup label="Primary Contact" name="primaryContact" model="$ctrl.job.contact" search="$ctrl.searchContacts(searchString)" label-field="name" meta-field="email" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#contact\' | skedSfUrl}}" icon-class="slds-icon-standard-contact" ></sked-input-lookup> --> <div class="slds-form-element slds-lookup" ng-class="{\'slds-is-open\': $ctrl.lookupState.contact.isOpen, \'slds-has-error\': ($ctrl.jobForm.$submitted && !$ctrl.job.contact)}" click-outside="$ctrl.lookupState.contact.isOpen=false;"> <label class="slds-form-element__label"> <abbr class="slds-required" title="required">*</abbr> Primary Contact </label> <div class="slds-form-element__control"> <div class="slds-pill_container" ng-show="$ctrl.job.contact"> <span class="slds-pill slds-size_1-of-1"> <span class="slds-icon_container slds-icon-standard-contact slds-pill__icon_container"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#contact\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Primary Contact</span> </span> <span class="slds-pill__label slds-size_1-of-1 slds-m-left_x-small" title="{{$ctrl.job.contact.firstName + \' \' + $ctrl.job.contact.lastName}}">{{$ctrl.job.contact.firstName + \' \' + $ctrl.job.contact.lastName}}</span> <button class="slds-button slds-button_icon slds-pill__remove" title="Remove" ng-click="$ctrl.job.contact=null;$ctrl.focusInput(\'#lkContact\')"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Remove</span> </button> </span> </div> <div class="slds-input-has-icon slds-input-has-icon_left" ng-show="!$ctrl.job.contact"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> <input type="text" id="lkContact" class="slds-input" ng-focus="$ctrl.lookupState.contact.isOpen=true;$ctrl.searchContacts();" ng-model="$ctrl.lookupState.contact.searchString" ng-model-options="{debounce: 250}" ng-change="$ctrl.searchContacts()"> </div> </div> <!-- lookup menu --> <div class="slds-lookup__menu"> <ul class="slds-lookup__list" role="listbox"> <li role="presentation"> <span class="slds-lookup__item-action slds-lookup__item-action_label slds-has-focus slds-p-vertical_xx-small slds-m-bottom_xx-small" role="option"> <!-- <svg class="slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true">\n                                                                    <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use>\n                                                                </svg>\n                                                                <span class="slds-truncate" title="\'ibm\' in Salesforce">"ibm" in Salesforce</span> --> <button class="slds-button" ng-click="$ctrl.lookupState.contact.isOpen=false;$ctrl.openAddingContactModal()" style="line-height: 1.25rem;width: 100%;text-align: left"> <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use> </svg> Add New Contact </button> </span> </li> <li role="presentation" ng-repeat="item in $ctrl.lookupState.contact.searchResults" ng-click="$ctrl.job.contact=item;$ctrl.lookupState.contact.isOpen=false"> <span class="slds-lookup__item-action slds-media" role="option"> <svg class="slds-icon slds-icon-standard-contact slds-icon_small slds-media__figure" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#contact\' | skedSfUrl}}"></use> </svg> <div class="slds-media__body"> <div class="slds-lookup__result-text">{{item.firstName + \' \' + item.lastName}}</div> <span class="slds-lookup__result-meta slds-text-body_small">{{item.email}}  {{item.phone}}</span> </div> </span> </li> </ul> </div> <!-- end lookup menu --> </div> <div class="slds-text-body_small slds-size_1-of-1 slds-p-left_x-small arc-contact-meta" ng-if="$ctrl.job.contact" style="position:relative"> <div class="slds-grid slds-m-top_xx-small slds-grid_vertical-align-center slds-size_1-of-1"> <svg class="slds-icon slds-icon_xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#email\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left_x-small slds-truncate">{{$ctrl.job.contact.email}}</div> </div> <div class="slds-grid slds-m-top_xx-small slds-grid_vertical-align-center slds-size_1-of-1"> <svg class="slds-icon slds-icon_xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#call\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left_x-small slds-m-top_xxx-small slds-truncate">{{$ctrl.job.contact.phone}}</div> </div> </div> </div> <div class="slds-form-element__row slds-wrap"> <!-- <sked-input type="text" label="Address" name="txtAddress" model="$ctrl.job.address" ></sked-input> --> <sked-input-lookup label="Address" name="lkAddress" model="$ctrl.job.address" search="$ctrl.searchAddresses(searchString)" label-field="fullAddress" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#address\' | skedSfUrl}}" icon-class="slds-icon-standard-address" is-required="true" is-invalid="$ctrl.jobForm.$submitted && !$ctrl.job.address"></sked-input-lookup> <div class="slds-text-body_small slds-size--1-of-1 slds-p-left_x-small arc-address-meta" ng-if="$ctrl.job.address" style="position:relative"> <div class="slds-grid slds-m-top_xx-small slds-grid_vertical-align-center slds-size_1-of-1" ng-if="$ctrl.job.address"> <svg class="slds-icon slds-icon_xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#location\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left_xx-small slds-m-top_xxx-small slds-truncate">{{$ctrl.job.address.latitude}}  {{$ctrl.job.address.longitude}} </div> </div> </div> </div> </section> <section ng-show="$ctrl.job.course"> <div class="slds-form-element__row"> <sked-input-tags label="Resource Attributes Required" name="neededSkills" label-field="label" model="$ctrl.job.neededSkills" search="$ctrl.searchNeededSkills(searchString)" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#quotes\' | skedSfUrl}}" icon-class="slds-icon-standard-quotes"></sked-input-tags> </div> <div class="slds-form-element__row"> <sked-input type="number" label="# Students" name="noStudents" model="$ctrl.job.numberOfStudents" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="# Instructors" name="noInstructors" model="$ctrl.job.numberOfInstructors" min-value="1" is-required="true" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Duration" name="classDuration" model="$ctrl.job.classDuration" model-options="{debounce: 250}" class="slds-size_1-of-3" min-value="1" is-required="true" pattern="INTEGER_PATTERN"></sked-input> <!-- <sked-input type="number" label="# Class Days" name="noClassDays" model="$ctrl.job.numberOfClasses" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> --> </div> <div class="slds-form-element__row"> <sked-input type="number" label="# Breaks" name="noBreaks" model="$ctrl.job.numberOfBreaks" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Break Duration" name="breakDuration" model="$ctrl.job.breakDuration" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> <!-- <sked-input type="number" label="# Class Days" name="noClassDays" model="$ctrl.job.numberOfClasses" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> --> <div class="slds-form-element" style="margin-top: 1.75rem"> <label class="slds-checkbox" for="chkTest"> <input type="checkbox" name="chkTest" id="chkTest" ng-model="$ctrl.job.isTest"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label" style="margin-right: 0">Test?</span> </label> </div> </div> <div class="slds-form-element__row"> <sked-input type="number" label="Set up Time" name="classSetupTime" model="$ctrl.job.classSetupTime" model-options="{debounce: 250}" min-value="0" pattern="INTEGER_PATTERN"></sked-input> <sked-input type="number" label="Pack down Time" name="classPackdownTime" model="$ctrl.job.classPackdownTime" model-options="{debounce: 250}" min-value="0" pattern="INTEGER_PATTERN"></sked-input> </div> <div class="slds-form-element__row"> <!-- <sked-input type="number" label="# Instructors" name="noInstructors" model="$ctrl.job.numberOfInstructors" class="slds-size_1-of-3" pattern="INTEGER_PATTERN"></sked-input> --> <!-- <sked-input type="select" select-options="item.id as item.label for item in []" label="AV Equipment" name="avEquipment" model="$ctrl.job.avEquipment" class="slds-size_2-of-3" ></sked-input> --> <sked-multi-picklist select-options="item as item.label for item in $ctrl.configData.avEquipments" label="AV Equipments" model="$ctrl.job.avEquipments" list-position="right" class="arc-av-equipments"></sked-multi-picklist> </div> <!-- <div class="slds-form-element__row">\n                                            <sked-input-lookup label="Account" name="account" model="$ctrl.job.account" search="$ctrl.searchAccounts(searchString)" label-field="name" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#account\' | skedSfUrl}}" icon-class="slds-icon-standard-account" ></sked-input-lookup>\n                                        </div> --> <div class="slds-form-element__row"> <!-- <sked-input type="text" label="Special Instructions" name="specialInstructions" model="$ctrl.job.specialInstructions" ></sked-input> --> <div class="slds-form-element"> <label class="slds-form-element__label">Special Instructions</label> <div class="slds-form-element__control"> <textarea class="slds-textarea" ng-model="$ctrl.job.specialInstructions" rows="8"></textarea> </div> </div> </div> <!-- <div class="slds-grid_pull-padded-medium slds-theme_shade slds-p-vertical_small slds-p-horizontal_medium slds-m-vertical_small">\n                                            <div class="slds-form-element__control">\n                                                <span class="slds-checkbox">\n                                                    <input type="checkbox" id="chkRecurring" ng-model="$ctrl.job.isRecurring" ng-click="$ctrl.toggleRecurringJob()">\n                                                    <label class="slds-checkbox__label" for="chkRecurring">\n                                                        <span class="slds-checkbox_faux"></span>\n                                                        <span class="slds-form-element__label">Manage Class Schedule</span>\n                                                    </label>\n                                                </span>\n                                            </div>\n                                        </div> --> <!-- <div ng-show="$ctrl.job.isRecurring">\n                                            <div class="slds-form-element__row">\n                                                <!-/- <sked-input type="select" select-options="item as item for item in [\'Weekly\']" label="Repeat" name="cbRepeatPattern" model="$ctrl.job.repeatPattern" ></sked-input> -/->\n                                                <sked-input type="number" label="# Class Days" name="noClassDays" model="$ctrl.job.numberOfClasses" pattern="INTEGER_PATTERN"></sked-input>\n                                                <sked-input type="number" label="Repeat Every (weeks)" name="txtEvery" model="$ctrl.job.every" pattern="INTEGER_PATTERN"></sked-input>\n                                            </div>\n                                            <div class="slds-form-element__row">\n                                                <fieldset class="slds-form-element arc-weekdays-checkboxes" ng-class="{\'slds-has-error\': ($ctrl.jobForm.$submitted && $ctrl.job.weekdays.length===0)}">\n                                                    <legend class="slds-form-element__legend slds-form-element__label">On</legend>\n                                                    <div class="slds-checkbox_button-group">\n                                                        <span class="slds-button slds-checkbox_button" ng-repeat="wd in WEEK_DAYS">\n                                                            <input type="checkbox" id="chk{{wd.label}}" name="checkbox" ng-click="$ctrl.selectWeekDay(wd)" ng-checked="$ctrl.job.weekdays.indexOf(wd) !== -1" ng-disabled="wd.disabled">\n                                                            <label class="slds-checkbox_button__label" ng-attr-for="chk{{wd.label}}">\n                                                                <span class="slds-checkbox_faux">{{wd.label}}</span>\n                                                            </label>\n                                                        </span>\n                                                    </div>\n                                                </fieldset>\n                                            </div>\n                                            <div class="slds-form-element__row slds-p-top_x-small">\n                                                <div class="slds-form-element">\n                                                    <div class="slds-form-element__control">\n                                                        <span class="slds-checkbox">\n                                                            <input type="checkbox" id="chkSkipHolidays" ng-model="$ctrl.job.skipHolidays">\n                                                            <label class="slds-checkbox__label" for="chkSkipHolidays">\n                                                                <span class="slds-checkbox_faux"></span>\n                                                                <span class="slds-form-element__label">Skip Holidays?</span>\n                                                            </label>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                                <!-/- <div class="slds-form-element">\n                                                    <div class="slds-form-element__control">\n                                                        <span class="slds-checkbox">\n                                                            <input type="checkbox" id="chkSkipWeekends" ng-model="$ctrl.job.skipWeekends" ng-click="$ctrl.toggleSkipWeekends()">\n                                                            <label class="slds-checkbox__label" for="chkSkipWeekends">\n                                                                <span class="slds-checkbox_faux"></span>\n                                                                <span class="slds-form-element__label">Skip Weekend?</span>\n                                                            </label>\n                                                        </span>\n                                                    </div>\n                                                </div> -/->\n                                            </div>\n                                        </div> --> </section> </div> </div> <!-- selected slots --> <div ng-show="$ctrl.currentTab === TABS.SELECTED_SLOTS" style="height: 100%"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-theme_shade slds-p-vertical_small slds-p-horizontal_medium"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkMultiDays" ng-model="$ctrl.isMultiDays"> <label class="slds-checkbox__label" for="chkMultiDays"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Multi Days</span> </label> </span> </div> <div class="slds-grid slds-grid_vertical-align-center"> <label class="slds-text-body_small slds-text-color_weak slds-m-right_x-small"># Class Days: </label> <span ng-class="{\'slds-text-color_error\':(!$ctrl.isMultiDays && $ctrl.job.timeSlots.length !== DEFAULT_NUMBER_OF_CLASSES) || ($ctrl.isMultiDays && $ctrl.job.timeSlots.length !== $ctrl.job.numberOfClasses)}">{{$ctrl.job.timeSlots.length}} / </span> <!-- <span ng-show="!$ctrl.isMultiDays">/1</span><span ng-show="$ctrl.isMultiDays">/{{$ctrl.job.numberOfClasses || 0}}</span> --> <sked-input type="number" name="noClassDays" model="$ctrl.job.numberOfClasses" pattern="INTEGER_PATTERN" class="slds-m-left_xx-small arc-number-of-classes" ng-show="$ctrl.isMultiDays"></sked-input> <sked-input type="number" name="noClassDaysDefault" model="DEFAULT_NUMBER_OF_CLASSES" class="slds-m-left_xx-small arc-number-of-classes" ng-show="!$ctrl.isMultiDays" is-readonly="true"></sked-input> </div> </div> <table class="slds-table slds-table_bordered slds-table_cell-buffer arc-selected-slots-table" ng-if="$ctrl.job.timeSlots.length > 0"> <thead> <tr class="slds-text-title--caps"> <th>Date</th> <th>Start Time</th> <th>End Time</th> <th style="width: 3rem"></th> </tr> </thead> <tbody> <tr ng-repeat="slot in $ctrl.job.timeSlots"> <td>{{slot.slotDate | date: COMMON_DATE_FORMAT}}</td> <td>{{slot.slotTime | skedTimeName}}</td> <td>{{$ctrl.calculateSlotEndTime(slot.slotTime) | skedTimeName}}</td> <td class="slds-text-align_right"> <button class="slds-button slds-button_icon button-icon_red" ng-click="$ctrl.removeSelectedSlot($index)" sked-popover="true" sked-popover-content="\'Remove Slot\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> </button> </td> </tr> </tbody> </table> <div ng-if="!$ctrl.job.timeSlots || $ctrl.job.timeSlots.length === 0" class="slds-align_absolute-center arc-slots-list_empty"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <span ng-if="!$ctrl.job.courseCatalog">No timeslot selected.</span> </div> </div> <!-- jobs list --> <div ng-show="$ctrl.currentTab === TABS.JOBS" style="height: 100%"> <div class="slds-grid slds-grid_align-spread slds-theme_shade slds-p-vertical_small slds-p-horizontal_medium slds-border_bottom"> <div> <label class="slds-text-body_small slds-text-color_weak slds-m-right_x-small">Scheduled Jobs </label> </div> <div> {{$ctrl.scheduledJobs.length || 0}} <!-- <button class="slds-button slds-button_icon button-icon_blue" ng-click="$ctrl.addNewJob()" sked-popover="true" sked-popover-content="\'Add New Job\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page">\n                                            <svg class="slds-button__icon" >\n                                                <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use>\n                                            </svg>\n                                        </button> --> </div> </div> <div class="arc-job-list"> <ul> <li ng-repeat="job in $ctrl.scheduledJobs" class="slds-grid slds-border_bottom"> <div class="slds-grow slds-p-around_x-small slds-p-left_medium"> <p class="job-info"> <span ng-if="job.id"><a ng-href="/{{job.id}}" target="_blank">{{job.name}}</a><span>  </span><span ng-style="{color: $ctrl.configData.jobStatusSettings[job.jobStatus].backgroundColor}">{{job.jobStatus}}</span></span> <span ng-if="!job.id" class="new-job">New Job</span> </p> <p class="job-date-time-info"><span class="">{{job.jobDate | date : COMMON_DATE_FORMAT}}</span><span>  </span><span>{{job.startTime | skedTimeName}} - {{job.finishTime | skedTimeName}}</span></p> <div class="slds-p-top_xxx-small"> <ul class="slds-grid slds-grid_wrap job-assigned-resources"> <li ng-repeat="allocation in job.allocations track by $index" class="slds-m-top_x-small slds-m-right_x-small"> <div class="job-resource-slot" sked-popover="true" sked-popover-content="allocation.resource.name" sked-popover-container=".arc-page"> <img ng-src="{{allocation.resource.photoUrl || ((allocation.resource.isSubcontractor)?DEFAULT_SUBC_PHOTO_URL:DEFAULT_PHOTO_URL)}}" class="slds-avatar slds-avatar_small"> </div> <!-- <div class="not-meet-filters-indicator" ng-class="{\'is-unavailable\': job.unavailableResourceIds.indexOf(allocation.resource.id) > -1}" ng-if="job.availableResourceIds.indexOf(allocation.resource.id) === -1 || job.unavailableResourceIds.indexOf(allocation.resource.id) > -1"></div> --> </li> </ul> </div> </div> <div class="slds-grid slds-grid_vertical slds-p-bottom_small"> <div class="slds-p-top_x-small slds-p-horizontal_medium"> <button class="slds-button slds-button_icon" ng-click="$ctrl.rescheduleJob(job)" sked-popover="true" sked-popover-content="\'Reschedule Job\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page" ng-disabled="!$ctrl.jobCanBeRescheduled(job)"> <svg class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#edit\' | skedSfUrl}}"></use> </svg> </button> </div> <!-- <div class="slds-p-top_x-small slds-p-horizontal_medium" ng-if="job.id" >\n                                                    <button class="slds-button slds-button_icon button-icon_red" ng-click="$ctrl.cancelJob(job)" sked-popover="true" sked-popover-content="\'Cancel Job\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page" ng-disabled="!$ctrl.jobCanBeRescheduled(job)">\n                                                        <svg class="slds-button__icon" >\n                                                            <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use>\n                                                        </svg>\n                                                    </button>\n                                                </div>\n                                                <div class="slds-p-top_x-small slds-p-horizontal_medium" ng-if="!job.id">\n                                                    <button class="slds-button slds-button_icon button-icon_red" ng-click="$ctrl.deleteJob(job)" sked-popover="true" sked-popover-content="\'Delete Job\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page">\n                                                        <svg class="slds-button__icon" >\n                                                            <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use>\n                                                        </svg>\n                                                    </button>\n                                                </div> --> </div> </li> </ul> </div> </div> </div> </div> <div style="height: 100%" ng-show="$ctrl.editingJob"> <div class="slds-theme_shade slds-p-horizontal_medium slds-p-vertical_small arc-reschedule-job-info slds-border_bottom"> <div class="slds-media"> <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-standard-event"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body"> <p class="slds-text-title_caps slds-line-height_reset">{{$ctrl.editingJob.id?\'Re-schedule Job\':\'Create Job\'}}</p> <h2 class="slds-text-heading_small slds-m-right_small slds-m-top_xxx-small slds-align-middle slds-truncate">{{($ctrl.editingJob.id)?$ctrl.editingJob.name:\'New Job\'}}</h2> </div> </div> <p class="slds-text-body_small slds-m-top_xx-small" ng-style="{color: $ctrl.configData.jobStatusSettings[$ctrl.editingJob.jobStatus].backgroundColor}">{{$ctrl.editingJob.jobStatus}}</p> <p class="job-date-time-info slds-text-body_small"> <span>{{$ctrl.editingJob.jobDate | date : COMMON_DATE_FORMAT}}</span><span>  </span><span>{{$ctrl.editingJob.startTime | skedTimeName}} - {{$ctrl.editingJob.finishTime | skedTimeName}}</span> </p> </div> <div class="slds-theme_shade slds-p-vertical_small slds-p-horizontal_medium slds-grid slds-grid_align-spread"> <div class="slds-text-color_weak">Allocated Resources</div> <div>{{$ctrl.editingJob.allocations.length}}</div> </div> <div class="slds-scrollable_y arc-reschedule-job-resources slds-border_bottom slds-border_top slds-p-bottom_small"> <ul> <li class="slds-p-horizontal_medium slds-p-vertical_small slds-border_bottom slds-grid slds-grid_vertical-align-center" ng-repeat="allocation in $ctrl.editingJob.allocations track by $index"> <div class="slds-media slds-grow"> <div class="slds-media__figure"> <img ng-src="{{allocation.resource.photoUrl || ((allocation.resource.isSubcontractor)?DEFAULT_SUBC_PHOTO_URL:DEFAULT_PHOTO_URL)}}" class="slds-avatar slds-avatar_medium"> </div> <div class="slds-media__body"> <p>{{allocation.resource.name}}</p> <p class="slds-text-color_weak slds-line-height_reset">{{allocation.resource.category}}</p> </div> </div> <div class="arc-resource-availability" ng-class="{\'is-unavailable\': $ctrl.editingJob.unavailableResourceIds.indexOf(allocation.resource.id) > -1, \'is-available\': $ctrl.editingJob.availableResourceIds.indexOf(allocation.resource.id) > -1}">{{($ctrl.editingJob.availableResourceIds.indexOf(allocation.resource.id) > -1)?\'Available\':(($ctrl.editingJob.unavailableResourceIds.indexOf(allocation.resource.id) > -1)?\'Unavailable\':\'Not Meet Filters\')}}</div> </li> </ul> </div> <div class="arc-job-reschedule-action slds-grid slds-grid_align-end slds-p-around_medium"> <button class="slds-button slds-button_brand" ng-click="$ctrl.acceptReschedulingJob()">Done</button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.cancelReschedulingJob()">Cancel</button> </div> </div> </div> <!-- the booking grid --> <div class="arc-col-calendar"> <div class="slds-border_bottom arc-calendar__header slds-p-top_medium slds-p-horizontal_medium"> <table class="slds-text-body_small arc-calendar-table__header"> <tr> <td class="arc-col__header-time">{{$ctrl.bookingGridData.timezone}}</td> <td class="arc-col__header" ng-repeat="day in $ctrl.calendar.days"><strong>{{day.date | date: \'EEE\'}}</strong><br>{{day.date | date: COMMON_DATE_FORMAT}}</td> </tr> </table> </div> <div class="slds-scrollable_y arc-calendar__content slds-p-bottom_medium slds-p-horizontal_medium"> <table class="slds-text-body_small arc-calendar-table__body" ng-if="$ctrl.calendar.timeslots.length > 0 && $ctrl.calendar.data.length > 0"> <tr> <td class="arc-calendar-col__time">&nbsp;</td> <td class="arc-calendar-col" ng-repeat="day in $ctrl.calendar.days"></td> </tr> <tr ng-repeat="timeslot in $ctrl.calendar.timeslots"> <td class="arc-calendar-col__time"> <span class="time-info" ng-class="{\'timeslot-label_small\':timeslot.timePart}">{{timeslot.name}}</span> </td> <td class="arc-calendar-col" ng-repeat="day in $ctrl.calendar.data"> <!-- disabled slot --> <div class="slds-grid slds-grid_align-spread arc-shift-block unavailable-block slds-grid_vertical-align-center" ng-if="(!day.timeslots[timeslot.start] || day.timeslots[timeslot.start].isDisabled || (!$ctrl.bookSubcontractedResource && day.timeslots[timeslot.start].noOfAvailableResources <= 0)) && !$ctrl.scheduledJobsMap[day.dateIso+timeslot.start]" ng-class="{\'is-selected\': ($ctrl.job.timeSlots.indexOf(day.timeslots[timeslot.start]) !== -1)}"> <div class="slds-checkbox_add-button arc-add-button" ng-if="$ctrl.job.timeSlots.indexOf(day.timeslots[timeslot.start]) !== -1"> <input type="checkbox" class="slds-assistive-text" checked> <label class="slds-checkbox_faux"></label> </div> <div class="arc-availability-info" ng-if="$ctrl.job.timeSlots.indexOf(day.timeslots[timeslot.start]) !== -1"> unavailable </div> </div> <!-- available slot --> <div class="slds-grid slds-grid_align-spread arc-shift-block available-block slds-grid_vertical-align-center" ng-if="(!!day.timeslots[timeslot.start] && !day.timeslots[timeslot.start].isDisabled && day.timeslots[timeslot.start].noOfAvailableResources > 0) || (!!$ctrl.scheduledJobsMap[day.dateIso+timeslot.start] && !($ctrl.bookSubcontractedResource && !day.timeslots[timeslot.start].isDisabled && (!day.timeslots[timeslot.start] || day.timeslots[timeslot.start].noOfAvailableResources <= 0 )))" ng-class="{\'is-selected\': ($ctrl.job.timeSlots.indexOf(day.timeslots[timeslot.start]) !== -1 || !!$ctrl.scheduledJobsMap[day.dateIso+timeslot.start]), \'not-meet-resource-requirement-block\': day.timeslots[timeslot.start].noOfAvailableResources < ($ctrl.job.numberOfInstructors || 0), \'resources-conflict\': (day.timeslots[timeslot.start].isResourcesConflict || ($ctrl.scheduledJobsMap[day.dateIso+timeslot.start] && $ctrl.scheduledJobsMap[day.dateIso+timeslot.start].isConflict)), \'is-readonly\': day.timeslots[timeslot.start].isReadOnly, \'is-active\': ($ctrl.editingJob && $ctrl.editingJob === $ctrl.scheduledJobsMap[day.dateIso+timeslot.start])}" ng-click="$ctrl.selectTimeSlot(day.timeslots[timeslot.start])"> <div class="slds-checkbox_add-button arc-add-button" ng-if="!$ctrl.scheduledJobsMap[day.dateIso+timeslot.start]"> <input type="checkbox" class="slds-assistive-text" ng-checked="$ctrl.job.timeSlots.indexOf(day.timeslots[timeslot.start]) !== -1"> <label class="slds-checkbox_faux"></label> </div> <!-- <div class="slds-checkbox_add-button arc-add-button" ng-if="$ctrl.scheduledJobsMap[day.dateIso+timeslot.start] && !$ctrl.scheduledJobsMap[day.dateIso+timeslot.start].id">\n                                            <input type="checkbox" class="slds-assistive-text" ng-checked="true">\n                                            <label class="slds-checkbox_faux"></label>\n                                        </div> --> <div class="slds-m-horizontal_x-small arc-scheduled-job-name" ng-if="$ctrl.scheduledJobsMap[day.dateIso+timeslot.start]"> {{$ctrl.scheduledJobsMap[day.dateIso+timeslot.start].name}} </div> <div class="arc-availability-info"> <div class="no-available-rs" ng-if="!day.timeslots[timeslot.start].noOfAvailableResourcesOverFifty">{{day.timeslots[timeslot.start].noOfAvailableResources}}</div> <div class="no-qualified-rs" ng-if="!day.timeslots[timeslot.start].noOfQualifiedResourcesOverFifty">{{day.timeslots[timeslot.start].noOfQualifiedResources}}</div> <div class="no-available-rs" ng-if="day.timeslots[timeslot.start].noOfAvailableResourcesOverFifty">50<sup>+</sup></div> <div class="no-qualified-rs" ng-if="day.timeslots[timeslot.start].noOfQualifiedResourcesOverFifty">50<sup>+</sup></div> </div> </div> <!-- subconstractor only slot --> <div class="slds-grid slds-grid_align-spread arc-shift-block subcontractor-only-block slds-grid_vertical-align-center" ng-if="$ctrl.bookSubcontractedResource && !day.timeslots[timeslot.start].isDisabled && (!day.timeslots[timeslot.start] || day.timeslots[timeslot.start].noOfAvailableResources <= 0 )" ng-class="{\'is-selected\': $ctrl.job.timeSlots.indexOf(day.timeslots[timeslot.start]) !== -1 || !!$ctrl.scheduledJobsMap[day.dateIso+timeslot.start], \'is-readonly\': day.timeslots[timeslot.start].isReadOnly, \'is-active\': ($ctrl.editingJob && $ctrl.editingJob === $ctrl.scheduledJobsMap[day.dateIso+timeslot.start])}" ng-click="$ctrl.selectTimeSlot(day.timeslots[timeslot.start])"> <div class="slds-checkbox_add-button arc-add-button" ng-if="!$ctrl.scheduledJobsMap[day.dateIso+timeslot.start]"> <input type="checkbox" class="slds-assistive-text" ng-checked="$ctrl.job.timeSlots.indexOf(day.timeslots[timeslot.start]) !== -1"> <label class="slds-checkbox_faux"></label> </div> <div class="slds-m-horizontal_x-small arc-scheduled-job-name" ng-if="$ctrl.scheduledJobsMap[day.dateIso+timeslot.start]"> {{$ctrl.scheduledJobsMap[day.dateIso+timeslot.start].name}} </div> <div class="arc-availability-info"> subc<br>only </div> </div> </td> </tr> </table> <div ng-if="!$ctrl.calendar.timeslots || $ctrl.calendar.timeslots.length === 0 || !$ctrl.calendar.data || $ctrl.calendar.data.length === 0" class="slds-align_absolute-center arc-calendar_empty"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <span ng-if="!$ctrl.job.courseCatalog">Please select <strong>Region</strong>, <strong>Course Catalog</strong> and <strong>Address</strong> for loading booking grid data.</span> </div> </div> </div> </div> </div> <footer class="slds-modal__footer"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center"> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkBookSubcontrator" ng-model="$ctrl.bookSubcontractedResource" ng-disabled="!$ctrl.bookingGridData || $ctrl.bookingGridData.noOfSubcontractors <= 0"> <label class="slds-checkbox__label" for="chkBookSubcontrator"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Book Subcontracted Resource ({{$ctrl.bookingGridData.noOfSubcontractors || 0}})</span> </label> </span> </div> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkShow24Hours" ng-model="$ctrl.show24Hours" ng-disabled="$ctrl.contentLoading"> <label class="slds-checkbox__label" for="chkShow24Hours"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Show 24 Hours</span> </label> </span> </div> </div> <div> <button class="slds-button slds-button_success" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.ALLOCATE_RESOURCE)" ng-disabled="$ctrl.contentLoading || !$ctrl.job.region || !$ctrl.job.course || $ctrl.editingJob">Save &amp; Allocate</button> <button class="slds-button slds-button_brand" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.CLOSE_MODAL)" ng-disabled="$ctrl.contentLoading || !$ctrl.job.region || !$ctrl.job.course || $ctrl.editingJob">Save &amp; Close</button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">Cancel</button> </div> </div> </footer> </div> </section>'),
a.put("src/app/full-service-create-contact.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" ng-init="scope=this"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="closeModal()"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading_medium slds-hyphenate">Create New Contact</h2> </header> <div class="slds-modal__content" style="position: relative"> <div class="slds-spinner_container" ng-show="loading"> <div role="status" class="slds-spinner slds-spinner--medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> <div class="slds-theme_shade slds-border-bottom slds-p-around_medium"> <div class="slds-media"> <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-standard-account"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#account\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body"> <p class="slds-text-title_caps slds-line-height_reset">Account</p> <h2 class="slds-text-heading_small slds-m-right_small slds-m-top_xxx-small slds-align-middle slds-truncate">{{account.name}}</h2> </div> </div> </div> <div class="slds-form slds-form_compound slds-p-around_medium" ng-form="contactDetailsForm"> <div class="slds-form-element__row"> <sked-input type="text" label="First Name" name="txtFirstName" model="contact.firstName"></sked-input> <sked-input type="text" label="Last Name" name="txtLastName" model="contact.lastName" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <sked-input type="text" label="Email" name="txtEmail" model="contact.email" is-required="true" pattern="/^.+\\@.+\\..+$/"></sked-input> <sked-input type="text" label="Phone" name="txtPhone" model="contact.phone" is-required="true" pattern="/^[\\d\\-\\(\\)\\s]{8,16}$/"></sked-input> </div> </div> </div> <footer class="slds-modal__footer"> <button class="slds-button slds-button_neutral" ng-click="closeModal()">Cancel</button> <button class="slds-button slds-button_brand" ng-click="createContact(contact, scope)" ng-disabled="loading">Save</button> </footer> </div> </section>'),a.put("src/app/full-service-resource-allocation.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-fsbg-page slds-modal_large slds-fade-in-open" ng-init="scope=this;onModalOpen(scope)"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="closeModal()"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading_medium slds-hyphenate">Allocate Resources</h2> </header> <div class="slds-modal__content full-height__modal-content" style="position: relative"> <div class="slds-spinner_container" ng-show="loading"> <div role="status" class="slds-spinner slds-spinner--medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> <div class="slds-grid arc-grid-layout"> <div class="slds-border_right slds-scrollable_y arc-col-resources slds-shrink-none slds-grow-none"> <!-- table --> <table class="slds-table arc-resources-table" ng-show="jobAllocations.length > 0"> <tbody> <tr class="slds-hint-parent" ng-repeat="allocation in jobAllocations" ng-class="{\'slds-is-selected\':selectedJobAllocations.indexOf(allocation) > -1}"> <td class="col-check"> <span class="slds-checkbox"> <input type="checkbox" name="options" ng-attr-id="chkSelectJobAllocation{{$index}}" ng-click="toggleJobAllocationSelection(scope, allocation)" ng-checked="selectedJobAllocations.indexOf(allocation) > -1"> <label class="slds-checkbox__label" ng-attr-for="chkSelectJobAllocation{{$index}}"> <span class="slds-checkbox--faux"></span> </label> </span> </td> <td class="col-resource-info"> <div class="slds-media slds-m-top--xx-small"> <div class="slds-media__figure"> <img ng-src="{{allocation.resource.photoUrl || DEFAULT_PHOTO_URL}}" class="slds-avatar--large"> </div> <div class="slds-media__body"> <p class="slds-truncate arc-resource-name"><a ng-href="/{{allocation.resource.id}}" ng-attr-title="{{allocation.resource.name}}" target="_blank">{{allocation.resource.name}}</a></p> <p class="slds-text-color--weak slds-text-body--small">{{allocation.resource.tags.length || 0}} Resource Attributes</p> <ul class="arc-rating-star__container"> <li class="arc-rating-star" ng-repeat="star in getArray(allocation.resource.rating) track by $index"></li> </ul> </div> </div> </td> <td class="slds-text-align--center col-template-info" ng-class="{\'four-letters\':(allocation.resource.employmentType.length >= 4)}"> {{allocation.resource.employmentType}} </td> <td class="slds-text-align--center col-travel-info"> <div class="slds-grid slds-grid_vertical"> <div class="slds-col col-travel-time slds-border_bottom"> <div class="info-value">{{allocation.travelTimeFrom}}</div> <div class="info-unit">mins</div> </div> <div class="slds-col col-travel-distance"> <div class="info-value">{{allocation.distance}}</div> <div class="info-unit">kms</div> </div> </div> </td> <td class="slds-text-align--center col-available-classes-info"> <div class="info-value">{{allocation.noOfAvailableClasses}}</div> <div class="info-unit">classes</div> </td> </tr> </tbody> </table> <!-- empty data --> <div ng-if="!loading && (!jobAllocations || jobAllocations.length === 0)" class="slds-text-align--center slds-m-top--large arc-resources--empty"> <span class="slds-icon_container slds-m-right--x-small"> <svg class="slds-icon slds-icon--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <span>There is no available resource found.</span> </div> </div> <div class="arc-col-map" style="position: relative"> <div id="map" style="width: 100%;height: 100%"></div> </div> </div> </div> <footer class="slds-modal__footer slds-grid slds-grid_vertical-align-center slds-grid_align-end"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkNotifyResourceOnSave" ng-model="notifyResourceOnSave"> <label class="slds-checkbox__label" for="chkNotifyResourceOnSave"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Notify Resource on Save</span> </label> </span> </div> <button class="slds-button slds-button_neutral" ng-click="closeModal()">Cancel</button> <button class="slds-button slds-button_brand" ng-click="allocateResources(scope)" ng-disabled="loading">Save</button> </footer> </div> </section>'),a.put("src/app/job-allocation.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-ja-page slds-modal_large limit-width-modal" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-icon_container slds-m-right_x-small"> <svg width="32px" height="32px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-grow slds-text-align_center"><h2 class="slds-text-heading_medium slds-hyphenate">Allocate Resources</h2></div> </div> </header> <div class="slds-modal__content full-height__modal-content" style="position: relative"> <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner_medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> <div class="slds-grid arc-grid-layout"> <div class="slds-col arc-grid-layout__col col-resources slds-shrink-none slds-grow-none slds-border_right slds-grid slds-grid_vertical"> <div class="slds-shrink-none slds-grow-none slds-page-header slds-p-horizontal_medium slds-p-vertical_small"> <div class="slds-grid slds-grid_pull-padded-xx-small" style="margin-bottom: 1px"> <sked-input class="slds-col slds-size_1-of-2 slds-p-horizontal_xx-small" type="select" select-options="region as region.label for region in $ctrl.configData.regions" label="Region" name="region" model="$ctrl.region"></sked-input> <sked-input class="slds-col slds-size_1-of-2 slds-p-horizontal_xx-small" type="select" select-options="option as option.label for option in RESOURCE_ORDER_OPTIONS" label="Order By" name="orderBy" model="$ctrl.orderBy"></sked-input> </div> </div> <div class="slds-shrink-none slds-grow-none slds-p-horizontal_medium slds-p-vertical_small slds-border_bottom"> <div class="slds-input-has-icon slds-input-has-icon--left"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> <input type="text" class="slds-input" ng-model="$ctrl.nameFilterString" placeholder="Search Resources"> </div> </div> <div class="slds-scrollable_y slds-grow"> <ul class="arc-resources-list" ng-if="($ctrl.scheduleAllocation.resources | filter : {name: $ctrl.nameFilterString, region: {id: (($ctrl.region.id === ALL_REGIONS_VALUE)?\'\':$ctrl.region.id)}}).length > 0"> <!-- <li class="slds-grid slds-grid_align-spread arc-resource-item slds-border_bottom" ng-attr-resource-id="{{resource.id}}" ng-repeat="resource in $ctrl.resources | filter : {name: $ctrl.nameFilterString}" > --> <li class="slds-grid slds-grid_align-spread arc-resource-item slds-border_bottom" draggable-resource="resource-job" resource="resource" ng-repeat="resource in $ctrl.scheduleAllocation.resources | orderBy: $ctrl.orderBy.field | filter : {name: $ctrl.nameFilterString, region: {id: (($ctrl.region.id === ALL_REGIONS_VALUE)?\'\':$ctrl.region.id)}}"> <div class="slds-col slds-truncate slds-grow slds-p-horizontal_medium slds-p-vertical_x-small"> <div class="slds-media arc-resource-info"> <div class="slds-media__figure"> <img ng-src="{{resource.photoUrl || ((resource.isSubcontractor)?DEFAULT_SUBC_PHOTO_URL:DEFAULT_PHOTO_URL)}}" class="slds-avatar slds-avatar_large"> </div> <div class="slds-media__body"> <p class="arc-resource-name slds-truncate"><a ng-href="/{{resource.id}}" ng-attr-title="{{resource.name}}" target="_blank">{{resource.name}}</a></p> <p class="slds-text-color--weak slds-text-body--small arc-resource-category-info">{{resource.category}}</p> <p class="slds-text-color--weak slds-text-body--small arc-resource-region-info" ng-if="$ctrl.region.id===\'all\'">{{resource.region.name}}</p> <p class="slds-text-color--weak slds-text-body--small arc-attribute-count-info" sked-popover="resource.tags.length > 0" sked-popover-position="right" sked-popover-template="src/app/resource-tags-popover.tpl.html" sked-popover-container=".arc-ja-page" ng-if="!resource.isSubcontractor">{{resource.tags.length || 0}} Resource Attributes</p> <ul class="arc-rating-star__container"> <li class="arc-rating-star" ng-repeat="star in $ctrl.getArray(resource.rating) track by $index"></li> </ul> </div> </div> </div> <div class="slds-col_bump-left slds-grid slds-border_left arc-info--employment-type slds-no-flex" ng-class="{\'slds-text-body_small\': resource.employmentType.length > 3}"> <div class="slds-align_absolute-center">{{resource.employmentType.substr(0, 4)}}</div> </div> <div class="slds-grid slds-border_left arc-info--available-hours slds-no-flex"> <div class="slds-align_absolute-center"> <div class="slds-text-align_center slds-text-color--weak" ng-if="!resource.isSubcontractor"> <!-- <div class="assigned-hours-value" ng-class="{\'color-green\': resource.assignedHourPercentage < 70, \'color-yellow\': (resource.assignedHourPercentage >= 70 && resource.assignedHourPercentage < 80)}">{{(resource.assignedMinutes && resource.assignedMinutes > 0 && resource.assignedMinutes%1 !== 0)?resource.assignedMinutes.toFixed(2):(resource.assignedMinutes || 0)}}</div>\n                                            <div class="weekly-hours-value">/{{resource.weeklyHours || 0}}</div> --> <div class="assigned-hours-value" ng-class="{\'color-green\': resource.assignedHourPercentage < 70, \'color-yellow\': (resource.assignedHourPercentage >= 70 && resource.assignedHourPercentage < 80)}">{{(resource.assignedMinutes/60) | hoursDurationName}}</div> <div class="weekly-hours-value">/{{(resource.weeklyMinutes / 60) | hoursDurationName}}</div> </div> <div class="slds-text-align_center" ng-if="resource.isSubcontractor"><div class="weekly-hours-value na-value">N/A</div></div> </div> </div> <div class="slds-grid slds-grid_vertical slds-border_left arc-info--travel-info slds-text-align_center slds-no-flex"> <div class="col-travel-time slds-border_bottom slds-grow"> <div class="info-value" ng-class="{\'value_small\': resource.firstJobAllocation.travelTimeFrom > 999999}">{{resource.firstJobAllocation.travelTimeFrom || 0}}</div> <div class="info-unit">mins</div> </div> <div class="col-travel-distance slds-grow"> <!-- <div class="info-value" ng-class="{\'value_small\': resource.firstJobAllocation.distance.length > 6}">{{resource.firstJobAllocation.distance || 0}}</div> --> <div class="info-value">{{(resource.firstJobAllocation.distance && resource.firstJobAllocation.distance > 0 && resource.firstJobAllocation.distance%1 !== 0)?resource.firstJobAllocation.distance.toFixed(2):(resource.firstJobAllocation.distance || 0)}}</div> <div class="info-unit">miles</div> </div> </div> <div class="slds-grid slds-border_left arc-info--available-classes slds-no-flex"> <div class="slds-align_absolute-center"> <div class="slds-text-align_center"> <div class="info-value" ng-class="{\'value_small\': ((resource.noOfAvailableClasses || 0) + \'/\' + ($ctrl.scheduleAllocation.numberOfClasses || 0)).length > 6}" ng-if="!resource.isSubcontractor">{{resource.noOfAvailableClasses || 0}}/{{$ctrl.scheduleAllocation.numberOfClasses || 0}}</div> <div class="info-value" ng-if="resource.isSubcontractor">all</div> <div class="info-unit">classes</div> </div> </div> </div> </li> </ul> <div ng-if="($ctrl.scheduleAllocation.resources | filter : {name: $ctrl.nameFilterString, region: {id: (($ctrl.region.id === ALL_REGIONS_VALUE)?\'\':$ctrl.region.id)}}).length <= 0" class="slds-text-align_center slds-m-top_large arc-resources-list_empty"> <span class="slds-icon_container slds-m-right--x-small"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> </span> <span>No available resource found...</span> </div> </div> </div> <div class="slds-col slds-grid slds-grid_vertical arc-grid-layout__col col-jobs slds-truncate"> <div class="slds-shrink-none slds-grow-none slds-page-header arc-job-header slds-p-vertical_large" droppable-job="resource-job" accepted-resources="$ctrl.scheduleAllocation.resources" on-drop="$ctrl.assignResource(resource)"> <div class="slds-grid slds-grid_pull-padded"> <div class="slds-size_2-of-5 slds-p-horizontal_small"> <div class="slds-media"> <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-standard-article"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#article\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body"> <h2 class="slds-text-heading_small slds-truncate">{{($ctrl.scheduleType === SCHEDULE_TYPE.CEP)?$ctrl.scheduleAllocation.className:$ctrl.scheduleAllocation.courseCatalogName}}&nbsp;</h2> <!-- <h2 class="slds-text-heading_small slds-truncate">Spanish Adult and Pediatric CPR/AED (RCP y DEA peditricos y para adultos) &nbsp;</h2> --> <p class="slds-text-body_small slds-line-height_reset" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.FULL_SERVICE ">{{$ctrl.scheduleAllocation.numberOfStudents || 0}} students  {{$ctrl.scheduleAllocation.numberOfInstructors || 0}} instructors  {{$ctrl.scheduleAllocation.numberOfClasses || 0}} classes</p> <p class="slds-text-body_small slds-line-height_reset" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.NAT">{{$ctrl.scheduleAllocation.numberOfStudents || 0}} students  {{$ctrl.scheduleAllocation.numberOfClasses || 0}} classes</p> <p class="slds-text-body_small slds-line-height_reset" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.COMMUNITY">{{$ctrl.scheduleAllocation.numberOfInstructors || 0}} instructors  {{$ctrl.scheduleAllocation.numberOfClasses || 0}} classes</p> <p class="slds-text-body_small slds-line-height_reset" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.CEP">{{$ctrl.scheduleAllocation.noOfEvaluators || 0}} evaluators</p> </div> </div> </div> <div class="slds-size_2-of-5 slds-p-horizontal_small"> <div class="slds-media"> <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-standard-event"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> </span> </div> <div class="slds-media__body" ng-if="$ctrl.scheduleType !== SCHEDULE_TYPE.NAT &&$ctrl.scheduleAllocation.weekdays && $ctrl.scheduleAllocation.weekdays.length > 1"> <h2 class="slds-text-heading_small slds-truncate weekdays-pattern">Weekly: {{$ctrl.scheduleAllocation.weekdays.join(\' - \')}}</h2> <p class="slds-text-body_small slds-line-height_reset">{{$ctrl.scheduleAllocation.classStartDateIso | date : COMMON_DATE_FORMAT}}  {{$ctrl.scheduleAllocation.classStartTime | skedTimeName}}  {{$ctrl.scheduleAllocation.classDuration || 0}} mins</p> </div> <div class="slds-media__body" ng-if="$ctrl.scheduleType !== SCHEDULE_TYPE.NAT && (!$ctrl.scheduleAllocation.weekdays || $ctrl.scheduleAllocation.weekdays.length < 1)"> <h2 class="slds-text-heading_small slds-truncate weekdays-pattern">{{$ctrl.scheduleAllocation.classStartDateIso | date : COMMON_DATE_FORMAT}}</h2> <p class="slds-text-body_small slds-line-height_reset">{{$ctrl.scheduleAllocation.classStartTime | skedTimeName}}  {{$ctrl.scheduleAllocation.classDuration || 0}} mins</p> </div> <div class="slds-media__body" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.NAT"> <h2 class="slds-text-heading_small slds-truncate weekdays-pattern">Start From: {{$ctrl.scheduleAllocation.startMonth | date : \'MMMM, yyyy\'}}</h2> <p class="slds-text-body_small slds-line-height_reset">{{$ctrl.scheduleAllocation.courseClassDays}}</p> </div> </div> </div> <div class="slds-size_1-of-5 slds-p-horizontal_small slds-grid slds-grid_align-end slds-col_bump-left"> <div class="slds-button-group" role="group"> <button class="slds-button slds-button_icon slds-button_icon-border" ng-class="{\'slds-is-selected\': $ctrl.contentMode === CONTENT_MODE.JOBS}" title="Jobs" ng-click="$ctrl.switchContent(CONTENT_MODE.JOBS)"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Jobs</span></button> <button class="slds-button slds-button_icon slds-button_icon-border" ng-class="{\'slds-is-selected\': $ctrl.contentMode === CONTENT_MODE.MAP}" title="Map" ng-click="$ctrl.switchContent(CONTENT_MODE.MAP)"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#location\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Map</span></button> </div> </div> </div> <!-- <div class="slds-m-top_small assign-all__marker">\n                            Drop here to assign resource to all possible jobs\n                        </div> --> </div> <div class="slds-grid slds-grid_vertical slds-scrollable_y" ng-if="$ctrl.contentMode === CONTENT_MODE.JOBS"> <div class="slds-shrink-none slds-grow-none slds-p-horizontal_small slds-p-top_medium"> <table class="slds-table slds-table_bordered slds-table_cell-buffer ach-job-table ach-job-table-table__header"> <thead> <tr class="slds-text-title_caps"> <th width="160px" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.NAT">Class Type</th> <th width="120px">Job Date</th> <th width="100px">Start Time</th> <!-- <th width="96px">Duration</th> --> <th width="240px" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.COMMUNITY"> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-form-element__control slds-m-right_small"> <span class="slds-checkbox"> <input type="checkbox" id="chkAllLocationConfirmed" ng-checked="$ctrl.isAllLocationsConfirmed()" ng-click="$ctrl.confirmAllJobLocations()"> <label class="slds-checkbox__label" for="chkAllLocationConfirmed"><span class="slds-checkbox_faux"></span></label> </span> </div> <div>Location</div> </div> </th> <th width="170px" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.CEP"> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-form-element__control slds-m-right_small"> <span class="slds-checkbox"> <input type="checkbox" id="chkAllReadyToPublish" ng-checked="$ctrl.isAllReadyToPublish()" ng-click="$ctrl.setAllReadyToPublish()"> <label class="slds-checkbox__label" for="chkAllReadyToPublish"><span class="slds-checkbox_faux"></span></label> </span> </div> <div>Ready to Publish</div> </div> </th> <th width="140px">Status</th> <th>Allocated Resources</th> <!-- <th width="100px" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.NAT">Dispatch</th> --> </tr> </thead> </table> </div> <div class="slds-scrollable_y slds-p-horizontal_small slds-p-bottom_medium arc-job-container"> <table class="slds-table slds-table_bordered slds-table_cell-buffer ach-job-table ach-job-table__body" ng-class="{\'resources-assigning-error\': $ctrl.savedWithoutFullyAssigned && $ctrl.notifyResourceOnSave}"> <tbody> <tr class="slds-hint-parent" droppable-job="resource-job" accepted-resources="job.availableResources" job="job" job-can-be-assigned="$ctrl.jobCanBeAllocated(job)" on-drop="$ctrl.assignResource(resource, job)" ng-repeat="job in $ctrl.scheduleAllocation.jobs" ng-class="{\'is-locked\': !$ctrl.jobCanBeAllocated(job)}"> <td width="160px" style="position: relative" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.NAT"> <div class="class-type-marker" ng-style="{\'background-color\': job.classTypeColor}"></div> {{job.classTypeName}} </td> <td width="120px">{{job.jobDate | date : COMMON_DATE_FORMAT}}</td> <td width="100px">{{job.startTime | skedTimeName}}</td> <!-- <td width="96px">{{job.duration || 0}} mins</td> --> <td width="240px" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.COMMUNITY"> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-form-element__control slds-m-right_small" style="margin-top: -.125rem"> <span class="slds-checkbox"> <input type="checkbox" id="chkLocationConfirmed_{{$index}}" ng-model="job.locationConfirmed" ng-disabled="!$ctrl.jobCanBeEdited(job)"> <label class="slds-checkbox__label" for="chkLocationConfirmed_{{$index}}"><span class="slds-checkbox_faux"></span></label> </span> </div> <div class="slds-grow slds-truncate" ng-attr-title="{{job.facilityName}}">{{job.facilityName}}</div> </div> </td> <td width="170px" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.CEP"> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-form-element__control slds-m-right_small" style="margin-top: -.125rem"> <span class="slds-checkbox"> <input type="checkbox" id="chkReadyToPublish_{{$index}}" ng-model="job.readyToPublish" ng-disabled="!$ctrl.jobCanBeEdited(job)"> <label class="slds-checkbox__label" for="chkReadyToPublish_{{$index}}"><span class="slds-checkbox_faux"></span></label> </span> </div> </div> </td> <td width="140px" ng-style="{color: job.statusTextColor}">{{job.jobStatus}}</td> <td> <ul class="arc-allocated-resource__container"> <li ng-repeat="resource in job.assignedResources track by $index"> <div class="arc-available-slot" sked-dropdown-menu-ignored="!$ctrl.jobCanBeAllocated(job)" sked-dropdown-menu="src/app/assigned-resource-menu.tpl.html" sked-dropdown-menu-container=".arc-job-container" sked-popover="true" sked-popover-content="resource.name" sked-popover-container=".arc-ja-page"> <img ng-src="{{resource.photoUrl || ((resource.isSubcontractor)?DEFAULT_SUBC_PHOTO_URL:DEFAULT_PHOTO_URL)}}" class="slds-avatar slds-avatar_medium"> <span class="team-leader__indicator" ng-if="resource.id === job.teamLeadResourceId"></span> </div> </li> <li ng-if="job.numberOfResourcesRequired > -1 && job.numberOfResourcesRequired > job.assignedResources.length" ng-repeat="unassignedSlot in $ctrl.getArray(job.numberOfResourcesRequired - job.assignedResources.length) track by $index"> <div class="arc-available-slot empty-slot"></div> </li> <li ng-if="job.numberOfResourcesRequired === -1" ng-repeat="unassignedSlot in $ctrl.getArray(1) track by $index"> <div class="arc-available-slot empty-slot">...</div> </li> </ul> </td> <!-- <td width="100px" style="text-align: center" ng-if="$ctrl.scheduleType === SCHEDULE_TYPE.NAT">\n                                            <div class="slds-form-element__control">\n                                                <span class="slds-checkbox">\n                                                    <input type="checkbox" ng-attr-id="chkDispatched_{{$index}}" ng-model="job.dispatch">\n                                                    <label class="slds-checkbox__label" ng-attr-for="chkDispatched_{{$index}}">\n                                                        <span class="slds-checkbox_faux"></span>\n                                                    </label>\n                                                </span>\n                                            </div>\n                                        </td> --> </tr> </tbody> </table> </div> </div> <div ng-if="$ctrl.contentMode === CONTENT_MODE.MAP" class="arc-gg-map"> <ui-gmap-google-map center="$ctrl.map.center" zoom="$ctrl.map.zoom"> <!-- <ui-gmap-marker ng-if="$ctrl.map.markers.schedule" idKey="\'jobMarker\'" coords="$ctrl.map.markers.schedule"></ui-gmap-marker> --> <ui-gmap-markers models="$ctrl.map.markers.resources" coords="\'coords\'" icon="\'icon\'"> <ui-gmap-markers models="$ctrl.map.markers.jobs" coords="\'coords\'"> </ui-gmap-markers></ui-gmap-markers></ui-gmap-google-map> </div> </div> </div> </div> <footer class="slds-modal__footer slds-grid slds-grid_vertical-align-center slds-grid_align-spread"> <div> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'back\')" ng-if="$ctrl.allowGoingBack">Back</button> </div> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkNotifyResourceOnSave" ng-model="$ctrl.notifyResourceOnSave"> <label class="slds-checkbox__label" for="chkNotifyResourceOnSave"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Notify Resource on Save</span> </label> </span> </div> <button class="slds-button slds-button_brand" ng-click="$ctrl.saveAllocations()" ng-disabled="$ctrl.contentLoading">Save</button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">Cancel</button> </div> </footer> </div> </section>'),a.put("src/app/job-block-menu.tpl.html",'<div class="slds-dropdown slds-dropdown_right"> <ul class="slds-dropdown__list" role="menu"> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canEdit" ng-class="{\'is-disabled\': !$ctrl.jobCanBeEdited(job)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.editJob(dataItem.facility, job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#edit\' | skedSfUrl}}"></use> </svg> Edit Job </span> </a> </li> <li class="slds-dropdown__item"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" target="_blank" ng-href="https://app.skedulo.com/#/job/{{job.id}}" ng-click="$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> View in Skedulo </span> </a> </li> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canDelete" ng-class="{\'is-disabled\': !$ctrl.jobCanBeDeleted(job)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.deleteJob(job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> Delete Job </span> </a> </li> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canCancel" ng-class="{\'is-disabled\': !$ctrl.jobCanBeCanceled(job)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.cancelJob(job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#ban\' | skedSfUrl}}"></use> </svg> Cancel Job </span> </a> </li> <!--ng-class="{\'is-disabled\': job.isQueued === true}" --> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canEdit" ng-class="{\'is-disabled\': !$ctrl.jobCanBeAllocated(job)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.allocateResources(job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#resource_capacity\' | skedSfUrl}}"></use> </svg> Allocate Resources </span> </a> </li> <li class="slds-has-divider_top-space" ng-if="!!$ctrl.configData.userPermission.canCreate" role="separator"></li> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canCreate" ng-class="{\'is-disabled\': !$ctrl.jobCanBeCreated(day.date)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.createNewJob(dataItem.facility, day);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use> </svg> Create New Job </span> </a> </li> </ul> </div>'),
a.put("src/app/nat-class-confirm-step.tpl.html",'<div class="slds-p-around_medium" ng-init="$ctrl.initClassesConfirmStep()"> <table class="slds-table slds-table_bordered arc-nat-job-confirm__table" style="table-layout: fixed"> <thead> <tr class="slds-text-title--caps"> <td style="width: 1.75rem"></td> <td style="width: 12rem">Class Type</td> <td style="width: 11.5rem">Start Date</td> <td style="width: 9rem">Start Time</td> <td style="width: 9rem">End Time</td> <td>Location</td> <td style="width: 7rem">No. Students</td> <td style="width: 9rem"># Instructors</td> <td style="width: 3.5rem"></td> </tr> </thead> <tbody> <tr ng-repeat="job in $ctrl.suggestedCourse.jobs" ng-class="{\'new-job\': job.isCloned === true}"> <td style="padding-left: .75rem"> <div class="class-type-marker" ng-style="{\'background-color\': $ctrl.configData.natClassTypeSettings[job.classType.name].backgroundColor}" ng-show="job.classType"></div> <span class="slds-icon_container slds-m-bottom_xx-small" ng-if="job.error.isInvalid" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/edit-nat-job-error-popover.tpl.html"> <svg class="slds-icon slds-icon--xx-small slds-icon-text-error" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> </td> <td> <sked-input type="select" select-options="item as item.name for item in $ctrl.classTypes" model="job.classType" on-change="$ctrl.handleClassTypeChanged(job)"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.jobDate || job.error.conflict)}"> <sked-input type="date-picker" model="job.jobDate" date-options="$ctrl.jobStartDateOptions"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.startTime || job.error.conflict || job.error.timeRange || job.error.timeInterval)}"> <sked-input type="time-picker" model="job.startTime" time-options="$ctrl.jobTimeOptions"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.finishTime || job.error.conflict || job.error.timeRange || job.error.timeInterval)}"> <sked-input type="time-picker" model="job.finishTime" time-options="$ctrl.jobTimeOptions"></sked-input> </td> <td ng-class="{\'slds-has-error\': (job.error.location || job.error.conflict)}"> <sked-input type="select" select-options="item as item.name for item in $ctrl.facilities" model="job.facility" ng-attr-title="{{job.facility.name}}"></sked-input> </td> <td ng-class="{\'slds-has-error\': job.error.numberOfStudents}"> <sked-input type="number" name="noOfStudents_{{$index}}" model="job.numberOfStudents" min-value="1" pattern="INTEGER_PATTERN" on-change="$ctrl.handleNumberOfStudentsChanged(job)" on-blur="$ctrl.handleNumberOfStudentsBlurred($index)"></sked-input> </td> <!-- <td><sked-input type="number" name="noOfInstructors_{{$index}}" model="job.numberOfInstructors" min-value="1" pattern="INTEGER_PATTERN" ></sked-input></td> --> <td class="slds-text-align_right"><div class="slds-p-horizontal_medium">{{job.numberOfInstructors}}</div></td> <td> <button class="slds-button slds-button_icon button-icon_blue" ng-click="$ctrl.splitJobRecord($index)" sked-popover="true" sked-popover-content="\'Split Class\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#socialshare\' | skedSfUrl}}"></use> </svg> </button> <button class="slds-button slds-button_icon button-icon_red" ng-click="$ctrl.removeJobRecord($index)" sked-popover="true" sked-popover-content="\'Remove Class\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> </button> </td> </tr> </tbody> </table> </div>'),a.put("src/app/nat-class-types-step.tpl.html",'<div class="slds-p-around_medium" ng-init="$ctrl.initClassTypesStep()"> <table class="slds-table slds-table_bordered slds-table_cell-buffer" style="table-layout: fixed"> <thead> <tr class="slds-text-title--caps"> <td style="width: 12rem">Class Type</td> <td style="width: 10rem">Total Hours</td> <td style="width: 10rem">Start Time</td> <td style="width: 10rem">End Time</td> <td>Location</td> <td style="width: 10rem"># Instructors</td> <td style="width: 7rem">Same Day?</td> </tr> </thead> <tbody> <tr ng-repeat="classType in $ctrl.classTypes | filter: {isDefault: \'!true\'} | orderBy: \'displayOrder\'"> <td> <div class="class-type-marker" ng-style="{\'background-color\': $ctrl.configData.natClassTypeSettings[classType.name].backgroundColor}"></div> {{classType.name}} </td> <td>{{classType.totalHours}}</td> <td ng-class="{\'slds-has-error\': classType.startTimeError || classType.timeRangeError || classType.timeIntervalError}"> <sked-input type="time-picker" model="classType.startTime" ng-if="classType.totalHours > 0"></sked-input> <span ng-if="classType.totalHours <= 0">N/A</span> </td> <td ng-class="{\'slds-has-error\': classType.endTimeError || classType.timeRangeError || classType.timeIntervalError}"> <sked-input type="time-picker" model="classType.endTime" ng-if="classType.totalHours > 0"></sked-input> <span ng-if="classType.totalHours <= 0">N/A</span> </td> <td ng-class="{\'slds-has-error\': (classType.locationError && classType.totalHours > 0 && !classType.facility)}"> <sked-input type="select" select-options="item as item.name for item in $ctrl.facilities" model="classType.facility" ng-if="classType.totalHours > 0" is-required="true" ng-attr-title="{{classType.facility.name}}"></sked-input> <span ng-if="classType.totalHours <= 0">N/A</span> </td> <!-- <td><sked-input type="number" name="noOfInstructors" model="classType.numberOfInstructors" min-value="1" pattern="INTEGER_PATTERN" ></sked-input></td> --> <td>{{classType.numberOfInstructors}}</td> <td> <div class="slds-grid slds-grid_vertical-align-center" ng-if="!$first"> <div class="slds-form-element__control slds-m-right_small" style="margin-top: -.125rem"> <span class="slds-checkbox"> <input type="checkbox" id="chkSameDay_{{$index}}" ng-model="classType.canBeSameDay"> <label class="slds-checkbox__label" for="chkSameDay_{{$index}}"><span class="slds-checkbox_faux"></span></label> </span> </div> </div> </td> </tr> </tbody> </table> <div class="slds-m-top_medium slds-grid slds-grid_pull-padded-x-small"> <sked-input type="number" label="Maximum Hours per Day" name="maxHoursPerDay" model="$ctrl.natCourse.maximumHoursPerDay" min-value="1" pattern="DECIMAL_PATTERN" is-required="true" class="slds-size_1-of-4 slds-p-horizontal_x-small"></sked-input> <sked-input type="number" label="Class Set up Time (min)" name="classSetupTime" model="$ctrl.natCourse.classSetupTime" min-value="0" pattern="INTEGER_PATTERN" class="slds-size_1-of-4 slds-p-horizontal_x-small"></sked-input> <sked-input type="number" label="Class Pack down Time (min)" name="classPackdownTime" model="$ctrl.natCourse.classPackdownTime" min-value="0" pattern="INTEGER_PATTERN" class="slds-size_1-of-4 slds-p-horizontal_x-small"></sked-input> </div> </div>'),a.put("src/app/nat-course-allocation-conflict-modal.tpl.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Resource Availability Conflicts</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p class="slds-m-bottom_small"> The following job allocation are conflict with other jobs </p> <table class="slds-table slds-table--bordered slds-table--cell-buffer--small"> <thead> <tr class="slds-text-title--caps"> <th>Job</th> <th>Resource</th> <th>Job Conflict</th> </tr> </thead> <tbody> <tr ng-repeat="item in conflictData "> <td><a ng-href="/{{item.jobId}}" target="_blank">{{item.jobName}}</a></td> <td><a ng-href="/{{item.resourceId}}" target="_blank">{{item.resourceName}}</a></td> <td>{{item.conflictDetails}}</td> </tr> </tbody> </table> <p class="slds-m-top_medium"> Would you like to proceed in saving this course? All conflicting allocations will be removed after saving. </p> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="closeModal(\'cancel\')">No</button> <button class="slds-button slds-button--success" ng-click="closeModal(\'SAVE_AND_ALLOCATE\')">Save &amp; Allocate</button> <button class="slds-button slds-button--brand" ng-click="closeModal(\'SAVE_AND_CLOSE\')" ng-hide="saveAndAllocate">Save &amp; Close</button> </div> </div>'),a.put("src/app/nat-course-change-future-dates-modal.tpl.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="closeModal(\'CANCEL\')"> <svg class="slds-button__icon slds-button__icon_large"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> </button> <h2 class="slds-text-heading_medium">Change Future Classes?</h2> </div> <div class="slds-modal__content slds-p-around_medium"> <p class="slds-m-bottom_small"> Do you wish to move all future classes in this course by the same period of time? </p> <fieldset class="slds-form-element"> <legend class="slds-form-element__legend slds-form-element__label">Choose shifting method that will be applied for future classes</legend> <div class="slds-form-element__control"> <span class="slds-radio" ng-show="classPattern"> <input type="radio" id="radShiftByPattern" name="shiftOption" value="SHIFT_BY_PATTERN" ng-model="shiftOption"> <label class="slds-radio__label" for="radShiftByPattern"> <span class="slds-radio_faux"></span> <span class="slds-form-element__label">Shift by Pattern: <strong>{{classPattern}}</strong></span> </label> </span> <span class="slds-radio"> <input type="radio" id="radShiftByDays" name="shiftOption" value="SHIFT_BY_DAYS" ng-model="shiftOption"> <label class="slds-radio__label" for="radShiftByDays"> <span class="slds-radio_faux"></span> <span class="slds-form-element__label">Shift by Days: <strong>{{dayDiff}} days</strong></span> </label> </span> </div> </fieldset> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button_brand" ng-click="closeModal(shiftOption)">Yes, Shift All Future Classes</button> <button class="slds-button slds-button_success" ng-click="closeModal(\'NO_SHIFT\')">No, Change This Class Only</button> <button class="slds-button slds-button_neutral" ng-click="closeModal(\'CANCEL\')">Cancel</button> </div> </div>'),a.put("src/app/nat-course-class-types-hours-confirm-modal.tpl.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Course Class Types Hours Mismatch</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p class="slds-m-bottom_small"> The total hours for following class type(s) are not match the total course hours: </p> <table class="slds-table slds-table--bordered slds-table--cell-buffer--small arc-class-types-confirm__table"> <thead> <tr class="slds-text-title--caps"> <th>Class Type</th> <th>Scheduled Hours</th> <th>Course Total Hours</th> </tr> </thead> <tbody> <tr ng-repeat="item in conflictData" class="class-type-hour__item" ng-class="{\'value-smaller\': item.scheduledHours < item.totalHours, \'value-equal\': item.scheduledHours === item.totalHours, \'value-bigger\': item.scheduledHours > item.totalHours}"> <td>{{item.name}}</td> <td class="class-type-hour__value">{{item.scheduledHours | hoursDurationName}}</td> <td class="class-type-hour__value">{{item.totalHours | hoursDurationName}}</td> </tr> </tbody> </table> <p class="slds-m-top_small"> Would you like to proceed saving this course? </p> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="closeModal(\'cancel\')">No</button> <button class="slds-button slds-button--brand" ng-click="closeModal(\'confirmed\')">Yes</button> </div> </div>'),a.put("src/app/nat-course-details-modal.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal slds-modal_large arc-page arc-csc-page limit-width-modal" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-icon_container slds-m-right_x-small"> <svg width="32px" height="32px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-grow slds-text-align_center"><h2 class="slds-text-heading_medium slds-hyphenate">{{STEPS[$ctrl.activeStepIndex].title}}</h2></div> </div> </div> <div class="slds-modal__content" style="position: relative"> <div ng-include="STEPS[$ctrl.activeStepIndex].templateUrl"></div> </div> <!-- confirmation step summary --> <div class="slds-p-horizontal_medium slds-p-vertical_small slds-grow-none slds-shrink-none slds-theme_shade arc-nat-class-types__summary" ng-if="$ctrl.activeStepIndex===3"> <div class="slds-grid slds-grid_pull-padded-large slds-wrap"> <div class="slds-p-horizontal_large class-type-hour__item" ng-repeat="classType in $ctrl.classTypes | orderBy: \'displayOrder\'" ng-class="{\'value-smaller\': classType.scheduledHours < classType.totalHours, \'value-equal\': classType.scheduledHours === classType.totalHours, \'value-bigger\': classType.scheduledHours > classType.totalHours}" ng-show="!classType.isDefault || (classType.scheduledHours || 0) !== 0"> <span class="slds-m-right_small slds-text-color_weak">{{classType.name}}</span> <!-- <span class="class-type-hour__value">{{(classType.scheduledHours)?classType.scheduledHours.toFixed(1):0}}/{{(classType.totalHours || 0).toFixed(1)}}</span> --> <span class="class-type-hour__value" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/nat-job-summary-popover.tpl.html" sked-popover-container=".arc-page">{{classType.scheduledHours | hoursDurationName}}/{{classType.totalHours | hoursDurationName}}</span> </div> </div> </div> <div class="slds-modal__footer slds-grid slds-grid_align-spread slds-p-horizontal_medium"> <div class="slds-align_absolute-center arc-progress-bar"> <div class="slds-progress slds-progress_shade slds-order_3"> <ol class="slds-progress__list"> <li class="slds-progress__item" ng-repeat="step in STEPS" ng-class="{\'slds-is-active\': ($index === $ctrl.activeStepIndex), \'slds-is-completed\': ($index < $ctrl.activeStepIndex) }"> <button class="slds-button slds-progress__marker" ng-if="$index >= $ctrl.activeStepIndex" sked-popover="true" sked-popover-content="step.title" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> <span class="slds-assistive-text">{{step.title}}</span> </button> <button class="slds-button slds-button_icon slds-progress__marker slds-progress__marker_icon" ng-if="$index < $ctrl.activeStepIndex" sked-popover="true" sked-popover-content="step.title + \' - Completed\'" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#success\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">{{step.title}} - Completed</span> </button> </li> </ol> <div class="slds-progress-bar slds-progress-bar_x-small"> <span class="slds-progress-bar__value" ng-style="{width: (($ctrl.activeStepIndex / (STEPS.length - 1)) * 100) + \'%\'};"> <span class="slds-assistive-text">Progress: 0%</span> </span> </div> </div> </div> <div> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> Cancel </button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.goPreviousStep()" ng-if="$ctrl.activeStepIndex > 0" ng-disabled="$ctrl.contentLoading" sked-popover="true" sked-popover-content="\'Back: \' + STEPS[$ctrl.activeStepIndex - 1].title" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> Back </button> <button class="slds-button slds-button_brand" ng-click="$ctrl.goNextStep()" ng-if="$ctrl.activeStepIndex < (STEPS.length - 1)" ng-disabled="$ctrl.contentLoading" sked-popover="true" sked-popover-content="\'Next: \' + STEPS[$ctrl.activeStepIndex + 1].title" sked-popover-theme="tooltip" sked-popover-container=".arc-page"> Next <svg class="slds-button__icon slds-button__icon_right" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> </button> <!-- <button class="slds-button slds-button_brand" ng-click="" ng-if="$ctrl.activeStepIndex >= (STEPS.length - 1)" ng-disabled="$ctrl.contentLoading">\n					<svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">\n						<use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#check\' | skedSfUrl}}"></use>\n					</svg> Done\n				</button> --> <button class="slds-button slds-button_success" ng-click="$ctrl.saveCourse(ACTION_AFTER_SAVING.ALLOCATE_RESOURCE)" ng-if="$ctrl.activeStepIndex >= (STEPS.length - 1)" ng-disabled="$ctrl.contentLoading">Generate Course &amp; Allocate</button> <button class="slds-button slds-button_brand" ng-click="$ctrl.saveCourse(ACTION_AFTER_SAVING.CLOSE_MODAL)" ng-if="$ctrl.activeStepIndex >= (STEPS.length - 1)" ng-disabled="$ctrl.contentLoading">Generate Course &amp; Close</button> </div> </div> <!-- loading spinner --> <div class="slds-spinner_container" ng-show="$ctrl.contentLoading" style="top: 3rem;bottom: 3rem;border-radius: .25rem"> <div role="status" class="slds-spinner slds-spinner--medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> </div> </section>'),a.put("src/app/nat-course-details-step.tpl.html",'<div class="slds-p-around_medium slds-grid slds-grid_pull-padded" ng-form="$ctrl.natCourseDetailsForm"> <!-- column 1 --> <section class="slds-form_compound slds-size_1-of-3 slds-p-horizontal_small"> <div class="slds-form-element__row"> <sked-input-lookup label="Course Catalog" name="courseCatalog" model="$ctrl.natCourse.course" search="$ctrl.searchCourseCatalogs(searchString)" label-field="name" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#article\' | skedSfUrl}}" icon-class="slds-icon-standard-article" is-required="true" is-invalid="$ctrl.natCourseDetailsForm.$submitted && !$ctrl.natCourse.course"></sked-input-lookup> </div> <div class="slds-form-element__row"> <sked-input type="text" label="Course Name" is-required="true" model="$ctrl.natCourse.courseName" name="txtCourseName"></sked-input> </div> <div class="slds-form-element__row"> <sked-input type="select" select-options="item.id as item.name for item in $ctrl.configData.jobTypes" label="Type" name="jobType" model="$ctrl.natCourse.jobType" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <sked-input-tags label="Attributes (Tags)" name="neededSkills" label-field="label" model="$ctrl.natCourse.neededSkills" search="$ctrl.searchNeededSkills(searchString)" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#quotes\' | skedSfUrl}}" icon-class="slds-icon-standard-quotes"></sked-input-tags> </div> <div class="slds-form-element__row"> <sked-input type="month-picker" month-options="$ctrl.startMonthPickerOptions" label="Start Month" name="startMonth" model="$ctrl.natCourse.startMonth" is-required="true"></sked-input> </div> </section> <!-- column 2 --> <section class="slds-form_compound slds-size_2-of-3 slds-p-horizontal_small"> <div class="slds-form-element__row"> <div class="slds-form-element"> <label class="slds-form-element__label">Special Instructions</label> <div class="slds-form-element__control"> <textarea class="slds-textarea" ng-model="$ctrl.natCourse.specialInstructions"></textarea> </div> </div> </div> <div class="slds-form-element__row"> <sked-input type="select" select-options="item as item.label for item in $ctrl.configData.regions" label="Region" name="region" model="$ctrl.natCourse.region" is-required="true"></sked-input> <sked-input type="number" label="Maximum No. of Students" name="noOfEnrolledStudents" model="$ctrl.natCourse.numberOfStudents" min-value="1" pattern="INTEGER_PATTERN" is-required="true"></sked-input> </div> </section> </div>'),a.put("src/app/nat-course-info-popover.tpl.html",'<div class="acr-nat-course-info-popover"> <div class="slds-popover__body" ng-if="dataItem.natGroup.status !== JOB_STATUS.CANCELLED"> <dl class="slds-list_horizontal slds-text-body--small slds-wrap"> <dt class="slds-item_label slds-text-color_weak slds-truncate">Start Date</dt> <dd class="slds-item_detail">{{dataItem.natGroup.firstJob.jobDate | date : COMMON_DATE_FORMAT}}  {{dataItem.natGroup.firstJob.startTime | skedTimeName}} - {{dataItem.natGroup.firstJob.finishTime | skedTimeName}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Finish Date</dt> <dd class="slds-item_detail">{{dataItem.natGroup.lastJob.jobDate | date : COMMON_DATE_FORMAT}}  {{dataItem.natGroup.lastJob.startTime | skedTimeName}} - {{dataItem.natGroup.lastJob.finishTime | skedTimeName}}</dd> </dl> </div> <div class="slds-popover__body" ng-if="dataItem.natGroup.status === JOB_STATUS.CANCELLED"> <div class="slds-text-color_error">This course has been cancelled.</div> </div> </div>'),a.put("src/app/nat-course-menu.tpl.html",'<div class="slds-dropdown slds-dropdown_right"> <ul class="slds-dropdown__list" role="menu"> <li class="slds-dropdown__item" ng-class="{\'is-disabled\': !$ctrl.courseCanBeEdited(dataItem.natGroup)}" ng-if="!!$ctrl.configData.userPermission.canEdit"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.editNatCourse(dataItem);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#edit\' | skedSfUrl}}"></use> </svg> Edit Course </span> </a> </li> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canEdit" ng-class="{\'is-disabled\': !$ctrl.jobCanBeAllocated(dataItem.natGroup.firstJob)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.allocateResources(dataItem.natGroup.firstJob);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#resource_capacity\' | skedSfUrl}}"></use> </svg> Allocate Resources </span> </a> </li> <li class="slds-dropdown__item" ng-class="{\'is-disabled\': !$ctrl.courseCanBeCancelled(dataItem.natGroup)}" ng-if="!!$ctrl.configData.userPermission.canCancel"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.cancelNatCourse(dataItem);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> Cancel Course </span> </a> </li> </ul> </div>'),a.put("src/app/nat-job-block-menu.tpl.html",'<div class="slds-dropdown slds-dropdown_right"> <ul class="slds-dropdown__list" role="menu"> <li class="slds-dropdown__item" ng-class="{\'is-disabled\': !$ctrl.jobCanBeEdited(job)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-if="!!$ctrl.configData.userPermission.canEdit" ng-click="$ctrl.editJob(job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#edit\' | skedSfUrl}}"></use> </svg> Edit Job </span> </a> </li> <li class="slds-dropdown__item"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" target="_blank" ng-href="https://app.skedulo.com/#/job/{{job.id}}" ng-click="$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> View in Skedulo </span> </a> </li> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canDelete" ng-class="{\'is-disabled\': !$ctrl.jobCanBeDeleted(job)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.deleteJob(job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#delete\' | skedSfUrl}}"></use> </svg> Delete Job </span> </a> </li> <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canCancel" ng-class="{\'is-disabled\': !$ctrl.jobCanBeCanceled(job)}"> <a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.cancelJob(job);$dropdownMenu.hideDropdownMenu()"> <span class="slds-truncate"> <svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#ban\' | skedSfUrl}}"></use> </svg> Cancel Job </span> </a> </li> <!--ng-class="{\'is-disabled\': job.isQueued === true}" --> <!-- <li class="slds-dropdown__item" ng-if="!!$ctrl.configData.userPermission.canEdit" ng-class="{\'is-disabled\': !$ctrl.jobCanBeAllocated(job)}">\n			<a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.allocateResources(job);$dropdownMenu.hideDropdownMenu()">\n				<span class="slds-truncate">\n					<svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true">\n						<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#resource_capacity\' | skedSfUrl}}"></use>\n					</svg> Allocate Resources\n				</span>\n			</a>\n		</li> --> <!-- <li class="slds-has-divider_top-space" role="separator"></li>\n		<li class="slds-dropdown__item" ng-class="{\'is-disabled\': !$ctrl.jobCanBeCreated(day.date)}">\n			<a role="menuitemcheckbox" aria-checked="true" tabindex="0" ng-click="$ctrl.createNewJob(dataItem.natGroup || dataItem.natGroupRecord.natGroup, dataItem.facility, day);$dropdownMenu.hideDropdownMenu()">\n				<span class="slds-truncate">\n					<svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-m-right_x-small" aria-hidden="true">\n						<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use>\n					</svg> Create New Job\n				</span>\n			</a>\n		</li> --> </ul> </div>'),a.put("src/app/nat-job-details-modal.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-csc-page" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <div class="slds-grid slds-grid_vertical-align-center"> <div class="slds-icon_container slds-m-right_x-small"> <svg width="32px" height="32px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="#fff"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-grow slds-text-align_center"><h2 class="slds-text-heading_medium slds-hyphenate">{{($ctrl.pageMode === PAGE_MODE.EDIT)?(\'Edit Job - \' + $ctrl.job.name):\'Create New Job\'}}</h2></div> </div> </header> <div class="slds-modal__content" style="position: relative"> <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner_medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> <div class="slds-p-around_medium slds-grid slds-grid_pull-padded" ng-form="$ctrl.jobForm"> <!-- column 1 --> <section class="slds-form_compound slds-size_1-of-1 slds-p-horizontal_small"> <!-- <div class="slds-form-element__row">\n                        <sked-input type="text" label="Class Name" name="className" model="$ctrl.job.className" is-required="true" ></sked-input>\n                    </div> --> <!-- remove by ARC-202 --> <!-- <div class="slds-form-element__row">\n                        <sked-input-lookup label="Course Catalog" name="courseCatalog" model="$ctrl.job.course" search="$ctrl.searchCourseCatalogs(searchString)" label-field="name" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#article\' | skedSfUrl}}" icon-class="slds-icon-standard-article" is-required="true" is-invalid="$ctrl.jobForm.$submitted && !$ctrl.job.course" is-readonly="$ctrl.pageMode === PAGE_MODE.EDIT"></sked-input-lookup>\n                    </div>\n                    <div class="slds-form-element__row slds-wrap">\n                        <sked-input type="select" select-options="item as item.name for item in $ctrl.facilities" label="Facility" name="jobFacility" model="$ctrl.job.facility" is-required="true" ></sked-input>\n                        <div class="slds-text-body--small slds-size--1-of-1 slds-p-left--xx-small arc-csc-form-meta" ng-if="$ctrl.job.facility" style="position:relative;">\n                            <div class="slds-grid slds-m-top--xx-small slds-grid--vertical-align-center slds-size--1-of-1" ng-if="$ctrl.job.facility.address">\n                                <svg class="slds-icon slds-icon--xx-small " aria-hidden="true"> \n                                    <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#checkin\' | skedSfUrl}}"></use> \n                                </svg> \n                                <div class="slds-m-left--xx-small slds-truncate">{{$ctrl.job.facility.address.fullAddress}}</div>\n                            </div>\n                        </div>\n                    </div> \n                    <div class="slds-form-element__row">\n                        <sked-input type="number" label="No. of Nurse Instructors" name="numberOfInstructors" model="$ctrl.job.numberOfInstructors" min-value="1" is-required="true" pattern="INTEGER_PATTERN"></sked-input>\n                    </div>\n                    <div class="slds-form-element__row">\n                        <sked-input type="date-picker" label="Date of Event" name="jobDate" model="$ctrl.job.jobDate" is-required="true" ></sked-input>\n                        <sked-input type="time-picker" label="Start Time" name="startTime" model="$ctrl.job.startTime" is-required="true"></sked-input> \n                        <sked-input type="time-picker" label="End Time" name="finishTime" model="$ctrl.job.finishTime" is-required="true"></sked-input> \n                    </div>\n                    <div class="slds-form-element__row">\n                        <sked-input type="number" label="Class Set up Time (min)" name="classSetupTime" model="$ctrl.job.classSetupTime" min-value="0" pattern="INTEGER_PATTERN"></sked-input>\n                        <sked-input type="number" label="Class Pack down Time (min)" name="classPackdownTime" model="$ctrl.job.classPackdownTime" min-value="0" pattern="INTEGER_PATTERN"></sked-input>\n                    </div>\n                    <div class="slds-form-element__row">\n                        <sked-input-tags label="Attributes (Tags)" name="neededSkills" label-field="label" model="$ctrl.job.neededSkills" search="$ctrl.searchNeededSkills(searchString)" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#quotes\' | skedSfUrl}}" icon-class="slds-icon-standard-quotes"></sked-input-tags>\n                    </div> --> <!-- end ARC-202 --> <!-- ARC-412 --> <div class="slds-form-element__row"> <sked-input type="select" select-options="item.id as item.name for item in $ctrl.configData.jobTypes" label="Type" name="jobType" model="$ctrl.job.jobType" is-required="true"></sked-input> </div> <!-- end ARC-412 --> <div class="slds-form-element__row"> <div class="slds-form-element"> <label class="slds-form-element__label">Special Instructions</label> <div class="slds-form-element__control"> <textarea class="slds-textarea" ng-model="$ctrl.job.specialInstructions"></textarea> </div> </div> </div> </section> </div> </div> <footer class="slds-modal__footer"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center"> <div><button class="slds-button slds-button_destructive" ng-if="$ctrl.pageMode === PAGE_MODE.EDIT && !!$ctrl.configData.userPermission.canDelete" ng-click="$ctrl.deleteJob()" ng-disabled="$ctrl.contentLoading">Delete Job</button></div> <div> <button class="slds-button slds-button_success" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.ALLOCATE_RESOURCE)" ng-disabled="$ctrl.contentLoading || $ctrl.job.isQueued === true">{{($ctrl.pageMode === PAGE_MODE.EDIT)?\'Save\':\'Create\'}} &amp; Allocate</button> <button class="slds-button slds-button_brand" ng-click="$ctrl.saveJob(ACTION_AFTER_SAVING.CLOSE_MODAL)" ng-disabled="$ctrl.contentLoading">{{($ctrl.pageMode === PAGE_MODE.EDIT)?\'Save\':\'Create\'}} &amp; Close</button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">Cancel</button> </div> </div> </footer> </div> </section>'),
a.put("src/app/nat-job-info-popover.tpl.html",'<div class="acr-nat-job-info-popover"> <div class="slds-popover__body"> <dl class="slds-list_horizontal slds-text-body--small slds-wrap"> <dt class="slds-item_label slds-text-color_weak slds-truncate">Job Number</dt> <dd class="slds-item_detail slds-truncate">{{job.name}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Course Name</dt> <!-- <dd class="slds-item_detail slds-truncate" >{{job.course.name}}</dd> --> <dd class="slds-item_detail slds-truncate">{{dataItem.natGroup.name || dataItem.natGroupRecord.natGroup.name}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Class Type</dt> <dd class="slds-item_detail slds-truncate" ng-style="{color: job.backgroundColor}">{{job.classType.name}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Location</dt> <dd class="slds-item_detail slds-truncate">{{job.facility.name}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Status</dt> <dd class="slds-item_detail slds-truncate" ng-style="{color: job.statusColor}">{{job.jobStatus}}</dd> <!-- <dt class="slds-item_label slds-text-color_weak slds-truncate" >Start Time</dt>\n            <dd class="slds-item_detail slds-truncate" >{{job.startTime | skedTimeName}}</dd>\n            <dt class="slds-item_label slds-text-color_weak slds-truncate" >End Time</dt>\n            <dd class="slds-item_detail slds-truncate" >{{job.finishTime | skedTimeName}}</dd> --> <dt class="slds-item_label slds-text-color_weak slds-truncate" ng-if="job.hasAllocation">Allocated Resources</dt> <dd class="slds-item_detail slds-truncate" ng-if="job.hasAllocation"> <ul> <li ng-repeat="allocation in job.allocations" class="slds-grid"> <div class="slds-size_2-of-4 slds-truncate">{{allocation.resource.name}}</div> <div class="slds-size_1-of-4">{{allocation.status}}</div> </li> </ul> </dd> </dl> </div> <!-- <div class="slds-popover__footer slds-theme--shade slds-text-body_small" ng-if="job.isConflict"> \n        <div class="error-inline-message"> \n            <svg class="slds-icon slds-icon_xx-small slds-m-right_xx-small" aria-hidden="true"> \n                <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> \n            </svg> Job times conflict with others in room\n        </div> \n    </div> --> <div class="slds-popover__footer slds-theme_shade slds-text-body_small" ng-if="job.allocationStatus === JOB_ALLOCATION.PARTIALLY_ALLOCATED"> <div class="warning-inline-message slds-m-bottom_xxx-small slds-grid"> <svg class="slds-icon slds-icon_xx-small slds-m-right_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> <div> <p>Job has not been fully allocated yet</p> </div> </div> </div> </div>'),a.put("src/app/nat-job-summary-popover.tpl.html",'<div class="acr-nat-job-summary-popover"> <div class="slds-popover__body"> <dl class="slds-list_horizontal slds-text-body--small slds-wrap"> <dt class="slds-item_label slds-text-color_weak slds-truncate">Total Class Type Hours</dt> <dd class="slds-item_detail slds-truncate">{{classType.totalHours | hoursDurationName}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Total Scheduled</dt> <dd class="slds-item_detail slds-truncate">{{classType.scheduledHours | hoursDurationName}}</dd> <dt class="slds-item_label slds-text-color_weak slds-truncate">Total Breaks</dt> <dd class="slds-item_detail slds-truncate">{{classType.breakHours | hoursDurationName}}</dd> </dl> </div> </div>'),a.put("src/app/nat-schedule-calendar-step.tpl.html",'<div class="slds-p-around_medium" ng-init="$ctrl.initScheduleCalendarStep()"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-end"> <div> <div class="slds-grid"> <div class="slds-text-color_weak slds-truncate slds-m-right_small">Number of Classes:</div> <div class="slds-truncate"> <span class="arc-no-of-selected-classes" ng-class="{\'no-of-classes-error\': $ctrl.natCourse.selectedDates.length !== $ctrl.numberOfClasses}">{{$ctrl.natCourse.selectedDates.length}}</span>/<span class="arc-no-of-required-classes">{{$ctrl.numberOfClasses}}</span> </div> </div> <div class="slds-grid"> <div class="slds-text-color_weak slds-truncate slds-m-right_small">Course Class Days:</div> <div class="slds-truncate">{{$ctrl.natCourse.courseTemplate.courseClassDays}}</div> </div> </div> <div> <button class="slds-button slds-button_brand" ng-disabled="!$ctrl.region" ng-click="$ctrl.manageSchedulePattern()"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> Schedule Pattern </button> <!-- <button class="slds-button slds-button_neutral" ng-disabled="!$ctrl.region" ng-click="$ctrl.resetSelectedDates()">\n                <svg class="slds-button__icon slds-button__icon--left">\n                    <use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use>\n                </svg> Add More Months\n            </button> --> <button class="slds-button slds-button_neutral" ng-disabled="!$ctrl.region" ng-click="$ctrl.resetSelectedDates()"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#refresh\' | skedSfUrl}}"></use> </svg> Reset </button> </div> </div> <div class="slds-p-vertical_small slds-scrollable_x"> <div class="slds-grid slds-grid_pull-padded slds-grid_align-spread slds-m-vertical_small" height-confirmed> <div class="slds-datepicker slds-m-horizontal_small arc-mini-calendar" ng-repeat="calendar in $ctrl.calendars"> <div class="slds-datepicker__filter_month slds-grid slds-grid_align-spread slds-grow"> <h2 class="slds-align-middle slds-m-left_x-large slds-grid_align-center slds-p-vertical_x-small slds-grow">{{calendar.month | date: \'MMMM, yyyy\'}}</h2> <button class="slds-button slds-button_icon slds-button_icon-container" ng-click="$ctrl.resetSelectedDates(calendar.month)"> <svg class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#refresh\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Reset</span> </button> </div> <table class="slds-datepicker__month"> <thead> <tr> <th title="Sunday">Sun</th> <th title="Monday">Mon</th> <th title="Tuesday">Tue </th><th title="Wednesday">Wed</th> <th title="Thursday">Thu</th> <th title="Friday">Fri</th> <th title="Saturday">Sat</th> </tr> </thead> <tbody> <tr ng-repeat="weekDays in calendar.weeks"> <td class="arc-calendar_day" ng-repeat="day in weekDays track by $index" ng-class="{\'slds-disabled-text\': !day, \'slds-is-selected slds-is-selected-multi\': $ctrl.natCourse.selectedDates.indexOf(day) > -1, \'arc-calendar-weekend\': (($index === 0 || $index === 6) && day), \'slds-disabled-text\': day.inPast === true, \'slds-is-today\': day.isToday === true}" ng-click="$ctrl.selectCalendarDate(day)" sked-popover="day.holiday" sked-popover-content="day.holiday" sked-popover-position="right" sked-popover-container=".arc-page"> <span class="slds-day" ng-if="day">{{day.getDate()}}</span> <span class="arc-calendar-holiday__indicator" ng-if="day.holiday"></span> </td> </tr> </tbody> </table> </div> </div> </div> </div>'),a.put("src/app/nat-schedule-pattern-modal.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-csc-page" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <header class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading_medium slds-hyphenate">Manage Schedule Pattern</h2> </header> <div class="slds-modal__content slds-p-around_medium"> <div class="slds-form_compound" ng-form="$ctrl.schedulePatternForm"> <div class="slds-form-element__row"> <fieldset class="slds-form-element arc-weekdays-checkboxes" ng-class="{\'slds-has-error\': ($ctrl.schedulePatternForm.$submitted && $ctrl.pattern.weekdays.length===0)}"> <legend class="slds-form-element__legend slds-form-element__label"><abbr class="slds-required" title="required">*</abbr> Recurring on</legend> <div class="slds-checkbox_button-group"> <span class="slds-button slds-checkbox_button" ng-repeat="wd in WEEK_DAYS"> <input type="checkbox" id="chk{{wd.label}}" name="checkbox" ng-click="$ctrl.selectWeekDay(wd)" ng-checked="$ctrl.pattern.weekdays.indexOf(wd) !== -1" ng-disabled="wd.disabled"> <label class="slds-checkbox_button__label" ng-attr-for="chk{{wd.label}}"> <span class="slds-checkbox_faux">{{wd.label}}</span> </label> </span> </div> </fieldset> </div> <div class="slds-form-element__row slds-size_2-of-3 slds-grid_vertical-align-end"> <sked-input label="Start from" type="date-picker" name="startDate" model="$ctrl.pattern.startDate"></sked-input> <div class="slds-form-element slds-m-bottom_x-small"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkSkipHolidays" ng-model="$ctrl.pattern.skipHolidays"> <label class="slds-checkbox__label" for="chkSkipHolidays"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Skip Holidays?</span> </label> </span> </div> </div> </div> </div> <div class="slds-col slds-m-top_small"> <fieldset class="slds-form-element"> <legend class="slds-form-element__legend slds-form-element__label"><abbr class="slds-required" title="required">*</abbr> Apply Pattern for</legend> <div class="slds-form-element__control slds-grid slds-wrap"> <span class="slds-checkbox slds-size_1-of-1 slds-m-bottom_xx-small"> <input type="checkbox" id="chkApplyAllMonths" ng-checked="$ctrl.selectedMonths.length === $ctrl.calendars.length" ng-click="$ctrl.toggleAllMonthsSelection()"> <label class="slds-checkbox__label" for="chkApplyAllMonths"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">All Months</span> </label> </span> <span class="slds-checkbox" ng-repeat="calendar in $ctrl.calendars"> <input type="checkbox" ng-attr-id="chkMonth_{{$index}}" ng-checked="$ctrl.selectedMonths.indexOf(calendar) > -1" ng-click="$ctrl.toggleMonthSelection(calendar)"> <label class="slds-checkbox__label" ng-attr-for="chkMonth_{{$index}}"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">{{calendar.month | date: \'MMMM, yyyy\'}}</span> </label> </span> </div> </fieldset> </div> </div> <footer class="slds-modal__footer slds-grid slds-grid_vertical-align-center slds-grid_align-end"> <div class="slds-form-element__control"> <span class="slds-checkbox"> <input type="checkbox" id="chkNotifyResourceOnSave" ng-model="$ctrl.resetMonth"> <label class="slds-checkbox__label" for="chkNotifyResourceOnSave"> <span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">Reset Months before Applying Pattern</span> </label> </span> </div> <button class="slds-button slds-button_brand" ng-click="$ctrl.applyPattern()">Apply Pattern</button> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">Cancel</button> </footer> </div> </section>'),a.put("src/app/nat-scheduling-console.tpl.html",'<div class="arc-csc-page arc-console-page"> <div class="arc-csc-panel panel--header slds-p-horizontal_medium slds-p-vertical_small slds-border_bottom"> <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-end"> <!-- regions selector --> <div class="slds-grid slds-grid_vertical-align-end slds-size_1-of-2 slds-grid_align-start"> <div class="slds-icon_container slds-m-right_small"> <svg width="48px" height="48px" viewbox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect id="Rectangle-20" x="0" y="0" width="32" height="32" fill="transparent"></rect> <g transform="translate(1.000000, 1.000000)" id="Rectangle-1-Copy" fill="#3c97dd"> <path d="M0,3.00001915 C0,1.34315432 1.35008905,0 3.01578348,0 L27.1418587,0 C28.80743,0 30.1576422,1.34303176 30.1576422,3.00001915 L30.1576422,26.9999808 C30.1576422,28.6568457 28.8075532,30 27.1418587,30 L3.01578348,30 C1.35021226,30 0,28.6569682 0,26.9999808 L0,3.00001915 L0,3.00001915 Z M20.9039742,5.24999988 C20.9039742,5.24999988 24.8817134,5.24999988 24.8817134,9.19415977 L14.5589787,9.19415989 C14.5589787,9.19415989 5.27758739,9.19415986 5.27758739,9.19415989 C5.27758739,9.19415991 5.27758739,5.25 9.25532654,5.25 C13.2330657,5.25 20.9039742,5.24999988 20.9039742,5.24999988 L20.9039742,5.24999988 Z M9.25839616,24.75 C9.25839616,24.75 5.27758739,24.75 5.27758739,20.8058401 L15.608288,20.80584 L24.8968418,20.80584 C24.8968418,20.80584 24.8968418,24.7499998 20.916033,24.7499998 C16.9352242,24.7499998 9.25839616,24.75 9.25839616,24.75 L9.25839616,24.75 Z M9.25839616,16.97208 C9.25839616,16.97208 5.27758739,16.97208 5.27758739,13.0279201 L15.608288,13.02792 L20.916033,13.02792 C24.8800548,13.02792 24.8800548,16.9720798 24.8800548,16.97208 C24.8800548,16.97208 20.916033,16.97208 20.916033,16.9720798 C20.916033,16.9720797 9.25839616,16.97208 9.25839616,16.97208 L9.25839616,16.97208 Z"></path> </g> </g> </svg> </div> <div class="slds-form-element region-picklist"> <label class="slds-form-element__label" for="cboRegion">Region</label> <div class="slds-form-element__control"> <div class="slds-select_container"> <select id="cboRegion" class="slds-select" ng-model="$ctrl.region" ng-options="region as region.label for region in $ctrl.configData.regions" ng-change="$ctrl.handleRegionChanged()"></select> </div> </div> </div> </div> <!-- title --> <div class="slds-grid slds-grid_align-center slds-grid_vertical-align-center viewing-day-title"> <div class="slds-text-heading_medium viewing-day-title__heading">{{$ctrl.date | date : \'MMMM, yyyy\'}}</div> <div class="slds-grid"> <input tabindex="0" class="hidden-date-picker" id="hdMonthPicker" sked-month-picker="$ctrl.commonMonthPickerOptions" ng-model="$ctrl.date" tabindex="-1"> <div class="slds-button-group cal-button-group"> <button class="slds-button slds-button_icon-border" ng-click="$ctrl.moveBack()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Previous</span> </button> <button class="slds-button slds-button_icon-border" ng-click="$ctrl.focusInput(\'#hdMonthPicker\')"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#monthlyview\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Calendar</span> </button> <button class="slds-button slds-button_icon-border" ng-click="$ctrl.moveNext()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Next</span> </button> </div> </div> </div> <!-- date/button --> <div class="slds-size_1-of-2 slds-text-align_right"> <button class="slds-button slds-button_brand" ng-disabled="!$ctrl.region" ng-if="!!$ctrl.configData.userPermission.canCreate" ng-click="$ctrl.createNatCourse()"> <svg class="slds-button__icon slds-button__icon_left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use> </svg> Create New NAT </button> <button class="slds-button slds-button_neutral" ng-disabled="!$ctrl.region" ng-click="$ctrl.refreshConsole()"> <svg class="slds-button__icon slds-button__icon_left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#refresh\' | skedSfUrl}}"></use> </svg> Refresh </button> <!-- <button class="slds-button slds-button_neutral" ng-disabled="!$ctrl.region" ng-click="$ctrl.toggleOpeningAllGroups()">\n                    <svg class="slds-button__icon slds-button__icon--left">\n                        <use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevrondown\' | skedSfUrl}}"></use>\n                    </svg> {{($ctrl.natGroupIds.length !== $ctrl.openedGroupIds.length)?\'Expand\':\'Collapse\'}} All Courses\n                </button> --> </div> </div> </div> <!-- filter --> <div class="slds-grid slds-grid--vertical-align-center slds-border_bottom slds-p-vertical_small slds-p-horizontal_medium slds-theme_shade" ng-show="$ctrl.region"> <h2 class="slds-text-heading_label slds-m-right_small">Filters</h2> <div class="slds-grid"> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.states" select-all-option="Any States" model="$ctrl.filters.states" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item.name for item in $ctrl.filterSources.locations" select-all-option="Any Locations" model="$ctrl.filters.locations" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item.name for item in $ctrl.filterSources.courses" select-all-option="Any Courses" model="$ctrl.filters.courses" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.jobStatuses" select-all-option="Any Job Statuses" model="$ctrl.filters.jobStatuses" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <sked-multi-picklist select-options="item as item for item in $ctrl.filterSources.jobAllocations" select-all-option="Any Job Allocations" model="$ctrl.filters.jobAllocations" is-readonly="$ctrl.contentLoading || !$ctrl.region" class="slds-m-right_small"></sked-multi-picklist> <button class="slds-button slds-button_brand" ng-click="$ctrl.applyFilters()"> <svg class="slds-button__icon slds-button__icon--left"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#filterList\' | skedSfUrl}}"></use> </svg> Apply Filters </button> </div> </div> <div class="arc-csc-panel panel--content slds-p-horizontal_medium slds-m-bottom_large"> <div class="slds-m-top_medium" ng-if="$ctrl.region && $ctrl.scheduleData && $ctrl.scheduleData.length > 0"> <!-- class type color settings --> <div class="slds-grid slds-m-bottom_large arc-color-settings slds-grid_align-end"> <div class="slds-m-left_large slds-grid slds-grid_vertical-align-center" ng-repeat="classTypeSetting in $ctrl.configData.natClassTypeSettings"> <div class="class-type-indicator slds-m-right_x-small" ng-style="{\'background-color\': classTypeSetting.backgroundColor}"></div> <div class="slds-text-body_small" ng-style="{color: classTypeSetting.backgroundColor}">{{classTypeSetting.classType}}</div> </div> <div class="slds-m-left_large slds-grid slds-grid_vertical-align-center"> <div class="class-type-indicator slds-m-right_x-small" ng-style="{\'background-color\': DEFAULT_JOB_BACKGROUND_COLOR}"></div> <div class="slds-text-body_small" ng-style="{color: DEFAULT_JOB_BACKGROUND_COLOR}">Other</div> </div> </div> <!-- the table --> <table class="arc-csc-layout-table" ng-style="{\'max-width\': (($ctrl.days.length * GRID_SETTINGS.slotSize.w) + GRID_SETTINGS.leftColWidth + 0.125) + \'rem\'}"> <tr> <td class="arc-csc-layout-table__cell cell-left slds-text-body_small"> <div class="cell-left__header" sked-docked-top-to> <a class="slds-button slds-p-left_x-small" ng-disabled="!$ctrl.region" ng-click="$ctrl.toggleOpeningAllGroups()"> <svg class="slds-button__icon slds-button__icon_left"> <use xlink:href="" ng-attr-xlink:href="{{($ctrl.natGroupIds.length !== $ctrl.openedGroupIds.length)?\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\':\'slds/icons/utility-sprite/svg/symbols.svg#chevrondown\' | skedSfUrl}}"></use> </svg> {{($ctrl.natGroupIds.length !== $ctrl.openedGroupIds.length)?\'Expand\':\'Collapse\'}} All Courses </a> </div> <div class="cell-left__items"> <ul row-height-sync=".arc-csc-data-content-table" sync-context-properties="$ctrl.scheduleData,$ctrl.openedGroupIds"> <li ng-repeat="dataItem in $ctrl.scheduleData" sync-row ng-show="dataItem.recordType === SCHEDULE_RECORD_TYPE.NAT_GROUP || (dataItem.recordType === SCHEDULE_RECORD_TYPE.FACILITY && $ctrl.openedGroupIds.indexOf(dataItem.natGroupRecord.natGroup.id) > -1)" ng-class="{\'clickable-nat-group\': dataItem.recordType === SCHEDULE_RECORD_TYPE.NAT_GROUP && dataItem.containFacilities === true}"> <div class="slds-grid" ng-if="dataItem.recordType === SCHEDULE_RECORD_TYPE.NAT_GROUP"> <div class="slds-icon_container nat-group__marker" ng-click="$ctrl.toggleOpeningGroup(dataItem)"> <svg class="slds-icon slds-icon_xx-small slds-icon-text-default" ng-show="dataItem.containFacilities === true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#\' + (($ctrl.openedGroupIds.indexOf(dataItem.natGroup.id) > -1)?\'chevrondown\':\'chevronright\') | skedSfUrl}}"></use> </svg> </div> <div class="slds-col" ng-click="$ctrl.toggleOpeningGroup(dataItem)" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/nat-course-info-popover.tpl.html">{{dataItem.natGroup.name}}</div> <div class="slds-col_bump-left slds-m-left_small"> <button class="slds-button slds-button_icon" sked-dropdown-menu="src/app/nat-course-menu.tpl.html" sked-dropdown-menu-container=".panel--content" ng-if="!!$ctrl.configData.userPermission.canEdit || !!$ctrl.configData.userPermission.canCancel" ng-disabled="!$ctrl.courseCanBeEdited(dataItem.natGroup) && !$ctrl.jobCanBeAllocated(dataItem.natGroup.firstJob) && !$ctrl.courseCanBeCancelled(dataItem.natGroup)"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#threedots_vertical\' | skedSfUrl}}"></use> </svg> </button> </div> </div> <p class="slds-text-align_right slds-m-left_medium" ng-if="dataItem.recordType === SCHEDULE_RECORD_TYPE.FACILITY" sked-popover="dataItem.facility.facilityId" sked-popover-position="right" sked-popover-template="src/app/facility-info-popover.tpl.html">{{dataItem.facility.name}}</p> </li> </ul> </div> </td> <td class="arc-csc-layout-table__cell cell--main"> <div class="arc-csc-data-header-wrapper" sked-docked-top-to> <div class="arc-csc-data-header-container" ng-style="{width: ($ctrl.days.length * GRID_SETTINGS.slotSize.w) + \'rem\'}"> <table class="arc-csc-data-header-table"> <tr> <td ng-repeat="day in $ctrl.days" class="slds-text-body_small slds-text-color_weak slds-text-align_center"> <div>{{day.date | date: \'EEE\'}}</div> <div>{{day.date | date: \'M/d\'}}</div> <div class="yesterday-indicator" ng-if="day.isYesterday"></div> </td> </tr> </table> </div> </div> <div class="arc-csc-data-content-wrapper" sked-draggable-scrolling=".arc-csc-data-header-wrapper"> <div ng-style="{width: ($ctrl.days.length * GRID_SETTINGS.slotSize.w) + \'rem\'}" class="arc-csc-data-content-container"> <table class="arc-csc-data-content-table"> <tr ng-repeat="dataItem in $ctrl.scheduleData" sync-row ng-show="dataItem.recordType === SCHEDULE_RECORD_TYPE.NAT_GROUP || (dataItem.recordType === SCHEDULE_RECORD_TYPE.FACILITY && $ctrl.openedGroupIds.indexOf(dataItem.natGroupRecord.natGroup.id) > -1)" ng-class="{\'nat-facility-row\': dataItem.recordType === SCHEDULE_RECORD_TYPE.FACILITY}"> <!-- <td ng-repeat="day in $ctrl.days" ng-class="{weekend: day.isWeekend, \'out-of-month\': day.isOutofMonth, \'past-day\': day.isInPast, \'yesterday\': day.isYesterday}" ng-click="$ctrl.handleGridBlockClicked($event, (dataItem.natGroup || dataItem.natGroupRecord.natGroup), dataItem.facility, day)"> --> <td ng-repeat="day in $ctrl.days" ng-class="{weekend: day.isWeekend, \'out-of-month\': day.isOutofMonth, \'past-day\': day.isInPast, \'yesterday\': day.isYesterday}"> <div class="job-block" ng-repeat="job in dataItem.jobsByDate[day.dateIso]" sked-dropdown-menu="src/app/nat-job-block-menu.tpl.html" sked-dropdown-menu-container=".arc-csc-data-content-wrapper" sked-dropdown-menu-ignored="day.isInPast" sked-popover="true" sked-popover-position="right" sked-popover-template="src/app/nat-job-info-popover.tpl.html" ng-style="{background: job.backgroundColor, color: job.textColor}"> <span class="job-conflict-indicator" ng-if="job.isConflict"></span> {{job.startTime | arcShortTimeName}}-{{job.finishTime | arcShortTimeName}} </div> </td> </tr> </table> </div> </div> </td> </tr> </table> </div> <!-- empty data --> <div ng-if="!$ctrl.region || !$ctrl.scheduleData || $ctrl.scheduleData.length <= 0" class="slds-text-align_center slds-m-top_xx-large arc-csc-sc--empty"> <span class="slds-icon_container slds-m-right_x-small"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"></use> </svg> </span> <span ng-if="loading">Loading ...</span> <span ng-if="!loading && !$ctrl.region">No region selected...</span> <span ng-if="!loading && $ctrl.region && (!$ctrl.scheduleData || $ctrl.scheduleData.length <= 0)">No schedule data for selected region...</span> </div> </div> </div>'),a.put("src/app/resource-availability-conflict-modal.tpl.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closeModal(\'no\')"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Resource Availability Conflicts</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <table class="slds-table slds-table--bordered slds-table--cell-buffer--small slds-no-row-hover"> <thead> <tr class="slds-text-title--caps"> <th>Resource</th> <th>Job Conflict</th> </tr> </thead> <tbody> <tr ng-repeat="item in conflictData "> <td>{{item.resourceName}}</td> <td>{{item.conflictDetails}}</td> </tr> </tbody> </table> <div class="slds-m-top_medium"> Would you like to proceed in moving this class without these Instructors? </div> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="closeModal(\'no\')">No</button> <button class="slds-button slds-button--brand" ng-click="closeModal(\'confirmed\')">Yes</button> </div> </div>'),a.put("src/app/resource-tags-popover.tpl.html",'<div class="slds-p-around_small"> <ul> <li class="slds-m-bottom_xx-small" ng-repeat="tag in resource.tags"> <span class="slds-icon_container slds-icon-standard-quotes"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/standard-sprite/svg/symbols.svg#quotes\' | skedSfUrl}}"></use> </svg> </span> <span class="slds-text-body_small" title="{{tag.label}}">{{tag.label}}</span> </li> </ul> </div>'),a.put("src/app/team-leader-allocation-confirm-modal.tpl.html",'<div class="slds-modal__container arc-ja-page arc-ja-tl-confirm-modal"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">No Team Leader Assigned</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p class="slds-m-bottom_small">Please be aware, you have not assigned a Team Leader to job(s) listed below, if there is no Team Leader assigned, the Job will not show in any of the resources pre training call lists.</p> <p class="slds-text-color_weak slds-m-bottom_x-small">Click on assigned Resource to set Team Leader for Job.</p> <table class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-bottom_small"> <thead> <tr class="slds-text-title_caps"> <th width="160px" ng-if="scheduleType === SCHEDULE_TYPE.NAT">Class Type</th> <th width="120px">Job Date</th> <th width="100px">Start Time</th> <th>Allocated Resources</th> </tr> </thead> <tbody> <tr class="slds-hint-parent" ng-repeat="job in requiringTLJobs"> <td width="160px" style="position: relative" ng-if="scheduleType === SCHEDULE_TYPE.NAT"> {{job.classType}} </td> <td width="120px">{{job.jobDate | date : COMMON_DATE_FORMAT}}</td> <td width="100px">{{job.startTime | skedTimeName}}</td> <td> <ul class="arc-allocated-resource__container"> <li ng-repeat="resource in job.assignedResources track by $index" ng-click="setResourceAsTeamLeader(resource, job)"> <div class="arc-available-slot" sked-popover="true" sked-popover-content="resource.name" sked-popover-container=".arc-ja-tl-confirm-modal"> <img ng-src="{{resource.photoUrl || ((resource.isSubcontractor)?DEFAULT_SUBC_PHOTO_URL:DEFAULT_PHOTO_URL)}}" class="slds-avatar slds-avatar_medium"> <span class="team-leader__indicator" ng-if="resource.id === job.teamLeadResourceId"></span> </div> </li> <li ng-if="job.numberOfResourcesRequired > -1 && job.numberOfResourcesRequired > job.assignedResources.length" ng-repeat="unassignedSlot in getArray(job.numberOfResourcesRequired - job.assignedResources.length) track by $index"> <div class="arc-available-slot empty-slot"></div> </li> <li ng-if="job.numberOfResourcesRequired === -1" ng-repeat="unassignedSlot in getArray(1) track by $index"> <div class="arc-available-slot empty-slot">...</div> </li> </ul> </td> </tr> </tbody> </table> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="closeModal(\'cancel\')">Cancel</button> <button class="slds-button slds-button--brand" ng-click="saveAllocations(this)">Save Allocation</button> </div> </div>'),a.put("src/app/training-event-cancellation.tpl.html",'<section role="dialog" tabindex="-1" class="slds-modal arc-page arc-tec-page" ng-class="{\'slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container" ng-show="!$ctrl.contentLoading && $ctrl.isTrainingEventScheduled"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading_medium">Confirmation</h2> </div> <div class="slds-modal__content slds-p-around_medium"> <p>Are you sure you want to cancel all jobs scheduled for this Training Event?</p> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">No</button> <button class="slds-button slds-button_brand" ng-click="$ctrl.cancelTrainingEvent()">Yes</button> </div> </div> <div class="slds-modal__container" ng-show="!$ctrl.contentLoading && !$ctrl.isTrainingEventScheduled"> <div class="slds-modal__header slds-theme_info slds-theme_alert-texture"> <button class="slds-button slds-modal__close slds-button_icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading_medium" id="prompt-heading-id">No Job Found</h2> </div> <div class="slds-modal__content slds-p-around_medium"> <p>There is no Job scheduled for this Training Event.</p> </div> <div class="slds-modal__footer slds-theme_default"> <button class="slds-button slds-button_neutral" ng-click="$ctrl.closeModal(\'cancel\')">Okay</button> </div> </div> <div role="status" class="slds-spinner slds-spinner_brand slds-spinner_medium" ng-show="$ctrl.contentLoading"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </section>'),
a.put("src/shared/confirm-modal-template.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="dismiss()"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">{{title}}</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p>{{message}}</p> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="dismiss()">No</button> <button class="slds-button slds-button--brand" ng-click="confirm()">Yes</button> </div> </div>'),a.put("src/shared/input-lookup-menu-template.html",'<ul class="slds-lookup__list" role="listbox"> <li role="presentation" ng-repeat="item in searchResults" ng-click="selectLookupItem(item);hideLookupMenu()" title="{{item[labelField]}}"> <span class="slds-lookup__item-action slds-media" role="option"> <svg class="slds-icon {{iconClass}} slds-icon_small slds-media__figure" aria-hidden="true" ng-if="iconUrl"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <div class="slds-media__body"> <div class="slds-lookup__result-text">{{item[labelField]}}</div> <span class="slds-lookup__result-meta slds-text-body--small slds-truncate" ng-if="metaField">{{item[metaField]}}</span> </div> </span> </li> </ul>'),a.put("src/shared/input-lookup-template.html",'<div class="slds-form-element slds-lookup sked-input-lookup" ng-class="{\'slds-has-error\': isInvalid}"> <label class="slds-form-element__label" ng-if="label"> <abbr class="slds-required" title="required" ng-if="required">*</abbr> {{label}} </label> <div class="slds-form-element__control"> <div class="slds-pill_container" ng-show="model"> <span class="slds-pill slds-grow"> <span class="slds-icon_container {{iconClass}} slds-pill__icon_container" ng-if="iconUrl"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <span class="slds-assistive-text">{{label}}</span> </span> <span class="slds-pill__label slds-grow slds-m-left--x-small" title="{{model[labelField]}}">{{model[labelField]}}</span> <button class="slds-button slds-button--icon slds-pill__remove" title="Remove" ng-click="model=null;focusLookupInput()" ng-hide="isReadonly"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Remove</span> </button> </span> </div> <div class="slds-input-has-icon slds-input-has-icon--left" ng-show="!model"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> <input type="text" ng-attr-id="{{inputId}}" class="slds-input" ng-focus="search();" ng-model="searchString" ng-model-options="{debounce: 250}" ng-change="search();" ng-readonly="isReadonly"> </div> </div> </div>'),a.put("src/shared/input-popup-template.html",'<div class="slds-form-element"> <label class="slds-form-element__label" ng-if="label">{{label}}</label> <div class="slds-form-element__control"> <div class="slds-input-has-icon slds-input-has-icon--left"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#new_window\' | skedSfUrl}}"></use> </svg> <input type="text" ng-attr-id="{{inputId}}" class="slds-input" ng-focus="openPopup();" ng-model="inputView"> </div> </div> </div>'),a.put("src/shared/input-tags-lookup-menu-template.html",'<ul class="slds-lookup__list" role="listbox"> <li role="presentation" ng-repeat="item in searchResults  | filter: filterAlreadySelectedTags" ng-click="addTag(item);$event.stopPropagation();"> <span class="slds-lookup__item-action slds-media" role="option"> <svg class="slds-icon {{iconClass}} {{(metaField)?\'slds-icon_small\':\'slds-icon_x-small\'}} slds-media__figure" aria-hidden="true" ng-if="iconUrl"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <div class="slds-media__body"> <div class="slds-lookup__result-text">{{(labelField)?item[labelField]:item}}</div> <span class="slds-lookup__result-meta slds-text-body--small slds-truncate" ng-if="metaField">{{item[metaField]}}</span> </div> </span> </li> </ul>'),a.put("src/shared/input-tags-template.html",'<div class="slds-form-element slds-lookup sked-tags-input"> <label class="slds-form-element__label" ng-if="label">{{label}}</label> <div class="slds-form-element__control" ng-class="{\'is-focusing\': isFocusing}"> <div class="slds-pill_container slds-wrap"> <div class="slds-m-left_xxx-small slds-m-bottom_xxx-small slds-pill" ng-repeat="tag in model"> <span class="slds-icon_container {{iconClass}} slds-pill__icon_container" ng-if="iconUrl"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <span class="slds-assistive-text">{{label}}</span> </span> <span class="slds-pill__label slds-grow-none slds-m-left_x-small" title="{{(labelField)?tag[labelField]:tag}}">{{(labelField)?tag[labelField]:tag}}</span> <button class="slds-button slds-button_icon slds-pill__remove" title="Remove" ng-click="removeTagAt($index)" ng-hide="isReadonly"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Remove</span> </button> </div> <div class="slds-input-has-icon slds-input-has-icon_left slds-size_1-of-1" ng-hide="isReadonly"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> <input type="text" ng-attr-id="{{inputId}}" class="slds-input slds-lookup__input slds-input_bare" ng-focus="search();" ng-model="searchString" ng-model-options="{debounce: 250}" ng-change="search();" placeholder="{{placeholder}}"> </div> </div> </div> </div>'),a.put("src/shared/multi-picklist-menu-template.html",'<ul class="slds-picklist slds-dropdown__list slds-dropdown_length-5"> <li ng-if="selectAllOption" ng-class="{\'slds-is-selected\': selectedOptions.length === optionList.length}" ng-click="toggleSelectAll()" class="slds-has-divider_bottom-space"> <span class="slds-lookup__item-action slds-lookup__item-action_label"> <svg class="slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small slds-shrink-none" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#mark_all_as_read\' | skedSfUrl}}"></use> </svg> <span class="slds-truncate"><strong>{{selectAllOption}}</strong></span> </span> </li> <li ng-repeat="option in optionList track by $index" ng-class="{\'slds-is-selected\': (selectedOptions.indexOf(option) !== -1)}" ng-click="toggleOptionSelection(option)"> <span class="slds-lookup__item-action slds-lookup__item-action_label"> <svg class="slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small slds-shrink-none" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#check\' | skedSfUrl}}"></use> </svg> <span class="slds-truncate">{{getOptionLabel(option)}}</span> </span> </li> </ul>'),a.put("src/shared/multi-picklist-template.html",'<div class="slds-form-element slds-dropdown-trigger slds-dropdown-trigger_click sked-multi-picklist"> <label class="slds-form-element__label" ng-if="label">{{label}}</label> <div class="slds-form-element__control slds-select_container" ng-click="showPicklist()"> <input class="slds-lookup__search-input slds-input" ng-model="selectionLabel" readonly> </div> </div>'),a.put("src/shared/pagin-template.html",'<div class="slds-grid slds-grid--vertical-align-end"> <div class="slds-form-element slds-m-right--small"> <label class="slds-form-element__label" ng-if="pageNavLabel">{{pageNavLabel}}</label> <div class="slds-button-group sked-pagin-group"> <button class="slds-button slds-button--icon-border" ng-disabled="model.pageNumber === 1" ng-click="goToPreviousPage()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> </button> <div class="slds-form-element__control"> <div class="slds-select_container"> <select class="slds-select" ng-options="item as item for item in numberOfPagesArray" ng-model="model.pageNumber"> </select> </div> </div> <button class="slds-button slds-button--icon-border" ng-disabled="model.pageNumber === model.numberOfPages" ng-click="goToNextPage()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> </button> </div> </div> <!-- <label class="slds-text-color--weak slds-text-body--small slds-m-right--small" >Record per Page</label> --> <div class="slds-form-element"> <label class="slds-form-element__label" ng-if="recordNumberLabel">{{recordNumberLabel}}</label> <div class="slds-form-element__control"> <div class="slds-select_container"> <select class="slds-select" ng-options="item as item for item in recordCountOptions" ng-model="model.recordsPerPage" ng-change="resetPaginInfo()"> </select> </div> </div> </div> </div>'),a.put("src/shared/toast-template.html",'<div class="slds-notify__content slds-grid"> <svg class="slds-icon slds-icon--small slds-m-right--small slds-col slds-no-flex"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#\' + icon | skedSfUrl}}"></use> </svg> <div class="slds-col slds-align-middle"> <h2 class="slds-text-heading--small">{{message}}</h2> </div> </div>')}]);